(()=>{"use strict";var e={2020:(e,t,r)=>{var n=r(8709),i=r(1169),o=r(2764),a=r.n(o),l=r(9245),s=r(8084),p=r(4600),c=r(3622);let d,u,h={monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonthNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},f=Symbol("loading");function m(){}function g(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!t.hasOwnProperty(r[n])||e[r[n]]!==t[r[n]])return!1;return!0}function y(e){return Array.isArray(e)?e:[e]}class b extends n.Component{constructor(e){super(e);let{_innerRefs:t,_bind:r,_state:i}=this.constructor;if(t.length){let e=this._innerRefs={};t.forEach((t=>{Object.defineProperties(e,{[t+"Ref"]:{value:n.createRef(),writable:!0},[t+"El"]:{get:()=>this.innerRefs[t+"Ref"].current}})}))}r.length&&r.forEach((e=>{this[e]=this[e].bind(this)})),i&&(this.state=i(e))}render(){let{_groups:e,_props:t}=this.constructor;return e.length&&e.forEach((e=>{this[e]={}})),this._innerRefs&&(this.innerRefs=Object.create(this._innerRefs)),t&&Object.entries(this.props).forEach((([e,r])=>{let n=t[e];n?n.forEach((e=>{this[e.group][e.prop]=r})):this.rest[e]=r})),this.isMounted()?(this.handleBeforeUpdate||m)():(this.handleBeforeMount||m)(),(this.handleBeforeRender||m)(),this.renderComponent()}isMounted(){return!!this._isMounted}setState(...e){this.isMounted()&&super.setState(...e)}fire(e,...t){if("string"==typeof e&&(e=this.props[e]),e)return e(...t)}shouldComponentUpdate(e,t){return!this.constructor._pure||!(g(e,this.props)&&g(t,this.state))}componentDidMount(){this._isMounted=!0,(this.handleAfterMount||m)(),(this.handleAfterRender||m)()}componentDidUpdate(){(this.handleAfterUpdate||m)(),(this.handleAfterRender||m)()}componentWillUnmount(){this._isMounted=!1,(this.handleBeforeUnmount||m)()}}Object.assign(b,{_pure:!0,_groups:["rest"],_props:{},_innerRefs:[],_bind:[]});let{Fragment:v,createContext:O,createRef:C}=n,{createPortal:k}=i;const w={Component:b,Fragment:v,Provider:l.Provider,Transition:s.uT,async:function(){return(e,t,r)=>{let n=r.value;r.value=function(e={}){return e.state=u.getState(),n(e)}}},bind:function(){return(e,t)=>{let{constructor:r}=e;r.hasOwnProperty("_bind")||(r._bind=r._bind.concat([]));let{_bind:n}=r;n.includes(t)||n.push(t)}},connect:function(e,t){return(0,l.connect)(e,(()=>({})))(t)},createContext:O,createElement:function(e,t,...r){if(t){if(t.prefix){let{prefix:e,modifiers:r,className:n}=t;r&&(r=Object.entries(r).map((([t,r])=>(r||0===r)&&e+"--"+t+(!0===r?"":"-"+r))).filter((e=>!!e)).join(" "),delete t.modifiers),n=[e,r,n].filter((e=>!!e)).join(" "),n&&(t.className=n),delete t.prefix}t.innerRef&&"string"==typeof e&&(t.ref=t.innerRef,delete t.innerRef)}return n.createElement(e,t,...r)},createPortal:k,createRef:C,createStore:function(e){let t={},r=[];return d=e,Object.entries(e).forEach((([e,n])=>{t[e[0].toLowerCase()+e.slice(1)]=n.defaults(),n._reducer&&r.push(n._reducer)})),t=a()(t),u=(0,p.createStore)(((e,n)=>(e||(e=t),r.forEach((t=>{e=t(e,n)||e})),e)))},defaults:function(e){return t=>{let{constructor:r}=t;r.defaultProps=Object.assign({},r.defaultProps,e)}},dispatch:function(){return(e,t,r)=>{let n=e._dispatchers,i=e.prefix()+":"+t;n||(n=e._dispatchers={},e._reducer=(e,t)=>{let{type:r,args:i}=t;return n[r]?n[r](Object.assign({state:e},i)):e}),e["pure"+t.charAt(0).toUpperCase()+t.slice(1)]=n[i]=r.value,r.value=function(e){u.dispatch({type:i,args:e})}}},formatDate:function(e,t){let r=this.formatDate._formats||(this.formatDate._formats={}),n=r[t];if(!n){let e=t.replace(/(Y|y|F|M|m|d|H|i)/g,(e=>{let t;switch(e){case"Y":t='(date.getFullYear()+"").padStart(4,"0")';break;case"y":t='(date.getFullYear()+"").padStart(4,"0").slice(2)';break;case"F":t="this.monthNames[date.getMonth()]";break;case"M":t="this.shortMonthNames[date.getMonth()]";break;case"m":t='(date.getMonth()+1+"").padStart(2,"0")';break;case"d":t='(date.getDate()+"").padStart(2,"0")';break;case"H":t='(date.getHours()+"").padStart(2,"0")';break;case"i":t='(date.getMinutes()+"").padStart(2,"0")'}return'"+('+t+')+"'}));n=r[t]=new Function("date",'return"'+e+'";').bind(h)}return n(e)},getReducer:function(...e){let t=d;return e.forEach((e=>{t=t[e]})),t},innerRefs:function(...e){return t=>{let{constructor:r}=t,n=r._innerRefs=r._innerRefs.concat([]),i=r._props=Object.assign({},r._props);e.forEach((e=>{if(!n.includes(e)){let t=e+"Ref";n.push(e),(i[t]||(i[t]=[])).push({prop:t,group:"innerRefs"})}}))}},isEmpty:function(e){if("object"==typeof e&&null!==e)return!Object.keys(e).length},loading:f,locale:h,memo:function(e){return(t,r,n)=>{let{value:i}=n;n.value=n=>(t[r]=(0,c.P1)(...e(),i))(n)}},print:function(...e){console.log(...e)},props:function(...e){return t=>{let{constructor:r}=t,n=r._groups=r._groups.concat([]),i=r._props=Object.assign({},r._props);e.forEach((e=>{let{group:t,include:r,component:o,prefix:a}=e;n.includes(t)||n.push(t),r=r?y(r):[],o&&(r=r.concat(Object.keys(o._props).filter((e=>!r.includes(e))))),r.forEach((e=>{let[r,n]=e.split(":");if(n||(n=r),a){let e=r.match(/^(on(?:Before|After)?)([A-Z].*)$/);r=e?e[1]+a.charAt(0).toUpperCase()+a.slice(1)+e[2]:a+r.charAt(0).toUpperCase()+r.slice(1)}(i[r]||(i[r]=[])).push({prop:n,group:t})}))}))}},pure:function(e){return({constructor:t})=>{t._pure=e}},render:function(e,t=".root",r){return"string"==typeof t&&(t=document.querySelector(t)),i.render(e,t,r)},shallowEqual:g,state:function(e){return t=>{t.constructor._state=e}},statics:function(e){return t=>{Object.assign(t.constructor,e)}},toArray:y,types:function(e){return t=>{let{constructor:r}=t;r.propTypes=Object.assign({},r.propTypes,e)}}},x={partPrefixes:["ФУМС","КСКС","ИДРЗ","ГВВЕ","ФУГЧ","ХГЛГ","ЗРМГ","ЮУАВ","ЭЭИЕ","ФГЭК","ГПЕВ","ЗСУК","ЕГДГ","НМЦС","ЕЗСЮ","НЗГК","ЧМЮГ","ПККЗ","БЛХФ","ЭЧАИ","РЛГК","ВКНЗ","ИМВЦ","АКИЛ","НФФМ","ТМСЭ","ЧФАК","ССЦЕ","ХПТВ","ДОПЧ","АЗМР","ОДИД","ТПДЕ","НРЕК","КОЧП","ЭХНБ","ХДФЭ","ЦИХИ","КХПЕ","ПГВМ","БСГГ","ЗДЛР","ЭЧЗО","ХХМГ","НХХП","ФБАИ","ЛЮОР","ПКЭЛ","ЭЧОЗ","НУМЛ","ЮЮБМ","МЯЭЦ","ФГКЭ","БХЮП","ФЗМФ","ЕПЦР","ФВИП","ОМКФ","ПНЕП","РЧЭТ","НВЯЗ","ЧЯЮБ","ДХЦГ","ЕГВК","СЭЮЮ","МЦЭТ","УФХЗ","ОБИП","ББВС","ИГРА","ЗТЭР","ГЕЕЯ","ПРЕН","ДВОЮ","ЦУНБ","РКФМ","ЯТИС","МХДН","МТЗЮ","ТЕДТ","ЮТДД","ЦЮКТ","ОМЦО","СДЮЕ","ПИТФ","ТВЕУ","БЭЧЛ","КЛФХ","ЕЧФМ","ИДЭГ","НЭЮЕ","НАЯЛ","ЮЮМБ","ЛФУМ","ЗИОЮ","ДПЛК","ВПКХ","НФЮН","ХФБК","ЭРМФ"],partNames:["Балка","Бандаж","Барабан","Бобышка","Боковина","Болт","Вал","Венец","Веретено","Вертлюга","Вилка","Винт","Вкладыш","Воронка","Втулка","Вышка","Гайка","Гвоздь","Гильза","Груз","Грундбукса","Дверца","Демпфер","Держатель","Днище","Желоб","Заглушка","Задвижка","Зажим","Заклепка","Запор","Заслонка","Затвор","Захват","Зацеп","Защелка","Звено","Звездочка","Золотник","Игла","Кардан","Каретка","Каркас","Карниз","Кассета","Каток","Катушка","Клапан","Колесо","Колодка","Колонна","Колпак","Колпачок","Кондуктор","Консоль","Конус","Короб","Корпус","Косынка","Коуш","Крепеж","Крестовина","Кронштейн","Крыльчатка","Крышка","Крюк","Кулачок","Кулиса","Лапа","Лента","Лист","Ложемент","Лопасть","Лоток","Люк","Лючок","Манжета","Маховик","Маховичок","Мачта","Маятник","Мембрана","Модуль","Молот","Муфта","Накладка","Наконечник","Насадка","Ниппель","Нож","Ножка","Носок","Обвязка","Обечайка","Облицовка","Обод","Ободок","Обойма","Оболочка","Обтекатель","Обруч","Обшивка","Ограничитель","Окантовка","Оплетка","Опора","Оправа","Основание","Ось","Палец","Панели","Панцирь","Патрубок","Педаль","Перегородка","Переходник","Петля","Планка","Планки","Пластина","Платформа","Плата","Плита","Пломба","Площадка","Подвеска","Подложка","Подкос","Подножка","Подпорка","Подрамник","Подставка","Ползун","Полка","Полоз","Полоса","Полукольцо","Полусфера","Полухомут","Портал","Поручни","Поршни","Пояс","Прижим","Призма","Прихват","Пробка","Прокладка","Противовес","Проушина","Пружина","Радиатор","Рама","Рамка","Распорка","Раструб","Растяжка","Ребро","Рейка","Рельсы","Ремень","Решетка","Ригель","Ролики","Рукав","Рукоятка","Ручка","Рым-болт","Рычаг","Салазки","Сальник","Седло","Секторы","Секция","Серьга","Сетка","Скобы","Скребок","Собачка","Сопло","Стакан","Станина","Створки","Стенка","Стержень","Стойка","Стопор","Стрелы","Стрингер","Ступица","Стяжка","Сухарь","Сфера","Тарелка","Толкатель","Тяга","Упор","Ухват","Ушко","Фиксатор","Фланец","Форсунка","Хвостовик","Хомут","Цапфа","Чашки","Чека","Шайба","Шарнир","Шатун","Шкив","Шнек","Шпилька","Шпиндель","Шплинт","Шпонка","Штанга","Штифт","Шток","Штуцер","Штырь","Шуруп","Щека","Экран","Эксцентрик"],taskTypes:["create","update","destroy"],taskStates:["todo","doing","done"],comments:["Для человека просто невозможно представить действительные размеры Вселенной. Мы не только не знаем, насколько она велика, но нам даже трудно вообразить, насколько она может простираться.","Если мы начнем удаляться от Земли, мы поймем, почему это так. Земля — это маленькая частичка Солнечной системы. В Солнечную систему входят Солнце, планеты, которые вращаются вокруг Солнца, астероиды, представляющие собой маленькие планеты, и метеоры.","Вся наша Солнечная система в свою очередь является небольшой частью другой большой системы, называемой «галактика». Галактика состоит из миллионов и миллионов звезд, многие из которых значительно больше нашего Солнца и имеют свои солнечные системы.","Вне Млечного Пути, вероятно, есть еще миллионы галактик. Но, возможно, все они вместе образуют еще более значительную систему.","Вот почему нам трудно представить размеры Вселенной. Кстати, ученые полагают, что Вселенная расширяется. Это означает, что расстояние между двумя галактиками за несколько миллиардов лет увеличивается в два раза.","Мы не знаем, почему Солнечная система имеет такую форму. Она могла бы быть иной, как многие другие солнечные системы во Вселенной, устроенные совсем по-другому. Это зависит от того, как они появились. Но человек открыл законы природы, которые позволяют объяснить, как сохраняется нынешняя форма Солнечной системы.","Подобно другим планетам, Земля вращается по орбите вокруг Солнца. Время одного оборота Земли вокруг Солнца мы называем годом. Орбиты других планет больше или меньше орбиты Земли.","Авторы другой группы теорий считают, что в прошлом Солнце сблизилось с другой звездой. От Солнца отделились большие «куски», которые начали вращаться вокруг Солнца. Эти части Солнца и превратились в планеты.","Трудно поверить, но и звезды, которые светят ночью, и Солнце, которое светит днем, одинаковы.","В прошлом ученые считали, что солнечный свет, тепло являются результатом горения. Но поверхность Солнца остается горячей уже сотни миллионов лет, а так долго ничто гореть не может.","Сегодня ученые полагают, что Солнце выделяет тепло в результате процессов, аналогичных тем, которые происходят в атомной бомбе. Солнце превращает материю в энергию.","Этот процесс отличается от горения. При горении одна форма материи переходит в другую. При переходе материи в энергию необходимо минимальное количество материи для производства огромного количества энергии. Двадцать восемь граммов материи выделяют энергию, достаточную для того, чтобы расплавить более 1 миллиона тонн скальных пород.","Незабываемые багряные закаты, теплые переливающиеся краски — трудно представить себе более впечатляющую картину. Но иногда, глядя на все это, мы говорим: «Какое багровое солнце!»","В действительности же мы знаем, что Солнце само не стало красным и совсем не изменилось. Просто оно выглядит так в определенное время суток. В это же самое время для человека, живущего несколько тысяч километров западнее, Солнце совсем не выглядит багровым или красным.","На цвет заката влияет слой воздуха, сквозь который проходит луч Солнца. Чем ниже Солнце, тем больший слой атмосферы должен преодолеть солнечный свет.","Приблизительный ответ на этот вопрос таков: Земля представляет собой огромный шар, или сферу, в основном состоящую из твердых скальных пород. Ядро Земли также твердое, так как внутренние породы находятся под чудовищным давлением.","В своем вращении вокруг Земли Луна иногда оказывается непосредственно между Землей и Солнцем, отбрасывая тень на поверхность Земли. Происходит затмение Солнца.","Затмение Луны происходит только при полной Луне и когда она располагается на противоположной от Солнца стороне Земли. Когда Земля проходит между Луной и Солнцем, Луна попадает в тень Земли и исчезает из виду. Частичное затмение происходит, когда Луна входит в земную тень только частично.","В одни годы лунных затмений не бывает, в другие — от одного до трех. Ежегодно происходит от двух до пяти солнечных затмений. В некоторых частях Земли полное солнечное затмение можно наблюдать один раз в 360 лет.","Наблюдая звезды, вы, вероятно, замечали, что они образуют знакомые нам буквы, треугольники, квадраты. С давних пор в различных частях света человек давал имена таким группам звезд. В переводе с латыни «созвездие» означает «группа звезд».","Современные названия созвездий пришли к нам от древних римлян, а к ним — из древней Греции. Часть сведений о звездах древние греки позаимствовали у жителей Вавилона.","Примерно в 150 году нашей эры известный астроном Птолемей отметил 48 созвездий, которые были ему известны. Этот список не включал созвездий всего звездного неба, имелось много пропусков. Поэтому позднее астрономы расширили перечень, составленный Птолемеем. Некоторые из этих последних созвездий носят названия научных инструментов, например, Секстант, Компас, Микроскоп. Сегодня астрономам известно 88 созвездий звездного неба.","Созвездие занимает определенный участок неба. Это означает, что каждая звезда располагается в своем созвездии, так же, как каждый город в Соединенных Штатах, к примеру, располагается в определенном штате. В свое время границы созвездий были непостоянными, зачастую изломанными. В 1928 году астрономы решили спрямить их так, чтобы границы созвездий образовывали только прямые линии.","Самым загадочным и прекрасным на небе, по-видимому, является Млечный Путь, протянувшийся подобно ожерелью из драгоценных камней от одного края неба до другого. В древности люди, глядя на эту картину, как и мы, удивлялись и восторгались этой красотой. Не зная, что это может быть, они давали необычные и порой красивые объяснения Млечному Пути.","Например, при зарождении христианства люди считали, что это дорога ангелов, по которой те могли подниматься на небеса. Они также думали, что это отверстие в небе, которое позволяет живущим на Земле увидеть, что находится за небесным сводом.","Наши сегодняшние знания о Млечном Пути не мешают нам восторгаться им. Действительность так же удивительна, как и древние легенды о его якобы создании.","Наша галактика, округлая и плоская, по форме напоминает часы. Если бы мы смогли посмотреть на нее сверху, мы увидели бы, что галактика действительно похожа на часы. Но мы находимся внутри галактики, и, глядя вверх, мы как бы смотрим на край часов изнутри. Мы наблюдаем, что их край изгибается вокруг нас. Эти миллионы звезд и составляют Млечный Путь.","Известно ли тебе, что галактика состоит из 3 миллиардов звезд? И мы имеем представление о ее размере. Свет от Солнца доходит до Земли за 8 минут. А расстояние от центра галактики до Солнца луч света пройдет за 27 тысяч лет.","Тебе, наверное, кажется, что звезд в небе несметное множество. Но без телескопа ты можешь увидеть не более 6000 звезд, из них около 1500 находятся в Южном полушарии и не видны в Северном полушарии.","Чем ниже класс, или величина, тем больше звезд она насчитывает. Так, если к первой величине мы относим только 22 звезды, то звезд 20 класса насчитывается около миллиарда.","Многие тысячелетия человек наблюдал падающие звезды, задумываясь о том, что это такое и откуда они происходят. Некоторое время считалось, что они приходят из других миров.","Сегодня мы знаем, что это совсем не «звезды». Мы называем их «метеорами». Они состоят из твердого тела и, двигаясь в космическом пространстве, иногда попадают в атмосферу Земли.","Когда метеор проходит сквозь нашу атмосферу, мы можем наблюдать это, так как он оставляет в небе яркий след. Это приходит оттого, что в результате трения поверхности метеора о воздух выделяется тепло.","Удивительно, но большинство метеоров очень малы, не больше булавочной головки. Некоторые метеоры могут весить до нескольких тонн. Большинство метеоров полностью сгорают в атмосфере, и только крупные метеоры достигают поверхности Земли. По оценкам ученых, за сутки на Землю падают тысячи метеоров, но так как большую часть Земли покрывают моря и океаны, метеоры попадают в основном туда.","Мы можем видеть один метеор, который пролетает в любом направлении, но обычно мы наблюдаем метеорные потоки, состоящие из тысяч падающих звезд. Когда Земля пересекает метеорный поток, огромная масса метеоров, попадая в верхние слои атмосферы, разогревается, и тогда мы видим «метеорный дождь».","Как появились метеоры? Современные астрономы считают, что эти потоки метеоров являются остатками комет. При разрушении кометы миллионы ее частиц продолжают движение в космосе в виде потока метеоров. Они движутся по круговым орбитам. Каждые 33 года Земля пересекает орбиту такого потока метеоров.","Метеор, достигший поверхности земли, называется «метеорит». Он падает на Землю из-за силы тяжести. В 467 году до нашей эры в древнем Риме было зарегистрировано падение метеорита. Это событие посчитали столь важным, что даже древнеримские историки отметили его.","Было время, когда появление комет вызывало у людей ужас. Они считали кометы дьявольским предзнаменованием, предвестником чумы, войн, смерти.","Сегодня мы знаем, что такое кометы, однако многое о них остается неясным. Когда мы впервые замечаем комету, мы наблюдаем только небольшой светлый объект, хотя сама комета может достигать нескольких тысяч километров в диаметре.","Источником света является «голова», или ядро кометы. Ученые считают, что она, возможно, состоит из сгустка твердых частиц и газов. Для нас остается загадкой, откуда они взялись.","Хвосты комет различны по форме и размеру. Одни — короткие и широкие, другие — длинные и тонкие. Обычно их длина достигает порядка 10 млн км, а иногда — 180 млн км. А у некоторых комет вообще нет хвоста.","По мере того, как растет хвост, возрастает скорость движения кометы, так как она приближается к Солнцу. В это время комета движется головой вперед. А затем происходит нечто странное. Комета, удаляясь от Солнца, движется хвостом вперед. Это происходит оттого, что лучи Солнца срывают с ядра кометы мельчайшие частицы материи, образуя хвост кометы, в направлении, обратном Солнцу.","Как вам известно, ученые проводят различные эксперименты по поиску жизни во Вселенной. Естественно, легче исследовать нашу Солнечную систему в поисках жизни, чем изучать космическое пространство. Некоторые ученые считают, что одним из мест, где может существовать какая-то форма жизни, является Марс.","Почему они выбрали Марс? Марс считают двойником нашей Земли. По расстоянию до Солнца Марс идет вслед за Землей. Его диаметр наполовину меньше земного, один оборот вокруг Солнца Марс совершает почти за два года. Но продолжительность марсианского дня почти совпадает с земным.","При наблюдении Марса астрономы отметили некоторые детали, свидетельствующие о том, что на Марсе могут существовать какие-то формы жизни. Во-первых, на Марсе, как и на Земле, есть времена года. И действительно, со сменой времен года наблюдаются изменения на поверхности планеты. Весной и летом темные участки поверхности еще более темнеют, их цвет из голубовато-зеленого превращается в желтый. Может быть, это растительность?","По прогнозам астрономов, атмосфера планеты содержит небольшое количество водяных паров, что может содействовать развитию жизни. В 1887 году Джованни Скиапарелли, итальянский астроном, объявил о том, что он наблюдал на поверхности Марса нечто, напоминающее каналы. «Могли ли их построить марсиане, чтобы получать воду в засушливых районах из полярных районов?» — задавали вопрос ученые.","Вот как образуются облака: теплый воздух с водяными парами поднимается в небо. На определенной высоте теплый воздух охлаждается. При низких температурах влага не может больше находиться в виде водяных паров. Лишняя влага превращается в капельки воды, частички льда — вот так образуется облако.","Нет двух похожих облаков, они постоянно меняют свою форму. Различие формы облаков объясняется тем, что они образуются на различной высоте и при различной температуре. Кроме того, облака могут состоять из различных частичек, в зависимости от высоты и температуры.","На высоте 10 км и выше располагаются «перистые», «перисто-слоистые» и «перисто-кучевые» облака. Перистые облака похожи на перья и волокна, перисто-слоистые — на тонкие беловатые полосы, перисто-кучевые — это небольшие округлые облака, о них мы говорим «небо в барашках». Все эти облака состоят из тонких льдинок.","Низкие облака состоят из маленьких капелек воды. На высоте 3–5 км от поверхности Земли располагаются высококучевые облака, состоящие из больших масс паров и частиц, чем перисто-кучевые облака. На такой же высоте образуются высокослоистые облака, часто закрывающие все небо серой вуалью, сквозь которую Солнце и Луна просвечивают бледными пятнами.","Если ты видел изображение туманностей в книгах — в виде огромных спиралей, завихрений и облаков, не надейся увидеть подобное в небе. Большинство туманностей без телескопа не разглядеть. Слово «туманность» появилось оттого, что они напоминали туманные пятна наблюдавшим их сквозь слабенькие телескопы астрономам.","Существуют два основных класса туманностей — галактические и внегалактические. Галактические туманности можно обнаружить в нашей галактике (Млечный Путь). Они состоят из пыли и газа. Внегалактические туманности расположены за пределами нашей галактики. В основном они состоят из звезд.","Галактических туманностей насчитывается менее 2 тысяч. Значит, большинство туманностей, известных человеку, расположены вне нашей Галактики. Сколько их? Насколько нам известно, на огромном пространстве вне Млечного Пути их могут быть миллионы.","Внегалактические туманности еще называются «островными вселенными» или «галактиками». Это означает, что если бы кто-то наблюдал нашу Галактику оттуда, она бы выглядела как туманность.","Время от времени мы сталкиваемся с некоторыми вопросами, относящимися к нашей Земле, которые представляются нам таинственными и на которые еще не найдено ответов. Например, наличие соли в воде океанов. Как она туда попала?","Да мы просто не знаем, как соль попала в океан! Конечно, нам известно, что соль растворяется в воде и что она попадает в океаны с дождевой водой. Соль с поверхности Земли постоянно растворяется и попадает в океан.","Но мы не знаем, можем ли мы этим объяснить наличие огромного количества соли в океанах. Если высушить все океаны, из оставшейся соли можно было бы построить стену высотой 230 км и толщиной почти 2 км. Такая стена смогла бы обогнуть по экватору весь земной шар. Или другое сравнение. Соль всех высохших океанов по объему в 15 раз больше всего европейского континента!","Основное количество пищевой соли добывают из каменной соли. Обычно к залежам соли прокладывают шахты. По трубам закачивают чистую воду, которая растворяет соль. По второй трубе этот раствор поднимается на поверхность.","Океаны во многом остаются для нас загадкой. Мы даже не знаем возраста океанов. Вполне возможно, что на первых этапах развития Земли океанов не существовало.","Сегодня человек исследует океанское дно, чтобы лучше их изучить. До глубины 3600 м дно океанов покрыто мягкими илистыми отложениями. Они состоят из известковых скелетов мельчайших морских животных. На глубинах, превышающих 6 км, дно покрыто мелким красноватым илом, называемым «красная глина». В его состав входят частички скелетов животных, остатки мелких растений и вулканический пепел.","В настоящее время глубину океанов измеряют, направляя вглубь звуковые волны и принимая отраженный сигнал. Для этого измеряют время, за которое звуковая волна достигает дна и после отражения возвращается; после этого величину времени делят пополам.","Если вы когда-либо проводили время на берегу водоема, то замечали, наверное, что в тихую погоду на воде почти нет волн, а в ветреный дождливый день — волн много.","Вот как можно объяснить появление волн на воде. Их создает ветер. Волна — это способ перемещения одной из форм энергии с одного места на другое. Для зарождения волны необходима какая-то сила или энергия, и ветер передает такую энергию воде.","У самого берега основание волны ударяется о дно, и движение волны замедляется из-за трения. Гребень волны продолжает движение, обрушиваясь вниз и образуя прибой.","У берега волны теряют свою энергию. Постой в волнах у самого берега, и ты поймешь, какой энергией они обладают!","В волнах частицы воды движутся вверх и вперед, толкаемые ветром. Затем сила тяжести заставляет их опускаться и возвращаться в исходное положение. Эти движения воды и заставляют волны передвигаться. Расстояние между гребнями двух волн называется длиной волны, самое нижнее ее положение называется подошвой.","27 августа 1883 года огромное извержение вулкана практически уничтожило остров Кракатау. Этот взрыв образовал волны высотой несколько десятков метров, которые стерли с лица Земли сотни деревень. Волны пронеслись по океану со скоростью до 1300 км/час, достигнув берегов Австралии и Калифорнии за многие тысячи километров от места катастрофы!","Такие волны называются приливными. Они совершенно не похожи на обычные волны в море или у берега и не зависят ни от ветра, ни от течения. Ученые дали этим волнам японское название «цунами». Различные катаклизмы, происходящие на морском дне, создают приливные волны, или цунами. Как правило, это подводные землетрясения.","В результате подводного землетрясения образуется ударная волна, которая распространяется в воде наподобие того, как звук распространяется в воздухе. И действительно, такая ударная волна в воде имеет скорость звука.","При подводном землетрясении происходит перемещение морского дна по вертикали и горизонтали. Вот эти перемещения дна и ударная волна вызывают приливные волны. На поверхности воды может внезапно образоваться огромная воронка или наоборот — возникает столб воды. Появляется приливная волна, которая с огромной скоростью движется по морской поверхности.","Когда приливная волна приближается к берегу, ее первым признаком, как ни странно, может быть незначительное повышение уровня моря. Затем на несколько минут море отступает, как при отливе. Может обнажиться обширный участок морского дна. И затем появляется всеразрушающая приливная волна!","Когда мы думаем о водоворотах, нам представляется огромная вращающаяся масса воды, которая затягивает людей и корабли, принося разрушение и смерть. Хотя водовороты и представляют опасность, они не в состоянии что-либо затягивать или поглощать.","Давайте посмотрим, что такое водоворот. Ты, вероятно, наблюдал маленькие водовороты в ручье. Они образуются там, где берег вдается в поток и придает вращательное движение потоку.","Вращаясь на небольшом пространстве, вода стремится к внешнему краю водоворота, создавая выемку в центре. Это результат центробежной силы. Именно эта сила держит воду в ведре, когда мы вращаем это ведро.","Какова природа больших водоворотов, которые якобы представляют опасность для судов и людей? Когда одна волна настигает предыдущую, океанические потоки получают вращательное движение. Это особенно часто происходит в узких проливах между островами и участками суши.","Если такой узкий пролив имеет достаточную глубину, при проходе по нему прилива мы наблюдаем образование воронок во вращающейся массе воды. Но, как мы уже говорили, этого не происходит в открытых океанах. Водоворот в океане — это всего лишь турбулентное движение воды в больших масштабах, то есть вращение воды.","Гольфстрим — самое известное океанское течение, протекающее по морю, а не по суше. Но Гольфстрим настолько велик, что его масса больше всех рек, текущих по суше!","Он начинает свой путь в Атлантическом океане недалеко от экватора. Движение воды на поверхности или «дрейф» происходит в западном направлении, поэтому вначале Гольфстрим направляется к северу от Южной Америки в Карибское море. И только когда он поворачивает на север и движется вдоль восточного побережья США, он становится Гольфстримом.","Так как Гольфстрим зарождался в теплой части света, это поток теплой воды. Приток огромной массы теплой воды приносит значительные изменения в климат многих регионов!","Благодаря Гольфстриму, зима в Париже и Лондоне теплее, чем в южной части Лабрадора, где зимой очень холодно. Ветры, проходя над Гольфстримом, становятся теплыми и влажными. Когда такой ветер остывает, например при приближении к Ньюфаундленду, образуется густой туман. Вот почему бывают известные туманы на Большой Банке в районе Ньюфаундленда.","Вода, которая вытекает из родников, когда-то выпала в виде дождя. Дождевая вода впитывается в землю и проникает в скальный грунт по трещинам. Конечно, часть воды остается у поверхности и испаряется в воздух, а также поглощается растениями через их корневую систему.","Остальная вода под воздействием силы тяжести опускается вниз настолько, насколько позволяет скальный грунт. Глубоко под землей на различной глубине имеются участки, где все пустоты скального грунта заполнены водой. Такие участки называют «зоной подземных вод». Верхний уровень таких вод называют «уровень воды» (граница водоносного слоя).","Родник образуется тогда, когда для воды находится естественное отверстие в земле, расположенное ниже уровня этого слоя воды. Вот почему многие родники расположены в долинах или в других низких местах. Грунтовые воды вытекают через родники по скальным пустотам по дну или по склонам подобных низин. Родник тоже подчиняется силе тяжести: вода течет сверху вниз.","Некоторые родники питаются водой из водоносного слоя. Они действуют круглый год и называются «постоянными». У других родников их канал, соединяющий поверхность с водоносным слоем, расположен в непосредственной близости от верхнего уровня воды этого слоя. Такие родники действуют только во время дождей, когда уровень воды повышается. Их называют «пульсирующими».","Родниковая вода проходит сквозь скальный грунт под землей, поэтому она содержит некоторые минералы, такие, как сера, известь. Источники, вода которых содержит значительные объемы минеральных солей, называются минеральными источниками.","В некоторых районах, особенно там, где была вулканическая деятельность, вода соприкасается с нагретыми подземными скальными породами. Подобные источники называют «термальными».","Из — за их гигантских размеров люди думали, что горы вечны и неизменны. Но геологи, ученые, которые изучают горы, могут доказать, что горы изменяются и что они не вечны.","Определенные изменения земной поверхности привели к возникновению гор, которые постоянно разрушаются и меняются. Склоны гор разрушаются замерзающей водой, почва и частицы скального грунта вымываются дождем и потоками воды. Со временем даже высочайшие вершины превращаются в холмы и равнины.","По способу образования геологи разделили горы на четыре типа. Вместе с тем горы образовались в результате резких изменений земной поверхности многие миллионы лет назад.","Для сводчатых гор характерны скальные породы, поднятые вверх в виде сводов. Расплавленная лава, поднимаясь под большим давлением на поверхность Земли, смогла поднять эти пласты горных пород. Примером таких гор могут служить Черные Холмы в штате Южная Дакота в США.","Целиковые горы возникли в результате разломов или провалов земной коры. Обширные участки земной коры, целые горные гряды за короткое время поднимались или опускались. Горная цепь Сьерра Невада, 740 км длиной и 150 км шириной, расположенная в Калифорнии, США, может служить примером этих гор.","Вулканические горы состоят из лавы, вулканического пепла и шлаков, попавших на поверхность Земли. Вулканы обычно имеют коническую форму с большим кратером на вершине. Наиболее известными вулканами являются Рейнер, Шаста и Худ в США, Фудзияма в Японии, Везувий в Италии.","Найдется ли во всем мире мальчишка, который не собирал в свое время различной формы и окраски камешки? Различные по размерам и цвету, гладкие и шероховатые, напоминающие драгоценные камни — они просто заставляют нас собирать их!","Они выглядят такими привлекательными потому, что состоят из одного или нескольких минералов. Именно эти минералы придают различным камням прекрасные оттенки, заставляя некоторые из них сверкать наподобие драгоценных камней.","Другие скальные породы произошли из расплавленного вещества, находившегося глубоко под землей. Их вынесло на поверхность земли, часть попала в трещины других скальных пород. Такие скальные породы называют «пирогенными», или вулканического происхождения. К ним относятся гранит и базальт.","Третий тип скал имел раньше другую форму и структуру (вулканическую или слоистую), но изменился под воздействием температур или высокого давления. Их называют «метаморфными», к ним относятся мрамор и кварциты.","Некоторые скальные породы содержат наряду с другими примесями минералы металлов. Если таких минералов достаточно для производства металла, такая порода называется «руда».","Но и после того, как древние люди перестали использовать пещеры в качестве жилищ, пещеры окружал ореол необычного и странного. Греки верили, что пещеры были храмами их богов — Зевса, Пана, Дионисия и Плутона. В древнем Риме считали, что в пещерах обитают нимфы и колдуньи. Древние персы и другие народы полагали, что в пещерах обитает царь всех земных духов Митрас.","Пещеры образуются по-разному. Некоторые из них образовались в результате постоянного воздействия морских волн на скалы. Отдельные пещеры расположены под водой. Они являются обычно результатом деятельности подземных вод, вымывающих мягкие породы, например, известняк. Ряд пещер образовался в результате вулканической деятельности и подвижки скальных пород или в результате извержения горячей лавы.","Основная масса пещер в Соединенных Штатах появилась в результате разрушения значительных слоев известняка, особенно при воздействии на него воды, содержащей двуокись углерода. В штатах Индиана, Кентукки и Теннесси в слое известняка толщиной в среднем 53 метра образовалось множество пещер."],toolNames:["Резец","Фреза","Сверло","Зенкер","Развёртка","Зенковка","Цековка","Метчик","Плашка","Протяжка","Напильник","Шевер"],toolGrades:["Ст1кп","Ст1пс","Ст1сп","Ст2кп","Ст2пс","Ст2сп","Ст3Гпс","Ст3Гсп","Ст3кп","Ст3пс","Ст3сп","Ст4кп","14ХГН","15Г","15Н2М","15Х","15ХА","15ХГН2ТА","15ХФ","16Г2","16ХСН","18Х2Н4ВА","18Х2Н4МА","18ХГ","18ХГТ","19ХГН","20Г","20Г2","20Н2М","20Х","20Х2Н4А","20ХГНМ","20ХГНР","20ХГНТР","20ХГР","20ХГСА","20ХМ","20ХН","20ХН2М","20ХН3А","20ХН4ФА","20ХНР","20ХФ","25Г","25Х2ГНТА","25Х2Н4МА","25ХГМ","25ХГНМТ","25ХГСА","25ХГТ","27ХГР","30Г","30Г2","30Х","30Х3МФ","30ХГС","30ХГСА","30ХГСН2А","30ХГТ","30ХН2МА","30ХН2МФА","30ХН3А","30ХН3М2ФА","30ХРА","33ХС","34ХН1М","34ХН1МА","34ХН3М","34ХН3МА","35Г","35Г2","35Х","35ХГ2","35ХГН2","35ХГСА","06Г2СЮ","06ХГСЮ","08Г2С","09Г2","09Г2Д","09Г2С","09Г2СД","10Г2Б","10Г2БД","10Г2С1","10Г2С1Д","10ГС2","10ГТ","10ХГСН1Д","10ХНДП","10ХСНД","12Г2Б","12Г2СМФ","12ГН2МФАЮ","12ГС","12ХГН2МФБАЮ","14Г2","14Г2АФ","14Г2АФД","14ХГС","15Г2АФД","15Г2АФДпс","15Г2СФ","15Г2СФД","15ГС","15ГФ","15ГФД","15ХСНД","16Г2АФ","16Г2АФД","16ГС","16Д"],materialNames:["Сталь","Алюминий","Медь","Бронза","Латунь","Чугун"],materialGrades:{Сталь:["Ст1кп","Ст1пс","Ст1сп","Ст2кп","Ст2пс","Ст2сп","Ст3Гпс","Ст3Гсп","Ст3кп","Ст3пс","Ст3сп","Ст4кп","14ХГН","15Г","15Н2М","15Х","15ХА","15ХГН2ТА","15ХФ","16Г2","16ХСН","18Х2Н4ВА","18Х2Н4МА","18ХГ","18ХГТ","19ХГН","20Г","20Г2","20Н2М","20Х","20Х2Н4А","20ХГНМ","20ХГНР","20ХГНТР","20ХГР","20ХГСА","20ХМ","20ХН","20ХН2М","20ХН3А","20ХН4ФА","20ХНР","20ХФ","25Г","25Х2ГНТА","25Х2Н4МА","25ХГМ","25ХГНМТ","25ХГСА","25ХГТ","27ХГР","30Г","30Г2","30Х","30Х3МФ","30ХГС","30ХГСА","30ХГСН2А","30ХГТ","30ХН2МА","30ХН2МФА","30ХН3А","30ХН3М2ФА","30ХРА","33ХС","34ХН1М","34ХН1МА","34ХН3М","34ХН3МА","35Г","35Г2","35Х","35ХГ2","35ХГН2","35ХГСА","06Г2СЮ","06ХГСЮ","08Г2С","09Г2","09Г2Д","09Г2С","09Г2СД","10Г2Б","10Г2БД","10Г2С1","10Г2С1Д","10ГС2","10ГТ","10ХГСН1Д","10ХНДП","10ХСНД","12Г2Б","12Г2СМФ","12ГН2МФАЮ","12ГС","12ХГН2МФБАЮ","14Г2","14Г2АФ","14Г2АФД","14ХГС","15Г2АФД","15Г2АФДпс","15Г2СФ","15Г2СФД","15ГС","15ГФ","15ГФД","15ХСНД","16Г2АФ","16Г2АФД","16ГС","16Д"],Алюминий:["АК21М2.5Н2.5","АК4М4","АК5М2","АК5М7","АК7","АК7М2","АК9","АЛ1","АЛ11","АЛ13","АЛ19","АЛ2","АЛ21","АЛ22","АЛ23","АЛ23-1","АЛ24","АЛ25","АЛ26","АЛ27","АЛ27-1","АЛ28","АЛ29","АЛ3","АЛ30","АЛ32","АЛ33","АЛ34","АЛ4","АЛ4-1","АЛ4М","АЛ5","АМг1","АМг2","АМг3","АМг3С","АМг4","АМг4.5","АМг5","АМг5П","АМг6","АМц","АМцС","АЦпл","В65","В93","В94","В95","В95П","В96","В96ц","В96Ц1"],Медь:["М1","М1к","М1р","М1ф","М2","М2р","М3","М3р","МН0.6","МН10","МН16","МН19","МН25","МН95-5","МНА13-3","МНА6-1.5","МНЖ5-1","МНЖКТ5-1-0.2-0.2","МНЖМц10-1-1","МНЖМц30-1-1","МНМц3-12","МНМц40-1.5","МНМц43-0.5","МНМцАЖ3-12-0.3-0.3","МНЦ12-24","МНЦ15-20","МНЦ18-20","МНЦ18-27","МНЦС16-29-1.8"],Бронза:["БрО10 ","БрО10С10","БрО10С12Н3","БрО10Ф1","БрО10Ц2","БрО19","БрО3.5Ц7С5","БрО3Ц12С5","БрО3Ц7С5Н","БрО3Ц7С5Н1","БрО4Ц4С17","БрО4Ц7С5","БрОФ2-0.25","БрОФ4-0.25","БрОФ6.5-0.15","БрОФ6.5-0.4","БрОФ7-0.2","БрОФ8-0.3","БрА10Ж3Мц2","БрА10Ж4Н4Л","БрА10Мц2Л","БрА11Ж6Н6","БрА7Ж1.5С1.5","БрА7Мц15Ж3Н2Ц2","БрА9Ж3Л","БрА9Ж4","БрА9Ж4Н4Мц1","БрА9Мц2Л","БрС30"],Латунь:["Л60","Л63","Л66","Л68","Л70","Л75","Л80","Л85","Л90","Л96","ЛА77-2","ЛА85-0.5","ЛАЖ60-1-1","ЛАМш77-2-0.05","ЛЖМц59-1-1","ЛЖС58-1-1","ЛК80-3","ЛКС65-1.5-3","ЛМц58-2","ЛМцА57-3-1","ЛМш68-0.05","ЛН65-5","ЛО60-1","ЛО62-1","ЛО70-1","ЛО90-1","ЛОМш70-1-0.05","ЛС59-1","ЛС59-1В","ЛС60-1","ЛС63-3","ЛС64-2"],Чугун:["Л2","Л3","Л4","Л5","Л6","ЛР1","ЛР2","ЛР3","ЛР4","ЛР5","ЛР6","ЛР7","ПВК1","ПВК2","ПВК3","ПЛ1","ПЛ2","ПФ1","ПФ2","ПФ3","СЧ10","СЧ15","СЧ20","СЧ25","СЧ30","СЧ35","КЧ30-6","КЧ33-8","КЧ35-10","КЧ37-12","КЧ45-7","КЧ50-5","КЧ55-4","КЧ60-3","КЧ65-3","КЧ70-2","КЧ80-1.5","ЧГ6С3Ш","ЧГ7Х4","ЧГ8Д3","ЧН11Г7Ш","ЧН15Д3Ш","ЧН15Д7","ЧН19Х3Ш","ЧН20Д2Ш","ЧН4Х2","ЧС13","ЧС15","ЧС15М4","ЧС17","ЧС17М3","ЧХ16","ЧХ16М2","ЧХ22","ЧХ22С","ЧХ28","ЧХ28Д2","ЧХ28П","ЧХ32","ЧХ9Н5","ЧЮ22Ш","ЧЮ30","ЧЮ6С5","ЧЮ7Х2"]},materialShapes:["Круг","Квадрат","Шестиганник","Лист"],materialSizes:{Круг:["10","12","14","16","18","20","22","24"],Квадрат:["10","12","14","16","18","20"],Шестиганник:["5","6","7","8","9","10"],Лист:["100x100","200x200","300x300","400x400","500x500","600x600"]},operationNames:["Агрегатная","Протяжная","Долбёжная","Вертикально-фрезерная","Горизонтально-фрезерная","Вертикально-фрезерная","Горизонтально-расточная","Токарно-винторезная","Токарно-револьверная","Токарно-программная","Токарно-карусельная","Зубофрезерная","Зубострогальная","Зубошевинговальная","Плоскошлифовальная","Бесцентрово-шлифовальная","Круглошлифовальная","Хонинговальная","Контрольная","Гибка","Правка","Разметка","Разрезка","Развальцовка","Очистка"],machineNames:["Агрегатный","Протяжной","Долбёжный","Вертикально-фрезерный","Горизонтально-фрезерный","Вертикально-сверлильный","Горизонтально-расточной","Токарно-винторезный","Токарно-револьверный","Токарныйспрограммнымуправлением","Токарно-карусельный","Зуборезный","Зубострогальный","Зубошевинговальный","Плоскошлифовальный","Бесцентрово-шлифовальный","Круглошлифовальный","Хонинговальный","Листогибочный","Листоправильный","Разметочный","Вальцовочный"],firstNames:["Александр","Алексей","Андрей","Артем","Арсений","Владислав","Денис","Дмитрий","Евгений","Егор","Иван","Игорь","Илья","Кирилл","Максим","Матвей","Михаил","Никита","Роман","Руслан","Сергей","Тимофей","Тимур","Ярослав"],middleNames:["Александрович","Артемович","Бедросович","Богданович","Борисович","Валентинович","Владимирович","Владиславович","Георгиевич","Григорьевич","Данилович","Ефимович","Иванович","Иваныч","Иосифович","Исаакович","Кириллович","Николаевич","Олегович","Павлович","Палыч","Петрович","Робертович","Романович","Семенович","Феликсович","Филиппович","Эдуардович","Юрьевич","Яковлевич"],lastNames:["Иванов","Смирнов","Кузнецов","Попов","Васильев","Петров","Соколов","Михайлов","Новиков","Федоров","Морозов","Волков","Алексеев","Лебедев","Семенов","Егоров","Павлов","Козлов","Степанов","Николаев","Орлов","Андреев","Макаров","Никитин","Захаров","Зайцев","Соловьев","Борисов","Яковлев","Григорьев"],messages:["И ветер, и дождик, и мгла.","Над холодной пустыней воды.","Здесь жизнь до весны умерла.","До весны опустели сады.","Я на даче один. Мне темно.","За мольбертом, и дует в окно.","Вчера ты была у меня.","Но тебе уж тоскливо со мной.","Под вечер ненастного дня.","Ты мне стала казаться женой.","Что ж, прощай! Как-нибудь до весны.","Проживу и один — без жены.","Сегодня идут без конца.","Те же тучи — гряда за грядой.","Твой след под дождем у крыльца.","Расплылся, налился водой.","И мне больно глядеть одному.","В предвечернюю серую тьму.","Мне крикнуть хотелось вослед.","Воротись, я сроднился с тобой!","Но для женщины прошлого нет.","Разлюбила — и стал ей чужой.","Что ж! Камин затоплю, буду пить.","Хорошо бы собаку купить.","За рекой луга зазеленели.","Веет легкой свежестью воды.","Веселей по рощам зазвенели.","Песни птиц на разные лады.","Ветерок с полей тепло приносит.","Горький дух лозины молодой.","О, весна! Как сердце счастья просит!","Как сладка печаль моя весной!","Кротко солнце листья пригревает.","И дорожки мягкие в саду.","Не пойму, что душу раскрывает.","И куда я медленно бреду!","Не пойму, кого с тоской люблю я.","Кто мне дорог… И не все ль равно?","Счастья жду я, мучась и тоскуя.","Но не верю в счастье уж давно!","Горько мне, что я бесплодно трачу.","Чистоту и нежность лучших дней.","Что один я радуюсь и плачу.","И не знаю, не люблю людей.","О счастье мы всегда лишь вспоминаем.","А счастье всюду. Может быть, оно.","Вот этот сад осенний за сараем.","И чистый воздух, льющийся в окно.","В бездонном небе легким белым краем.","Встает, сияет облако. Давно.","Слежу за ним… Мы мало видим, знаем,","А счастье только знающим дано.","Окно открыто. Пискнула и села.","На подоконник птичка. И от книг.","Усталый взгляд я отвожу на миг.","День вечереет, небо опустело.","Гул молотилки слышен на гумне.","Я вижу, слышу, счастлив. Все во мне.","Чем жарче день, тем сладостней в бору.","Дышать сухим смолистым ароматом.","И весело мне было поутру.","Бродить по этим солнечным палатам!","Повсюду блеск, повсюду яркий свет.","Песок — как шелк… Прильну к сосне корявой.","И чувствую: мне только десять лет.","А ствол — гигант, тяжелый, величавый.","Кора груба, морщиниста, красна.","Но так тепла, так солнцем вся прогрета!","И кажется, что пахнет не сосна.","А зной и сухость солнечного света.","Прекрасно в нас влюбленное вино.","И добрый хлеб, что в печь для нас садится.","И женщина, которою дано.","Сперва измучившись, нам насладиться.","Но что нам делать с розовой зарей.","Над холодеющими небесами.","Где тишина и неземной покой.","Что делать нам с бессмертными стихами?","Ни съесть, ни выпить, ни поцеловать.","Мгновение бежит неудержимо.","И мы ломаем руки, но опять.","Осуждены идти всё мимо, мимо.","Как мальчик, игры позабыв свои.","Следит порой за девичьим купаньем.","И, ничего не зная о любви.","Все ж мучится таинственным желаньем.","Как некогда в разросшихся хвощах.","Ревела от сознания бессилья.","Тварь скользкая, почуя на плечах.","Еще не появившиеся крылья.","Так век за веком — скоро ли, Господь?","Под скальпелем природы и искусства.","Кричит наш дух, изнемогает плоть.","Рождая орган для шестого чувства."],positions:["Резчик по камню","Дизайнер интерьера","Архитектор","Режиссер","Биохимик","Врач-кибернетик","Нейропсихолог","Web-дизайнер","Графический дизайнер","Артист кино","Актёр","Реаниматолог","Дизайнер","Хирург","Астроном","Археолог","Инженер-проектировщик","Сценарист","Фотожурналист","Градостроитель","Космонавт","Пожарный","Web-программист","Исследователь","Ветеринар","Спасатель","Инженер-конструктор","Медицинский технолог","Руководитель","Судебный эксперт","Авиационный инженер","Ландшафтный архитектор","Пилот","Science-художник","Специалист по системам безопасности","Художник-иллюстратор","Звукооператор","Программист-разработчик","Частный детектив","Судья","Продюсер","Дизайнер мебели","Следователь","Химик-технолог","Молекулярный биолог","Художник-живописец","Микробиолог","Ювелир","Архитектор-реставратор","Иллюстратор"],departments:["Технический отдел","Конструкторсое бюро","Механический цех","Инструментальный цех","Сборочный цех"],ruLetters:"АБВГДЕЖЗИКЛМНОПРСТУФХЦЧШЩЭЮЯ"};let j={account:{},contacts:[],dialogues:{},tasks:[],operations:[],materials:[],tools:[],help:{tableOfContent:null,content:{}}},E={Account:{read:function(e){let t={};if(e&&w.isEmpty(j.account)){let{login:r,password:n}=e;"user"!==r?t.login="Пользователя с таким именем не существует!":"user"!==n?t.password="Проверьте правильность ввода пароля!":j.account=M(0)}return _(j.account,t)},update:function(e){e?Object.assign(j.account,e):j.account={};return _(j.account)}},Contacts:{read:function(e){let{contacts:t}=j;if(!t.length){for(let e=0;e<20;e++)t[e]=R(e+1);t[0].unread=t[1].unread=!0}return j.messageCallback=e,_(t)}},Tasks:{create:function(e){let{length:t}=j.tasks;return e=w.toArray(e).map(((e,r)=>Object.assign({},e,{key:t+r,partName:z(x.partNames),created:e.created.getTime(),state:"todo",attachments:{}}))),j.tasks.push(...e),_(e)},delete:function(e){return j.tasks=j.tasks.filter((t=>!e.includes(t.key))),_(e)},read:function(){let{tasks:e}=j;if(!e.length)for(let t=0;t<1e3;t++)e[t]=S(t);return _(e)},update:function(e){return e.forEach((e=>{let t=j.tasks.findIndex((t=>t.key===e.key));-1!==t&&j.tasks.splice(t,1,e)})),_(e)}},Help:{read:function(e){let{help:t}=j;if(e){let{content:r}=t;return r[e]||(r[e]=function(e){let t=T(20,40),r=[];for(let e=0;e<t;e++)r[e]=z(x.comments);return{key:e,text:r,title:z(x.messages)}}(e)),_(r[e])}return t.tableOfContent||(t.tableOfContent=function(){let e,t=[];for(let r=0;r<60;r++){if(!(r%4)){let r=t.length;t.push({key:"group-"+r,text:"Раздел "+(r+1),items:e=[]})}e.push({key:"item-"+r,text:"Глава "+(r+1)})}return t}()),_(t.tableOfContent)}},Operations:{read:function(e){let{operations:t}=j,r=t[e];if(r){if(!r.length){let n=T(20,30);for(let e=0;e<n;e++)r[e]=A(e);t[e]=r}}else r=[];return _(r)}},Materials:{read:function(e){let{materials:t}=j,r=t[e];if(r){if(!r.length){let n=T(20,30);for(let e=0;e<n;e++)r[e]=I(e);t[e]=r}}else r=[];return _(r)}},Tools:{read:function(e){let{tools:t}=j,r=t[e];if(r){if(!r.length){let n=T(20,30);for(let e=0;e<n;e++)r[e]=F(e);t[e]=r}}else r=[];return _(r)}},Dialogues:{read:function(e){let{dialogues:t}=j;if(!Array.isArray(t[e])){let r=t[e],n=t[e]=[];for(let t=0;t<r.key;t++){let r={key:t,sended:T(new Date(P,0,1).getTime(),new Date(P,0,31).getTime()),text:z(x.messages)};D()?(r.from=0,r.to=e):(r.from=e,r.to=0),n[t]=r}n.push(r)}return _(t[e])}},Message:{create:function(e){let t=j.dialogues[e.to],r=j.contacts.find((t=>t.key===e.to));return e=Object.assign({},e,{key:t.length,sended:Date.now()}),t.push(e),r.active&&setTimeout((()=>{let t=j.dialogues[e.to],r={key:t.length,from:e.to,to:e.from,sended:Date.now(),text:z(x.messages)};t.push(r),j.messageCallback({message:r})}),2e3),_(e)}}},P=(new Date).getFullYear();function _(e,t){let r={};return void 0!==e&&(r.result=e),t&&!w.isEmpty(t)&&(r.errors=t),r}function z(e){return e[T(0,e.length-1)]}function D(e=.5){return!(Math.random()<e)}function R(e){let{dialogues:t}=j,r=M(e);return r.active=D(),r.message=t[e]={key:T(20,40),from:e,to:0,sended:T(new Date(P,0,1).getTime(),new Date(P,0,31).getTime()),text:z(x.messages)},r}function T(e,t){return Math.round(Math.random()*(t-e)+e)}function S(e){let t=new Date(P,0,1).getTime(),r=new Date(2022,0,1).getTime()-1,n={};return["drawing","assembly"].forEach((e=>{D(.2)&&(n[e]=T(0,9))})),D(.2)&&(n.operations=j.operations.push([])-1,["materials","tools"].forEach((e=>{D(.2)&&(n[e]=j[e].push([])-1)}))),{key:e,partId:z(x.partPrefixes)+"."+10*T(10,99)+10*T(10,99)+"."+T(100,999),partName:z(x.partNames),type:z(x.taskTypes),state:z(x.taskStates),comment:z(x.comments),created:T(t,r),attachments:n}}function M(e){let t=T(0,4);return{key:e,avatar:"static/avatar/"+e+".svg",name:{first:z(x.firstNames),middle:z(x.middleNames),last:z(x.lastNames)},department:{key:t+1,name:x.departments[t]},position:z(x.positions),age:T(20,70),mask:!0}}function A(e){let t=[],r=T(2,5);for(let e=0;e<r;e++)t[e]=F(e);let n=[],i=T(2,5);for(let e=0;e<i;e++)n[e]=I(e);let o=[],a=T(1,3);for(let e=0;e<a;e++)o[e]={key:e,text:z(x.comments)};return{key:e,tools:t,materials:n,items:o,id:T(1,100),name:z(x.operationNames),machine:{id:T(10,99)+z(x.ruLetters)+10*T(10,99),name:z(x.machineNames)}}}function I(e){let t=z(x.materialNames),r=z(x.materialShapes);return{key:e,name:t,shape:r,id:"00"+T(10,99)+".0"+T(100,999),grade:z(x.materialGrades[t]),size:z(x.materialSizes[r]),amount:T(1,10),unit:"кг"}}function F(e){return{key:e,id:10*T(1,9)+"."+T(10,99)+"."+T(100,999),name:z(x.toolNames),grade:z(x.toolGrades),count:T(1,5),unit:"шт"}}const N={fetch:function(e,t,r=500){return new Promise(((n,i)=>{let[o,a]=e.split(":"),l=E[o][a],{result:s,errors:p}=l(t);setTimeout((()=>{p?i(p):n(s)}),r)}))}};var q,V,K,Y;function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let L=(q=w.async(),V=w.async(),K=w.dispatch(),H(Y=class e{static prefix(){return"Account"}static defaults(){let e=localStorage.getItem("account");return e&&(e=JSON.parse(e)),e}static readAccount({values:t,complete:r,reject:n}){t||e.setAccount({account:w.loading}),N.fetch("Account:read",t).then((t=>{e.setAccount({account:t,save:!0}),r&&r()}),(e=>{n&&n({errors:e})}))}static updateAccount({values:t}){N.fetch("Account:update",t).then((t=>{e.setAccount({account:t,save:!0})}))}static setAccount({state:e,account:t,save:r}){return r&&localStorage.setItem("account",JSON.stringify(t)),e.set("account",t)}},"readAccount",[q],Object.getOwnPropertyDescriptor(Y,"readAccount"),Y),H(Y,"updateAccount",[V],Object.getOwnPropertyDescriptor(Y,"updateAccount"),Y),H(Y,"setAccount",[K],Object.getOwnPropertyDescriptor(Y,"setAccount"),Y),Y);var U,B,G,W,X,$,J,Z,Q,ee,te;function re(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ne=(U=w.dispatch(),B=w.dispatch(),G=w.dispatch(),W=w.dispatch(),X=w.dispatch(),$=w.dispatch(),J=w.dispatch(),Z=w.dispatch(),Q=w.dispatch(),ee=w.dispatch(),re(te=class e{static prefix(){return"App"}static defaults(){let t=localStorage.getItem("views"),r=localStorage.getItem("theme")||"blue";return t=t?JSON.parse(t):{all:"list",date:"grid",month:"calendar",year:"calendar"},e.setFavicon(r),{views:t,theme:r,collapsed:{left:"true"===localStorage.getItem("sidebar-collapsed"),right:"true"===localStorage.getItem("messenger-collapsed")},activeAttachment:localStorage.getItem("active-attachment")||"operations",pages:{list:0,grid:0,columns:{todo:0,doing:0,done:0}},addConfirm:!0,editConfirm:!0,removeConfirm:!0}}static setAddConfirm({state:e,confirm:t}){return e.setIn(["app","addConfirm"],t)}static setEditConfirm({state:e,confirm:t}){return e.setIn(["app","editConfirm"],t)}static setRemoveConfirm({state:e,confirm:t}){return e.setIn(["app","removeConfirm"],t)}static toggleSidebar({state:e}){let{left:t}=e.app.collapsed;return localStorage.setItem("sidebar-collapsed",!t),e.setIn(["app","collapsed","left"],!t)}static toggleMessenger({state:e}){let{right:t}=e.app.collapsed;return localStorage.setItem("messenger-collapsed",!t),e.setIn(["app","collapsed","right"],!t)}static setView({state:t,view:r}){let{range:n}=t.router,{views:i}=t.app;return i=i.set(n,r),localStorage.setItem("views",JSON.stringify(i)),t=t.setIn(["app","views"],i),t=w.getReducer("Tasks").pureSetSelectedTasks({state:t}),t=e.pureResetPages({state:t})}static setTheme({state:t,theme:r}){return localStorage.setItem("theme",r),e.setFavicon(r),t.setIn(["app","theme"],r)}static setActiveAttachment({state:e,activeAttachment:t}){return localStorage.setItem("active-attachment",t),e.setIn(["app","activeAttachment"],t)}static setPage({state:e,type:t,page:r}){return e.setIn(["app","pages",t],r)}static resetPages({state:e}){return e.setIn(["app","pages"],{list:0,grid:0,columns:{todo:0,doing:0,done:0}})}static setFavicon(e){this.favicon||(this.favicon=document.head.querySelector("link[rel=icon]")),this.favicon.href="static/favicon/"+e+".png"}},"setAddConfirm",[U],Object.getOwnPropertyDescriptor(te,"setAddConfirm"),te),re(te,"setEditConfirm",[B],Object.getOwnPropertyDescriptor(te,"setEditConfirm"),te),re(te,"setRemoveConfirm",[G],Object.getOwnPropertyDescriptor(te,"setRemoveConfirm"),te),re(te,"toggleSidebar",[W],Object.getOwnPropertyDescriptor(te,"toggleSidebar"),te),re(te,"toggleMessenger",[X],Object.getOwnPropertyDescriptor(te,"toggleMessenger"),te),re(te,"setView",[$],Object.getOwnPropertyDescriptor(te,"setView"),te),re(te,"setTheme",[J],Object.getOwnPropertyDescriptor(te,"setTheme"),te),re(te,"setActiveAttachment",[Z],Object.getOwnPropertyDescriptor(te,"setActiveAttachment"),te),re(te,"setPage",[Q],Object.getOwnPropertyDescriptor(te,"setPage"),te),re(te,"resetPages",[ee],Object.getOwnPropertyDescriptor(te,"resetPages"),te),te);var ie,oe,ae,le,se,pe,ce;function de(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ue=(ie=w.async(),oe=w.async(),ae=w.dispatch(),le=w.dispatch(),se=w.dispatch(),pe=w.dispatch(),de(ce=class e{static prefix(){return"Help"}static defaults(){return{activeItem:"item-0",content:{},tableOfContent:null,expandedItems:["group-0"]}}static readTableOfContent(){e.setTableOfContent({tableOfContent:w.loading}),N.fetch("Help:read").then((t=>e.setTableOfContent({tableOfContent:t})))}static readContent({activeItem:t}){e.setContent({activeItem:t,content:w.loading}),N.fetch("Help:read",t).then((r=>e.setContent({activeItem:t,content:r})))}static setContent({state:e,activeItem:t,content:r}){return e.setIn(["help","content",t],r)}static setTableOfContent({state:e,tableOfContent:t}){return e.setIn(["help","tableOfContent"],t)}static setExpandedItems({state:e,expandedItems:t}){return e.setIn(["help","expandedItems"],t)}static setActiveItem({state:e,activeItem:t}){return e.setIn(["help","activeItem"],t)}},"readTableOfContent",[ie],Object.getOwnPropertyDescriptor(ce,"readTableOfContent"),ce),de(ce,"readContent",[oe],Object.getOwnPropertyDescriptor(ce,"readContent"),ce),de(ce,"setContent",[ae],Object.getOwnPropertyDescriptor(ce,"setContent"),ce),de(ce,"setTableOfContent",[le],Object.getOwnPropertyDescriptor(ce,"setTableOfContent"),ce),de(ce,"setExpandedItems",[se],Object.getOwnPropertyDescriptor(ce,"setExpandedItems"),ce),de(ce,"setActiveItem",[pe],Object.getOwnPropertyDescriptor(ce,"setActiveItem"),ce),ce);var he,fe,me,ge;function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let be=(he=w.async(),fe=w.dispatch(),me=w.dispatch(),ye(ge=class e{static prefix(){return"Materials"}static defaults(){return{all:{},sort:{sort:"id",order:"asc"}}}static readMaterials({dataKey:t}){e.setMaterials({dataKey:t,materials:w.loading}),N.fetch("Materials:read",t).then((r=>e.setMaterials({dataKey:t,materials:r})))}static setMaterials({state:e,dataKey:t,materials:r}){return e.setIn(["materials","all",t],r)}static setSort({state:e,values:t}){return e.setIn(["materials","sort"],t)}},"readMaterials",[he],Object.getOwnPropertyDescriptor(ge,"readMaterials"),ge),ye(ge,"setMaterials",[fe],Object.getOwnPropertyDescriptor(ge,"setMaterials"),ge),ye(ge,"setSort",[me],Object.getOwnPropertyDescriptor(ge,"setSort"),ge),ge);var ve,Oe,Ce,ke,we,xe,je,Ee,Pe,_e,ze,De,Re,Te,Se,Me;function Ae(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Ie=(ve=w.async(),Oe=w.async(),Ce=w.async(),ke=w.dispatch(),we=w.dispatch(),xe=w.dispatch(),je=w.dispatch(),Ee=w.dispatch(),Pe=w.dispatch(),_e=w.dispatch(),ze=w.dispatch(),De=w.dispatch(),Re=w.dispatch(),Te=w.dispatch(),Se=w.memo((()=>[e=>e.messages.contacts])),Ae(Me=class e{static prefix(){return"Messages"}static defaults(){return{notifications:[],dialogues:{},drafts:{},activeDialogue:null,contacts:null,activeTab:"contacts",filter:"",sort:{sort:"lastName",order:"asc"},group:"department"}}static readContacts({state:t}){t.messages.contacts||(e.setContacts({contacts:w.loading}),N.fetch("Contacts:read",e.receiveMessage).then((t=>e.setContacts({contacts:t}))))}static readDialogue({key:t}){e.setDialogue({key:t,dialogue:w.loading}),N.fetch("Dialogues:read",t).then((r=>e.setDialogue({key:t,dialogue:r})))}static createMessage({message:t}){let r=Math.random()+"-"+Date.now();e.addMessage({message:Object.assign({},t,{key:r,sended:w.loading}),resetDraft:!0}),N.fetch("Message:create",t).then((t=>e.replaceMessage({message:t,key:r})))}static addMessage({state:e,message:t,resetDraft:r}){let{key:n}=e.account,{from:i,to:o}=t;n=n===i?o:i;let a=e.messages.dialogues[n];return Array.isArray(a)&&(e=e.setIn(["messages","dialogues",n],a.concat(t))),r&&(e=e.setIn(["messages","drafts",n],"")),e}static replaceMessage({state:e,key:t,message:r}){let{key:n}=e.account,{from:i,to:o}=r,a=n===i?o:i,l=e.messages.dialogues[a];return t||(t=r.key),e.setIn(["messages","dialogues",a],l.map((e=>e.key===t?r:e)))}static setContacts({state:e,contacts:t}){if(Array.isArray(t)){let{activeDialogue:r,activeTab:n}=e.messages,{right:i}=e.app.collapsed;i||"dialogue"!==n||(t=t.map((e=>e.unread&&e.key===r?Object.assign({},e,{unread:!1}):e)))}return e.setIn(["messages","contacts"],t)}static replaceContact({state:t,key:r,contact:n}){let{contacts:i}=t.messages;return r=void 0===r?n.key:r,i=i.map((e=>e.key===r?n:e)),e.pureSetContacts({state:t,contacts:i})}static receiveMessage({state:t,message:r}){let n=Object.assign({},t.messages.contacts.find((e=>e.key===r.from)),{unread:!0});return t=e.pureAddMessage({state:t,message:r}),t=e.pureReplaceContact({state:t,contact:n})}static setDialogue({state:e,key:t,dialogue:r}){return e.setIn(["messages","dialogues",t],r)}static setActiveTab({state:t,activeTab:r,contact:n}){let{right:i}=t.app.collapsed,o={activeTab:r};return i&&(t=w.getReducer("App").pureToggleMessenger({state:t})),"dialogue"===r&&n&&(o.activeDialogue=n.key,n.unread&&(n=Object.assign({},n,{unread:!1}),t=e.pureReplaceContact({state:t,contact:n}))),t.set("messages",t.messages.merge(o))}static setDraft({state:e,key:t,value:r}){return e.setIn(["messages","drafts",t],r)}static setFilter({state:e,value:t}){return e.setIn(["messages","filter"],t)}static setGroup({state:e,group:t}){return e.setIn(["messages","group"],t)}static setSort({state:e,sort:t}){return e.setIn(["messages","sort"],t)}static getNotifications(e){return Array.isArray(e)&&(e=e.filter((e=>e.unread))),e}},"readContacts",[ve],Object.getOwnPropertyDescriptor(Me,"readContacts"),Me),Ae(Me,"readDialogue",[Oe],Object.getOwnPropertyDescriptor(Me,"readDialogue"),Me),Ae(Me,"createMessage",[Ce],Object.getOwnPropertyDescriptor(Me,"createMessage"),Me),Ae(Me,"addMessage",[ke],Object.getOwnPropertyDescriptor(Me,"addMessage"),Me),Ae(Me,"replaceMessage",[we],Object.getOwnPropertyDescriptor(Me,"replaceMessage"),Me),Ae(Me,"setContacts",[xe],Object.getOwnPropertyDescriptor(Me,"setContacts"),Me),Ae(Me,"replaceContact",[je],Object.getOwnPropertyDescriptor(Me,"replaceContact"),Me),Ae(Me,"receiveMessage",[Ee],Object.getOwnPropertyDescriptor(Me,"receiveMessage"),Me),Ae(Me,"setDialogue",[Pe],Object.getOwnPropertyDescriptor(Me,"setDialogue"),Me),Ae(Me,"setActiveTab",[_e],Object.getOwnPropertyDescriptor(Me,"setActiveTab"),Me),Ae(Me,"setDraft",[ze],Object.getOwnPropertyDescriptor(Me,"setDraft"),Me),Ae(Me,"setFilter",[De],Object.getOwnPropertyDescriptor(Me,"setFilter"),Me),Ae(Me,"setGroup",[Re],Object.getOwnPropertyDescriptor(Me,"setGroup"),Me),Ae(Me,"setSort",[Te],Object.getOwnPropertyDescriptor(Me,"setSort"),Me),Ae(Me,"getNotifications",[Se],Object.getOwnPropertyDescriptor(Me,"getNotifications"),Me),Me);var Fe,Ne,qe;function Ve(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Ke=(Fe=w.async(),Ne=w.dispatch(),Ve(qe=class e{static prefix(){return"Operations"}static defaults(){return{all:{}}}static readOperations({dataKey:t}){e.setOperations({dataKey:t,operations:w.loading}),N.fetch("Operations:read",t).then((r=>e.setOperations({dataKey:t,operations:r})))}static setOperations({state:e,dataKey:t,operations:r}){return e.setIn(["operations","all",t],r)}},"readOperations",[Fe],Object.getOwnPropertyDescriptor(qe,"readOperations"),qe),Ve(qe,"setOperations",[Ne],Object.getOwnPropertyDescriptor(qe,"setOperations"),qe),qe);var Ye,He,Le;function Ue(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Be=(Ye=w.dispatch(),He=w.dispatch(),Ue(Le=class{static prefix(){return"Popups"}static defaults(){return[]}static openPopup({state:e,popup:t}){let{popups:r}=e,{key:n}=t;return r.find((e=>e.key===n))||(e=e.set("popups",r.concat(t))),e}static closePopup({state:e,popupKey:t}){let{popups:r}=e,n=r.filter((e=>e.key!==t));return r.length!==n.length&&(e=e.set("popups",n)),e}},"openPopup",[Ye],Object.getOwnPropertyDescriptor(Le,"openPopup"),Le),Ue(Le,"closePopup",[He],Object.getOwnPropertyDescriptor(Le,"closePopup"),Le),Le);var Ge,We,Xe;function $e(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Je=(Ge=w.dispatch(),We=w.dispatch(),$e(Xe=class e{static prefix(){return"Router"}static defaults(){return e.parsePath()}static parsePath(e=location.hash){let t={page:"not-found"};e||history.replaceState(null,null,location.pathname+(e="#"));let r=e.match(/^#(?:([0-9]{4})(?:-([0-9]{2})(?:-([0-9]{2}))?)?\/?)?$/);if(r){let e,n;switch(r=r.slice(1,4).filter((e=>e)),r.length){case 0:e="all";break;case 1:e="year";break;case 2:e="month";break;case 3:e="date"}n=new Date(r.join("-")||Date.now()),isNaN(n)||Object.assign(t,{page:"tasks",range:e,date:n})}return t}static setRange({state:t,range:r}){let{date:n}=t.router,i="";switch(r){case"date":i=w.formatDate(n,"Y-m-d");break;case"month":i=w.formatDate(n,"Y-m");break;case"year":i=w.formatDate(n,"Y")}return e.pureSetPath({state:t,path:i})}static setPath({state:t,path:r,silent:n}){return"#"!==r.charAt(0)&&(r="#"+r),n||history.pushState(r,null,location.pathname+r),t=(t=(t=t.set("router",e.parsePath(r))).setIn(["tasks","selected"],[])).setIn(["app","pages"],{list:0,grid:0,columns:{todo:0,doing:0,done:0}})}},"setRange",[Ge],Object.getOwnPropertyDescriptor(Xe,"setRange"),Xe),$e(Xe,"setPath",[We],Object.getOwnPropertyDescriptor(Xe,"setPath"),Xe),Xe);var Ze,Qe,et,tt,rt,nt,it,ot,at,lt,st,pt,ct;function dt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}window.onpopstate=()=>{Je.setPath({path:location.hash,silent:!0})};let ut=(Ze=w.async(),Qe=w.async(),et=w.async(),tt=w.async(),rt=w.dispatch(),nt=w.dispatch(),it=w.dispatch(),ot=w.dispatch(),at=w.dispatch(),lt=w.dispatch(),st=w.dispatch(),pt=w.memo((()=>[e=>e.tasks.all,e=>e.tasks.filter,e=>e.router.date,e=>e.router.range])),dt(ct=class e{static prefix(){return"Tasks"}static defaults(){return{all:null,selected:[],filter:{text:"",fields:["partId","partName","comment"],types:["create","update","destroy"],states:["todo","doing","done"],caseSensetive:!1},sort:{sort:"partId",order:"asc"}}}static readTasks({date:t}){e.setTasks({tasks:w.loading}),N.fetch("Tasks:read",t).then((t=>e.setTasks({tasks:t,sort:!0})))}static createTasks({values:t,complete:r}){N.fetch("Tasks:create",t).then((t=>{e.addTasks({tasks:t}),r()}))}static deleteTasks({tasks:t}){N.fetch("Tasks:delete",t).then((t=>e.removeTasks({tasks:t})))}static updateTasks({values:t,nextTask:r,complete:n}){e.replaceTasks({nextTask:r,tasks:t.map((e=>Object.assign({},e,{loading:!0})))}),N.fetch("Tasks:update",t).then((t=>{e.replaceTasks({tasks:t,nextTask:r}),n&&n()}))}static setTasks({state:e,tasks:t,sort:r}){return e=e.setIn(["tasks","all"],t),r&&(e=w.getReducer("Tasks").pureSetSort({state:e})),e}static addTasks({state:t,tasks:r}){let{all:n}=t.tasks;return t=(t=e.pureSetSelectedTasks({state:t})).setIn(["tasks","all"],r.concat(n))}static replaceTasks({state:t,tasks:r,nextTask:n}){let{all:i}=t.tasks;return n?(i=[].concat(i).filter((e=>!r.find((t=>t.key===e.key)))),-1===n?i.push(...r):i.splice(i.findIndex((e=>e.key===n.key)),0,...r)):i=i.map((e=>r.find((t=>t.key===e.key))||e)),t=t.setIn(["tasks","all"],i),t=e.pureSetSelectedTasks({state:t})}static removeTasks({state:t,tasks:r}){let{all:n}=t.tasks;return n=n.filter((e=>!r.includes(e.key))),t=t.setIn(["tasks","all"],n),t=e.pureSetSelectedTasks({state:t})}static setSelectedTasks({state:e,selected:t=[]}){return e.setIn(["tasks","selected"],t)}static setSort({state:e,values:t}){void 0===t&&(t=e.tasks.sort);let{sort:r,order:n}=t,{all:i}=e.tasks,o="asc"===n?1:-1;return i=[].concat(i).sort(((e,t)=>(e[r]>t[r]?1:e[r]<t[r]?-1:0)*o)),e=(e=e.setIn(["tasks","all"],i)).setIn(["tasks","sort"],t),e=w.getReducer("App").pureResetPages({state:e})}static setFilter({state:t,values:r}){return t=t.setIn(["tasks","filter"],r),t=e.pureSetSelectedTasks({state:t}),t=w.getReducer("App").pureResetPages({state:t})}static getFilteredTasks(e,t,r,n){if(Array.isArray(e)){let{types:i,states:o,text:a,fields:l,caseSensetive:s}=t;if(e=e.filter((e=>i.includes(e.type)&&o.includes(e.state))),a&&(a=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),s?"":"i"),e=e.filter((e=>{for(let t=0;t<l.length;t++)if(a.test(e[l[t]]))return!0;return!1}))),"all"!==n){let t,i,o=r.getFullYear(),a=r.getMonth(),l=r.getDate();switch(n){case"date":t=new Date(o,a,l),i=new Date(o,a,l+1);break;case"month":t=new Date(o,a,1),i=new Date(o,a+1,1);break;case"year":t=new Date(o,0,1),i=new Date(o+1,0,1)}e=e.filter((e=>e.created>=t&&e.created<i))}}return e}},"readTasks",[Ze],Object.getOwnPropertyDescriptor(ct,"readTasks"),ct),dt(ct,"createTasks",[Qe],Object.getOwnPropertyDescriptor(ct,"createTasks"),ct),dt(ct,"deleteTasks",[et],Object.getOwnPropertyDescriptor(ct,"deleteTasks"),ct),dt(ct,"updateTasks",[tt],Object.getOwnPropertyDescriptor(ct,"updateTasks"),ct),dt(ct,"setTasks",[rt],Object.getOwnPropertyDescriptor(ct,"setTasks"),ct),dt(ct,"addTasks",[nt],Object.getOwnPropertyDescriptor(ct,"addTasks"),ct),dt(ct,"replaceTasks",[it],Object.getOwnPropertyDescriptor(ct,"replaceTasks"),ct),dt(ct,"removeTasks",[ot],Object.getOwnPropertyDescriptor(ct,"removeTasks"),ct),dt(ct,"setSelectedTasks",[at],Object.getOwnPropertyDescriptor(ct,"setSelectedTasks"),ct),dt(ct,"setSort",[lt],Object.getOwnPropertyDescriptor(ct,"setSort"),ct),dt(ct,"setFilter",[st],Object.getOwnPropertyDescriptor(ct,"setFilter"),ct),dt(ct,"getFilteredTasks",[pt],Object.getOwnPropertyDescriptor(ct,"getFilteredTasks"),ct),ct);var ht,ft,mt,gt;function yt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let bt=(ht=w.async(),ft=w.dispatch(),mt=w.dispatch(),yt(gt=class e{static prefix(){return"Tools"}static defaults(){return{all:{},sort:{sort:"id",order:"asc"}}}static readTools({dataKey:t}){e.setTools({dataKey:t,tools:w.loading}),N.fetch("Tools:read",t).then((r=>e.setTools({dataKey:t,tools:r})))}static setTools({state:e,dataKey:t,tools:r}){return e.setIn(["tools","all",t],r)}static setSort({state:e,values:t}){return e.setIn(["tools","sort"],t)}},"readTools",[ht],Object.getOwnPropertyDescriptor(gt,"readTools"),gt),yt(gt,"setTools",[ft],Object.getOwnPropertyDescriptor(gt,"setTools"),gt),yt(gt,"setSort",[mt],Object.getOwnPropertyDescriptor(gt,"setSort"),gt),gt);var vt=r(6526),Ot=r.n(vt);let Ct=Object.create(Ot());Ct.taskTypes=Ct.oneOf(["create","update","destroy"]),Ct.taskStates=Ct.oneOf(["todo","doing","done"]),Ct.loading=function(e,t,r){if(e[t]!==w.loading)return new Error("Свойство "+t+" компонента "+r+" не равно Core.loading")},Ct.ref=Ct.oneOfType([Ct.func,Ct.shape({current:Ct.instanceOf(Element)})]),Ct.task=Ct.exact({key:Ct.number.isRequired,partId:Ct.string.isRequired,partName:Ct.string.isRequired,type:Ct.taskTypes.isRequired,state:Ct.taskStates.isRequired,comment:Ct.string,created:Ct.number.isRequired,loading:Ct.bool,attachments:Ct.exact({drawing:Ct.number,assembly:Ct.number,operations:Ct.number,materials:Ct.number,tools:Ct.number})}),Ct.message=Ct.exact({key:Ct.oneOfType([Ct.number,Ct.string]),from:Ct.number.isRequired,to:Ct.number.isRequired,sended:Ct.oneOfType([Ct.loading,Ct.number]),text:Ct.string.isRequired}),Ct.userName=Ct.exact({first:Ct.string,middle:Ct.string,last:Ct.string}),Ct.department=Ct.exact({key:Ct.number.isRequired,name:Ct.string}),Ct.user=Ct.exact({key:Ct.number.isRequired,avatar:Ct.string,name:Ct.userName.isRequired,department:Ct.department.isRequired,position:Ct.string.isRequired,age:Ct.number.isRequired,mask:Ct.bool}),Ct.contact=Ct.exact({key:Ct.number.isRequired,active:Ct.bool,unread:Ct.bool,avatar:Ct.string,name:Ct.userName.isRequired,department:Ct.department.isRequired,position:Ct.string.isRequired,age:Ct.number.isRequired,mask:Ct.bool,message:Ct.message}),Ct.contactGroup=Ct.oneOf(["none","alphabet","department","status"]),Ct.contactSort=Ct.exact({sort:Ct.oneOf(["sended","firstName","middleName","lastName","department"]),order:Ct.oneOf(["asc","desc"])}),Ct.material=Ct.exact({key:Ct.number.isRequired,name:Ct.string,shape:Ct.string,id:Ct.string,grade:Ct.string,size:Ct.string,amount:Ct.number,unit:Ct.string}),Ct.tool=Ct.exact({key:Ct.number.isRequired,id:Ct.string,name:Ct.string,grade:Ct.string,count:Ct.number,unit:Ct.string}),Ct.operation=Ct.shape({key:Ct.number.isRequired,tools:Ct.arrayOf(Ct.tool),materials:Ct.arrayOf(Ct.material),items:Ct.arrayOf(Ct.exact({key:Ct.number.isRequired,text:Ct.string})),id:Ct.number,machine:Ct.machine}),Ct.machine=Ct.exact({id:Ct.string,name:Ct.string}),Ct.theme=Ct.oneOf(["red","green","blue","purple"]);const kt=Ct;var wt,xt,jt;function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Pt=(wt=w.props({group:"own",include:["name","size"]}),xt=w.types({name:kt.string,size:kt.oneOf(["small","medium","large","2x","3x","4x","5x","6x","7x","8x","9x"])}),jt=class extends w.Component{renderComponent(){let{name:e,size:t}=this.own;return w.createElement("div",Et({},this.rest,{prefix:"icon",modifiers:{name:e,size:t}}))}},_t=jt.prototype,zt="renderComponent",Dt=[wt,xt],Rt=Object.getOwnPropertyDescriptor(jt.prototype,"renderComponent"),Tt=jt.prototype,St={},Object.keys(Rt).forEach((function(e){St[e]=Rt[e]})),St.enumerable=!!St.enumerable,St.configurable=!!St.configurable,("value"in St||St.initializer)&&(St.writable=!0),St=Dt.slice().reverse().reduce((function(e,t){return t(_t,zt,e)||e}),St),Tt&&void 0!==St.initializer&&(St.value=St.initializer?St.initializer.call(Tt):void 0,St.initializer=void 0),void 0===St.initializer&&(Object.defineProperty(_t,zt,St),St=null),jt);var _t,zt,Dt,Rt,Tt,St,Mt,At,It,Ft,Nt,qt,Vt,Kt,Yt,Ht;function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class Ut extends w.Component{renderComponent(){return w.createElement("div",Lt({},this.rest,{prefix:"loading-overlay"}),w.createElement(Pt,{prefix:"loading-overlay__icon",name:"loading",size:"large"}))}}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Gt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Wt=(Mt=w.props({group:"own",include:["itemKey","text","onClose"]}),At=w.state((()=>({inProp:!0}))),It=w.types({itemKey:kt.oneOfType([kt.string,kt.number]),text:kt.string,onClose:kt.func}),Ft=w.bind(),Nt=w.bind(),Gt((qt=class extends w.Component{renderComponent(){let{text:e}=this.own,{inProp:t}=this.state;return w.createElement(w.Transition,{in:t,timeout:{appear:0,exit:120},appear:!0,onExited:this.handleExited},(t=>w.createElement("div",{prefix:"snackbar__item",modifiers:{transition:t}},w.createElement("div",{prefix:"snackbar__text"},e),w.createElement(Pt,{prefix:"snackbar__close",name:"close",onClick:this.handleClose}))))}handleClose(){this.setState({inProp:!1})}handleExited(){let{itemKey:e}=this.own;this.fire("onClose",{itemKey:e})}}).prototype,"renderComponent",[Mt,At,It],Object.getOwnPropertyDescriptor(qt.prototype,"renderComponent"),qt.prototype),Gt(qt.prototype,"handleClose",[Ft],Object.getOwnPropertyDescriptor(qt.prototype,"handleClose"),qt.prototype),Gt(qt.prototype,"handleExited",[Nt],Object.getOwnPropertyDescriptor(qt.prototype,"handleExited"),qt.prototype),qt),Xt=(Vt=w.props({group:"own",include:"items"},{group:"item",include:"onClose"}),Kt=w.defaults({items:[]}),Yt=w.bind(),Gt((Ht=class extends w.Component{renderComponent(){let{items:e}=this.own;return w.createElement("div",Bt({},this.rest,{prefix:"snackbar"}),e.map(this.renderItem))}renderItem(e){let{key:t}=e;return w.createElement(Wt,Bt({},this.item,e,{itemKey:t}))}}).prototype,"renderComponent",[Vt,Kt],Object.getOwnPropertyDescriptor(Ht.prototype,"renderComponent"),Ht.prototype),Gt(Ht.prototype,"renderItem",[Yt],Object.getOwnPropertyDescriptor(Ht.prototype,"renderItem"),Ht.prototype),Ht);var $t,Jt,Zt,Qt,er,tr,rr,nr;function ir(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let or=($t=w.props({group:"own",include:["onDragStart","onDrag","onDragEnd"]}),Jt=w.innerRefs("root"),Zt=w.state((()=>({isDrag:!1}))),Qt=w.types({onDragStart:kt.func,onDrag:kt.func,onDragEnd:kt.func}),er=w.bind(),tr=w.bind(),rr=w.bind(),ir((nr=class extends w.Component{renderComponent(){let{children:e}=this.rest,{isDrag:t}=this.state,{rootRef:r}=this.innerRefs;if(e=e({innerRef:r,onMouseDown:this.handleMouseDown}),t){let{cursor:t}=this.dragProps;e=w.createElement(w.Fragment,null,e,w.createElement("div",{prefix:"draggable__overlay",style:{cursor:t}}))}return e}handleMouseDown(e){let{rootEl:t}=this.innerRefs,r=getComputedStyle(t).cursor;e.preventDefault(),addEventListener("mousemove",this.handleMouseMove),addEventListener("mouseup",this.handleMouseUp),this.dragProps={el:t,cursor:r,x:e.clientX,y:e.clientY,dx:0,dy:0},this.fire("onDragStart",this.dragProps),this.setState({isDrag:!0})}handleMouseMove(e){let{dragProps:t,innerRefs:r}=this,{rootEl:n}=r,{x:i,y:o}=t;t.el=n,t.dx=e.clientX-i,t.dy=e.clientY-o,this.fire("onDrag",this.dragProps)}handleMouseUp(){removeEventListener("mousemove",this.handleMouseMove),removeEventListener("mouseup",this.handleMouseUp),this.setState({isDrag:!1}),this.fire("onDragEnd",this.dragProps)}}).prototype,"renderComponent",[$t,Jt,Zt,Qt],Object.getOwnPropertyDescriptor(nr.prototype,"renderComponent"),nr.prototype),ir(nr.prototype,"handleMouseDown",[er],Object.getOwnPropertyDescriptor(nr.prototype,"handleMouseDown"),nr.prototype),ir(nr.prototype,"handleMouseMove",[tr],Object.getOwnPropertyDescriptor(nr.prototype,"handleMouseMove"),nr.prototype),ir(nr.prototype,"handleMouseUp",[rr],Object.getOwnPropertyDescriptor(nr.prototype,"handleMouseUp"),nr.prototype),nr);var ar,lr,sr,pr;function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let dr=(ar=w.props({group:"own",include:["disabled","mode","title","text"]},{group:"icon",include:"icon:name"}),lr=w.defaults({mode:"iconText",type:"button"}),sr=w.types({disabled:kt.bool,mode:kt.oneOf(["icon","text","iconText"]),text:kt.any}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((pr=class extends w.Component{renderComponent(){let{disabled:e,mode:t,title:r,text:n}=this.own,{name:i}=this.icon;return w.createElement("button",cr({},this.rest,{prefix:"button",modifiers:{disabled:e},title:r||"icon"===t&&n||null}),i&&"text"!==t&&w.createElement(Pt,cr({},this.icon,{prefix:"button__icon"})),n&&"icon"!==t&&w.createElement("div",{prefix:"button__text"},n))}}).prototype,"renderComponent",[ar,lr,sr],Object.getOwnPropertyDescriptor(pr.prototype,"renderComponent"),pr.prototype),pr);var ur,hr,fr,mr,gr;function yr(){return(yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function br(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let vr=(ur=w.props({group:"icon",include:"icon:name"},{group:"text",include:"text:children"}),hr=w.defaults({icon:"alert-box"}),fr=w.types({text:kt.node}),mr=w.bind(),br((gr=class extends w.Component{renderComponent(){return w.createElement(bn,yr({},this.rest,{prefix:"alert"}),this.renderChildren)}renderChildren({handleClose:e}){return w.createElement(w.Fragment,null,w.createElement("div",{prefix:"alert__body"},w.createElement(Pt,yr({},this.icon,{prefix:"alert__icon",size:"large"})),w.createElement("div",yr({},this.text,{prefix:"alert__text"}))),w.createElement("div",{prefix:"alert__footer"},w.createElement(dr,{prefix:"alert__ok-button",text:"OK",onClick:e})))}}).prototype,"renderComponent",[ur,hr,fr],Object.getOwnPropertyDescriptor(gr.prototype,"renderComponent"),gr.prototype),br(gr.prototype,"renderChildren",[mr],Object.getOwnPropertyDescriptor(gr.prototype,"renderChildren"),gr.prototype),gr);var Or,Cr,kr;function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let xr=(Or=w.props({group:"rest",include:["autoFocus","checked","name","placeholder","readOnly","rows","spellCheck","type","value"]}),Cr=w.types({autoFocus:kt.bool,checked:kt.bool,name:kt.string,placeholder:kt.string,rows:kt.number,type:kt.string,value:kt.any}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((kr=class extends w.Component{renderComponent(){return w.createElement("input",wr({},this.rest,{prefix:"input"}))}}).prototype,"renderComponent",[Or,Cr],Object.getOwnPropertyDescriptor(kr.prototype,"renderComponent"),kr.prototype),kr);var jr,Er,Pr,_r;function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Rr=(jr=w.props({group:"own",include:["disabled","label","value","onChange"]},{group:"input",component:xr}),Er=w.types({disabled:kt.bool,label:kt.string,value:kt.bool,onChange:kt.func}),Pr=w.bind(),Dr((_r=class extends w.Component{renderComponent(){let{disabled:e,label:t,value:r}=this.own;return w.createElement("label",zr({},this.rest,{prefix:"choice",modifiers:{disabled:e}}),w.createElement(xr,zr({},this.input,{prefix:"choice__input",checked:r,onChange:this.handleChange})),w.createElement("div",{prefix:"choice__label"},t&&w.createElement("div",{prefix:"choice__label-text"},t)))}handleChange(e){this.fire("onChange",{event:e,value:e.target.checked})}}).prototype,"renderComponent",[jr,Er],Object.getOwnPropertyDescriptor(_r.prototype,"renderComponent"),_r.prototype),Dr(_r.prototype,"handleChange",[Pr],Object.getOwnPropertyDescriptor(_r.prototype,"handleChange"),_r.prototype),_r);function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class Sr extends w.Component{renderComponent(){return w.createElement(Rr,Tr({},this.rest,{prefix:"checkbox",type:"checkbox"}))}}var Mr,Ar,Ir,Fr,Nr,qr,Vr,Kr,Yr,Hr;function Lr(){return(Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ur(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Br=(Mr=w.props({group:"own",include:["onConfirm","onReject","onCheckboxChange"]},{group:"icon",include:"icon:name"},{group:"text",include:"text:children"}),Ar=w.defaults({icon:"alert-box"}),Ir=w.state((()=>({doNotAskAgain:!1}))),Fr=w.types({text:kt.node,onConfirm:kt.func,onReject:kt.func,onCheckboxChange:kt.func}),Nr=w.bind(),qr=w.bind(),Vr=w.bind(),Kr=w.bind(),Yr=w.bind(),Ur((Hr=class extends w.Component{renderComponent(){return this.confirmed=!1,w.createElement(bn,Lr({},this.rest,{prefix:"confirm",onClose:this.handleClose}),this.renderChildren)}renderChildren({handleClose:e}){let{doNotAskAgain:t}=this.state;return this.closePopup=e,w.createElement(w.Fragment,null,w.createElement("div",{prefix:"confirm__body"},w.createElement(Pt,Lr({},this.icon,{prefix:"confirm__icon",size:"large"})),w.createElement("div",Lr({},this.text,{prefix:"confirm__text"}))),w.createElement("div",{prefix:"confirm__footer"},w.createElement(Sr,{prefix:"confirm__checkbox",label:"Больше не спрашивать",value:t,onChange:this.handleCheckboxChange}),w.createElement(dr,{prefix:"confirm__no-button",text:"Нет",onClick:this.handleNoClick}),w.createElement(dr,{prefix:"confirm__yes-button",text:"Да",onClick:this.handleYesClick})))}handleCheckboxChange(e){this.setState({doNotAskAgain:e.value}),this.fire("onCheckboxChange",e)}handleNoClick(){this.closePopup()}handleYesClick(){this.confirmed=!0,this.closePopup()}handleClose(){this.confirmed?this.fire("onConfirm"):this.fire("onReject")}}).prototype,"renderComponent",[Mr,Ar,Ir,Fr],Object.getOwnPropertyDescriptor(Hr.prototype,"renderComponent"),Hr.prototype),Ur(Hr.prototype,"renderChildren",[Nr],Object.getOwnPropertyDescriptor(Hr.prototype,"renderChildren"),Hr.prototype),Ur(Hr.prototype,"handleCheckboxChange",[qr],Object.getOwnPropertyDescriptor(Hr.prototype,"handleCheckboxChange"),Hr.prototype),Ur(Hr.prototype,"handleNoClick",[Vr],Object.getOwnPropertyDescriptor(Hr.prototype,"handleNoClick"),Hr.prototype),Ur(Hr.prototype,"handleYesClick",[Kr],Object.getOwnPropertyDescriptor(Hr.prototype,"handleYesClick"),Hr.prototype),Ur(Hr.prototype,"handleClose",[Yr],Object.getOwnPropertyDescriptor(Hr.prototype,"handleClose"),Hr.prototype),Hr);var Gr,Wr;function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let $r={alert:vr,confirm:Br},Jr=(Gr=w.props({group:"own",include:["popups","onOpen","onClose"]}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Wr=class e extends w.Component{static open(t){let{instance:r}=e,{type:n}=t;if(n){let e=$r[n];delete t.type,e&&(t.component=e)}r.fire("onOpen",{popup:t})}static close(t){let{instance:r}=e;r.fire("onClose",{popupKey:t})}renderComponent(){let{popups:t}=this.own,{length:r}=t;return e.instance||(e.instance=this),r?(t=t.map(((e,t)=>{let{component:n=bn,...i}=e,{key:o}=i;return w.createElement(n,Xr({},i,{popupKey:o,transparent:t+1!==r}))})),w.createPortal(w.createElement(w.Fragment,null,t),document.querySelector(".viewport")||document.body)):null}}).prototype,"renderComponent",[Gr],Object.getOwnPropertyDescriptor(Wr.prototype,"renderComponent"),Wr.prototype),Wr);var Zr,Qr,en,tn,rn,nn,on,an,ln,sn,pn,cn,dn,un,hn;function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let gn={none:[],horizontal:["left","right"],vertical:["top","bottom"],all:["left","right","top","bottom"]},yn={left:["width","dx",-1],right:["width","dx",1],top:["height","dy",-1],bottom:["height","dy",1]},bn=(Zr=w.pure(!1),Qr=w.props({group:"own",include:["closable","transparent","popupKey","resize","title","onClose","onResize"]}),en=w.defaults({closable:!0}),tn=w.statics({Manager:Jr,open:Jr.open,close:Jr.close}),rn=w.innerRefs("root","overlay"),nn=w.state((()=>({inProp:!0}))),on=w.types({closable:kt.bool,transparent:kt.bool,popupKey:kt.string,resize:kt.oneOfType([kt.oneOf(["none","horizontal","vertical","all"]),kt.arrayOf(kt.oneOf(["left","right","top","bottom"]))]),title:kt.node,onClose:kt.func,onResize:kt.func}),an=w.bind(),ln=w.bind(),sn=w.bind(),pn=w.bind(),cn=w.bind(),dn=w.bind(),un=w.bind(),mn((hn=class extends w.Component{renderComponent(){let{inProp:e}=this.state;return w.createElement(w.Transition,{in:e,timeout:120,appear:!0,mountOnEnter:!0,unmountOnExit:!0,onExited:this.handleExited},this.renderPopup)}renderPopup(e){let{closable:t,transparent:r,resize:n,title:i}=this.own,{children:o}=this.rest,{overlayRef:a,rootRef:l}=this.innerRefs,s={};if(n){if(!this.rect){let{popupKey:e}=this.own,[t,r]=(localStorage.getItem(e+":rect")||"-:-").split(":").map((e=>"-"===e?void 0:+e));this.rect={width:t,height:r}}let{width:e,height:t}=this.rect;void 0!==e&&(s.width=e+"px"),void 0!==t&&(s.height=t+"px")}return"function"==typeof o&&(o=o({handleClose:this.handleClose})),w.createElement("div",{prefix:"popup__overlay",modifiers:{transparent:r},innerRef:a,onMouseDown:this.handleMouseDown},w.createElement("div",fn({},this.rest,{prefix:"popup",modifiers:{transition:e},innerRef:l,style:s}),w.createElement("div",{prefix:"popup__header"},w.createElement("div",{prefix:"popup__title"},i),t&&w.createElement(Pt,{prefix:"popup__close-button",name:"window-close",onClick:this.handleClose})),w.createElement("div",{prefix:"popup__body"},o),n&&this.renderResizeHandles()))}renderResizeHandles(){let{resize:e}=this.own;return"string"==typeof e&&(e=gn[e]),w.createElement(w.Fragment,null,e.map((e=>w.createElement(or,{key:e,onDragStart:this.handleResizeStart,onDrag:this.handleResize,onDragEnd:this.handleResizeEnd},(t=>w.createElement("div",fn({},t,{prefix:"popup__resize",modifiers:{[e]:!0},"data-key":e})))))))}handleClose(){this.fire("onClose"),this.setState({inProp:!1})}handleResizeStart(e){let{key:t}=e.el.dataset,{rootEl:r}=this.innerRefs,{width:n,height:i}=r.getBoundingClientRect();Object.assign(e,{key:t,width:n,height:i})}handleResize(e){let[t,r,n]=yn[e.key],i=this.rect[t]=e[t]+e[r]*n*2;this.innerRefs.rootEl.style[t]=i+"px",this.fire("onResize",e)}handleResizeEnd(){let{width:e,height:t}=this.rect,{popupKey:r}=this.own;localStorage.setItem(r+":rect",(void 0===e?"-":e.toString())+":"+(void 0===t?"-":t.toString()))}handleExited(){let{popupKey:e}=this.own;Jr.close(e)}handleMouseDown(e){let{target:t}=e,{overlayEl:r}=this.innerRefs,{closable:n}=this.own;n&&t===r&&this.handleClose()}}).prototype,"renderComponent",[Zr,Qr,en,tn,rn,nn,on],Object.getOwnPropertyDescriptor(hn.prototype,"renderComponent"),hn.prototype),mn(hn.prototype,"renderPopup",[an],Object.getOwnPropertyDescriptor(hn.prototype,"renderPopup"),hn.prototype),mn(hn.prototype,"handleClose",[ln],Object.getOwnPropertyDescriptor(hn.prototype,"handleClose"),hn.prototype),mn(hn.prototype,"handleResizeStart",[sn],Object.getOwnPropertyDescriptor(hn.prototype,"handleResizeStart"),hn.prototype),mn(hn.prototype,"handleResize",[pn],Object.getOwnPropertyDescriptor(hn.prototype,"handleResize"),hn.prototype),mn(hn.prototype,"handleResizeEnd",[cn],Object.getOwnPropertyDescriptor(hn.prototype,"handleResizeEnd"),hn.prototype),mn(hn.prototype,"handleExited",[dn],Object.getOwnPropertyDescriptor(hn.prototype,"handleExited"),hn.prototype),mn(hn.prototype,"handleMouseDown",[un],Object.getOwnPropertyDescriptor(hn.prototype,"handleMouseDown"),hn.prototype),hn);var vn,On,Cn,kn,wn,xn;function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function En(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Pn=(vn=w.props({group:"own",include:["disabled","itemComponent","items","least","orientation","value","onChange"]}),On=w.defaults({items:[],value:[],least:0}),Cn=w.types({disabled:kt.bool,itemComponent:kt.elementType,items:kt.any,least:kt.number,orientation:kt.oneOf(["horizontal","vertical"]),value:kt.any,onChange:kt.func}),kn=w.bind(),wn=w.bind(),En((xn=class extends w.Component{renderComponent(){let{own:e}=this,{disabled:t,orientation:r,items:n}=e;return e.value=w.toArray(e.value),w.createElement("div",jn({},this.rest,{prefix:"choice-group",modifiers:{disabled:t,orientation:r}}),w.toArray(n).map(this.renderItem))}renderItem(e){let{itemComponent:t,disabled:r,least:n,value:i}=this.own,{disabled:o,key:a}=e,l=i.includes(a);return r||(o=o||l&&i.length<=n),w.createElement(t,jn({},e,{disabled:o,value:l,name:a,onChange:this.handleChange}))}handleChange(e){let{event:t,value:r}=e,{name:n}=t.target;this.fire("onChange",{event:t,name:n,value:r})}}).prototype,"renderComponent",[vn,On,Cn],Object.getOwnPropertyDescriptor(xn.prototype,"renderComponent"),xn.prototype),En(xn.prototype,"renderItem",[kn],Object.getOwnPropertyDescriptor(xn.prototype,"renderItem"),xn.prototype),En(xn.prototype,"handleChange",[wn],Object.getOwnPropertyDescriptor(xn.prototype,"handleChange"),xn.prototype),xn);var _n,zn,Dn,Rn;function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Mn=(_n=w.props({group:"own",include:"onChange"}),zn=w.types({onChange:kt.func}),Dn=w.bind(),Sn((Rn=class extends w.Component{renderComponent(){return w.createElement(Pn,Tn({},this.rest,{prefix:"checkbox-group",itemComponent:Sr,onChange:this.handleChange}))}handleChange(e){let{value:t}=this.rest;t=e.value?t.concat([e.name]):t.filter((t=>t!==e.name)),this.fire("onChange",{event,value:t})}}).prototype,"renderComponent",[_n,zn],Object.getOwnPropertyDescriptor(Rn.prototype,"renderComponent"),Rn.prototype),Sn(Rn.prototype,"handleChange",[Dn],Object.getOwnPropertyDescriptor(Rn.prototype,"handleChange"),Rn.prototype),Rn);var An,In,Fn,Nn,qn,Vn,Kn,Yn,Hn,Ln,Un,Bn,Gn;function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let $n={"left-start":[0,0,1,0],"left-center":[0,.5,1,.5],"left-end":[0,1,1,1],"right-start":[1,0,0,0],"right-center":[1,.5,0,.5],"right-end":[1,1,0,1],"top-start":[0,0,0,1],"top-center":[.5,0,.5,1],"top-end":[1,0,1,1],"bottom-start":[0,1,0,0],"bottom-center":[.5,1,.5,0],"bottom-end":[1,1,1,0]},Jn=(An=w.props({group:"own",include:["offset","offsetX","offsetY","position","trigger","fit","onRequestClose"]}),In=w.defaults({offset:0,position:"bottom-start"}),Fn=w.innerRefs("trigger","popover"),Nn=w.statics({popover:null}),qn=w.state((()=>({isVisible:!1}))),Vn=w.types({position:kt.oneOf(Object.keys($n)),trigger:kt.func,fit:kt.oneOfType([kt.oneOf(["trigger"]),kt.ref]),onRequestClose:kt.func}),Kn=w.bind(),Yn=w.bind(),Hn=w.bind(),Ln=w.bind(),Un=w.bind(),Bn=w.bind(),Xn((Gn=class extends w.Component{renderComponent(){let{trigger:e}=this.own,{triggerRef:t,popoverRef:r}=this.innerRefs,{isVisible:n}=this.state;return w.createElement(w.Fragment,null,e({"data-popover-trigger":!0,innerRef:t,onClick:this.handleToggle}),w.createElement(w.Transition,{in:n,timeout:120,mountOnEnter:!0,unmountOnExit:!0},(e=>w.createPortal(w.createElement("div",Wn({},this.rest,{prefix:"popover",modifiers:{transition:e},innerRef:r,"data-popover-popup":!0,onClick:this.handleClick})),document.querySelector(".viewport")||document.body))))}handleShow(){this.handleHide(),this.constructor.popover=this,this.setState({isVisible:!0})}handleHide(){let{constructor:e}=this,{popover:t}=e;t&&(t.setState({isVisible:!1}),e.popover=null)}handleToggle(){let{popover:e}=this.constructor;e===this?this.handleHide():this.handleShow()}handleAfterRender(){if(!this.state.isVisible)return;let e,t,{fit:r,position:n,offset:i,offsetX:o,offsetY:a}=this.own,{triggerEl:l,popoverEl:s}=this.innerRefs,p=s.getBoundingClientRect(),c=l.getBoundingClientRect(),{width:d,height:u}=p,[h,f,m,g]=$n[n];if("number"!=typeof o&&(o=i),"number"!=typeof a&&(a=i),r){let e="trigger"===r?c:r.current.getBoundingClientRect();d<e.width&&(d=e.width-2)}e=c.left+c.width*h-d*m+1,t=c.top+c.height*f-u*g+a;let{clientWidth:y}=document.body;e+d>y?e=e-d+c.width-o:e+=o,Object.assign(s.style,{left:e+"px",top:t+"px",width:d+"px",height:u+"px"})}handleBeforeUnmount(){let{constructor:e}=this;e.popover===this&&(e.popover=null)}handleClick(e){this.fire("onRequestClose",e)&&this.handleHide()}}).prototype,"renderComponent",[An,In,Fn,Nn,qn,Vn],Object.getOwnPropertyDescriptor(Gn.prototype,"renderComponent"),Gn.prototype),Xn(Gn.prototype,"handleShow",[Kn],Object.getOwnPropertyDescriptor(Gn.prototype,"handleShow"),Gn.prototype),Xn(Gn.prototype,"handleHide",[Yn],Object.getOwnPropertyDescriptor(Gn.prototype,"handleHide"),Gn.prototype),Xn(Gn.prototype,"handleToggle",[Hn],Object.getOwnPropertyDescriptor(Gn.prototype,"handleToggle"),Gn.prototype),Xn(Gn.prototype,"handleAfterRender",[Ln],Object.getOwnPropertyDescriptor(Gn.prototype,"handleAfterRender"),Gn.prototype),Xn(Gn.prototype,"handleBeforeUnmount",[Un],Object.getOwnPropertyDescriptor(Gn.prototype,"handleBeforeUnmount"),Gn.prototype),Xn(Gn.prototype,"handleClick",[Bn],Object.getOwnPropertyDescriptor(Gn.prototype,"handleClick"),Gn.prototype),Gn);var Zn,Qn,ei,ti,ri;function ni(){return(ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ii(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}addEventListener("mousedown",(e=>{let{target:t}=e;for(;t&&t!==document.documentElement;){let{popoverTrigger:e,popoverPopup:r}=t.dataset;if(e||r)return;t=t.parentNode}Jn.prototype.handleHide()})),addEventListener("mousewheel",(e=>{let{target:t}=e;for(;t!==document.documentElement;){let{popoverPopup:e}=t.dataset;if(e)return;t=t.parentNode}Jn.prototype.handleHide()})),addEventListener("resize",(()=>{Jn.prototype.handleHide()}));let oi=(Zn=w.props({group:"own",include:["arrow","children"]},{group:"popover",prefix:"popover",component:Jn}),Qn=w.defaults({arrow:"bottom",popoverFit:"trigger"}),ei=w.types({arrow:kt.oneOfType([kt.oneOf(["left","right","top","bottom"]),kt.bool])}),ti=w.bind(),ii((ri=class extends w.Component{renderComponent(){let{children:e}=this.own;return w.createElement(Jn,ni({},this.popover,{prefix:"dropdown__popover",trigger:this.renderTrigger}),e)}renderTrigger(e){let{arrow:t}=this.own;return w.createElement(dr,ni({},this.rest,e,{prefix:"dropdown",modifiers:{arrow:t}}))}}).prototype,"renderComponent",[Zn,Qn,ei],Object.getOwnPropertyDescriptor(ri.prototype,"renderComponent"),ri.prototype),ii(ri.prototype,"renderTrigger",[ti],Object.getOwnPropertyDescriptor(ri.prototype,"renderTrigger"),ri.prototype),ri);var ai,li,si,pi,ci,di,ui,hi;function fi(){return(fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mi(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let gi=(ai=w.props({group:"own",include:["disabled","items","mode","orientation","submenuPrefix","value","onChange","onRequestClose"]}),li=w.defaults({items:[]}),si=w.types({disabled:kt.bool,items:kt.array,mode:kt.oneOf(["icon","text","iconText"]),orientation:kt.oneOf(["horizontal","vertical"]),submenuPrefix:kt.string,value:kt.any}),pi=w.bind(),ci=w.bind(),di=w.bind(),ui=w.bind(),mi((hi=class e extends w.Component{renderComponent(){let{own:e}=this,{disabled:t,items:r,orientation:n}=e;return e.value=w.toArray(e.value),w.createElement("div",fi({},this.rest,{prefix:"menu",modifiers:{disabled:t,orientation:n}}),r.map(this.renderItem))}renderItem(t,r){if(!t)return;let{as:n,items:i,inline:o,submenuMode:a,...l}=t,{key:s}=l,{mode:p,value:c,orientation:d,submenuPrefix:u}=this.own,h=!this.own.disabled&&c.includes(s);if(s||(s=l.key=r),"-"===n)return w.createElement("div",fi({},l,{prefix:"menu__separator"}));if("|"===n)return w.createElement("div",fi({},l,{prefix:"menu__divider"}));if(n)return w.createElement(n,l);if(o)return w.createElement(e,fi({},l,{items:i,disabled:this.own.disabled,orientation:d,value:c,onChange:this.handleMenuChange}));if(i){let t={};return"horizontal"!==d&&(t.popoverPosition="right-start",t.arrow="right"),w.createElement(oi,fi({},l,t,{prefix:"menu__item",disabled:h,onPopoverRequestClose:this.handleRequestClose,mode:p}),w.createElement(e,{prefix:"menu__submenu"+(u?" "+u:""),items:i,value:c,mode:a,onChange:this.handleMenuChange}))}return w.createElement(dr,fi({},l,{prefix:"menu__item",disabled:h,"data-value":s,onClick:this.handleItemClick,mode:p}))}handleItemClick(e){let{value:t}=e.currentTarget.dataset;this.fire("onChange",{event:e,value:t})}handleMenuChange(e){this.requestClose=!0,this.fire("onChange",e)}handleRequestClose(e){if(this.requestClose||this.fire("onRequestClose",e))return this.requestClose=!1,!0}}).prototype,"renderComponent",[ai,li,si],Object.getOwnPropertyDescriptor(hi.prototype,"renderComponent"),hi.prototype),mi(hi.prototype,"renderItem",[pi],Object.getOwnPropertyDescriptor(hi.prototype,"renderItem"),hi.prototype),mi(hi.prototype,"handleItemClick",[ci],Object.getOwnPropertyDescriptor(hi.prototype,"handleItemClick"),hi.prototype),mi(hi.prototype,"handleMenuChange",[di],Object.getOwnPropertyDescriptor(hi.prototype,"handleMenuChange"),hi.prototype),mi(hi.prototype,"handleRequestClose",[ui],Object.getOwnPropertyDescriptor(hi.prototype,"handleRequestClose"),hi.prototype),hi);var yi,bi,vi,Oi,Ci,ki,wi;function xi(){return(xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ji(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Ei={date:0,month:1,year:2},Pi=(yi=w.props({group:"own",include:["dayNames","firstDay","mode","monthNames","value","onChange"]}),bi=w.defaults({value:new Date,mode:"date",firstDay:1,dayNames:w.locale.dayNames,monthNames:w.locale.monthNames}),vi=w.state((e=>({displayValue:new Date(e.value),activeItem:0}))),Oi=w.types({dayNames:kt.array,firstDay:kt.number,mode:kt.oneOf(["date","month","year"]),monthNames:kt.array,value:kt.instanceOf(Date),onChange:kt.func}),Ci=w.bind(),ki=w.bind(),ji((wi=class extends w.Component{renderComponent(){let{value:e}=this.own,t=new Date,r=this.state.displayValue.getFullYear(),n=r-r%20;return Object.assign(this.own,{nowValue:{year:t.getFullYear(),month:t.getMonth(),date:t.getDate()},selectedValue:{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()},yearRange:{from:n,to:n+19}}),w.createElement("div",xi({},this.rest,{prefix:"date-picker"}),this.renderHeader(),w.createElement("div",{prefix:"date-picker__body",onClick:this.handleBodyClick},this.renderBody()))}renderHeader(){let e,{monthNames:t,yearRange:r,mode:n}=this.own,{displayValue:i,activeItem:o}=this.state;switch(o+Ei[n]){case 0:e=t[i.getMonth()]+" "+i.getFullYear();break;case 1:e=i.getFullYear();break;case 2:e=r.from+"-"+r.to}let a=[{key:"prev",icon:"chevron-left"},{key:"title",text:e},{key:"next",icon:"chevron-right"}];return w.createElement(gi,{prefix:"date-picker__header",orientation:"horizontal",items:a,onChange:this.handleHeaderClick})}renderBody(){let{mode:e}=this.own,{activeItem:t}=this.state;switch(t+Ei[e]){case 0:return this.renderDatePanel();case 1:return this.renderMonthPanel();case 2:return this.renderYearPanel()}}renderDatePanel(){let e,{firstDay:t,dayNames:r,nowValue:n,selectedValue:i}=this.own,{displayValue:o}=this.state,a=new Date(o.getFullYear(),o.getMonth(),1),l=o.getMonth(),s=-a.getDay()+t+1,p=[],c=[];a.setDate(s>1?s-7:s);for(let e=0;e<7;e++)p[e]=w.createElement("div",{prefix:"date-picker__date-column",key:e},r[(e+t)%7]);for(let t=0;t<6;t++){c[t]=w.createElement("div",{prefix:"date-picker__date-row",key:t},e=[]);for(let t=0;t<7;t++){let r=a.getDate(),o=a.getMonth(),s=a.getFullYear(),p=a.getTime();e[t]=w.createElement("div",{prefix:"date-picker__date-cell",modifiers:{other:o!==l,now:r===n.date&&o===n.month&&s===n.year,selected:r===i.date&&o===i.month&&s===i.year},key:t,"data-key":"d:"+p},r),a.setDate(r+1)}}return w.createElement("div",{prefix:"date-picker__date-panel"},w.createElement("div",{prefix:"date-picker__date-header"},p),w.createElement("div",{prefix:"date-picker__date-body"},c))}renderMonthPanel(){let e,{monthNames:t,nowValue:r,selectedValue:n}=this.own,i=this.state.displayValue.getFullYear(),o=[];for(let a=0;a<12;a++){let l=a%6;l||o.push(w.createElement("div",{prefix:"date-picker__month-column",key:o.length},e=[])),e[l]=w.createElement("div",{prefix:"date-picker__month-cell",modifiers:{now:r.month===a&&r.year===i,selected:n.month===a&&n.year===i},key:a,"data-key":"m:"+a},t[a])}return w.createElement("div",{prefix:"date-picker__month-panel"},o)}renderYearPanel(){let e,{yearRange:t,nowValue:r,selectedValue:n}=this.own,i=t.from-2,o=[];for(let a=0;a<4;a++){o[a]=w.createElement("div",{prefix:"date-picker__year-column",key:a},e=[]);for(let o=0;o<6;o++)e[o]=w.createElement("div",{prefix:"date-picker__year-cell",modifiers:{other:i<t.from||i>t.to,now:i===r.year,selected:i===n.year},key:i,"data-key":"y:"+i},i),i++}return w.createElement("div",{prefix:"date-picker__year-panel"},o)}handleHeaderClick({value:e}){if("title"===e){let{mode:e}=this.own,{activeItem:t}=this.state;this.setState({activeItem:(t+1)%(3-Ei[e])})}else{let{mode:t}=this.own,{activeItem:r,displayValue:n}=this.state,i="prev"===e?-1:1;switch(n=new Date(n),r+Ei[t]){case 0:n.setMonth(n.getMonth()+i);break;case 1:n.setFullYear(n.getFullYear()+i);break;case 2:n.setFullYear(n.getFullYear()+20*i)}this.setState({displayValue:n})}}handleBodyClick(e){let{key:t}=e.target.dataset;if(t){let[r,n]=t.split(":"),{displayValue:i,activeItem:o}=this.state,a=new Date(i);switch(r){case"d":a.setTime(+n);break;case"m":a.setMonth(+n);break;case"y":a.setFullYear(+n)}o>0?this.setState({displayValue:a,activeItem:o-1}):this.fire("onChange",{event:e,value:a})}}}).prototype,"renderComponent",[yi,bi,vi,Oi],Object.getOwnPropertyDescriptor(wi.prototype,"renderComponent"),wi.prototype),ji(wi.prototype,"handleHeaderClick",[Ci],Object.getOwnPropertyDescriptor(wi.prototype,"handleHeaderClick"),wi.prototype),ji(wi.prototype,"handleBodyClick",[ki],Object.getOwnPropertyDescriptor(wi.prototype,"handleBodyClick"),wi.prototype),wi);var _i,zi,Di,Ri,Ti,Si,Mi,Ai,Ii,Fi;function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qi(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Vi=(_i=w.props({group:"own",include:["trigger","data"]}),zi=w.innerRefs("trigger","tooltip"),Di=w.state((()=>({isShow:!1}))),Ri=w.types({trigger:kt.func,data:kt.any}),Ti=w.bind(),Si=w.bind(),Mi=w.bind(),Ai=w.bind(),Ii=w.bind(),qi((Fi=class extends w.Component{renderComponent(){let{children:e}=this.rest,{trigger:t,data:r}=this.own,{triggerRef:n,tooltipRef:i}=this.innerRefs,{isShow:o}=this.state;return t=t({innerRef:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}),w.createElement(w.Fragment,null,t,o&&w.createPortal(w.createElement("div",Ni({},this.rest,{prefix:"tooltip",innerRef:i}),"function"==typeof e?e({data:r}):e),document.body))}handleMouseEnter(e){this.pointer={sx:e.clientX,sy:e.clientY},this.setTimeout()}handleMouseLeave(){this.clearTimeout()}handleMouseMove(e){if(this.pointer){let{clientX:t,clientY:r}=e,{pointer:n}=this;Math.sqrt(Math.pow(t-n.sx,2)+Math.pow(r-n.sy,2))>10&&(clearTimeout(this.timeout),this.state.isShow?this.clearTimeout():(this.setTimeout(),n.sx=t,n.sy=r)),n.x=t,n.y=r}}handleAfterRender(){let{isShow:e}=this.state;if(e){let{pointer:e}=this,{tooltipRef:t}=this.innerRefs;Object.assign(t.current.style,{left:e.x+12+"px",top:e.y+22+"px"})}}handleBeforeUnmount(){this.clearTimeout()}setTimeout(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.setState({isShow:!0})}),600)}clearTimeout(){this.timeout&&clearTimeout(this.timeout),this.state.isShow&&this.setState({isShow:!1})}}).prototype,"renderComponent",[_i,zi,Di,Ri],Object.getOwnPropertyDescriptor(Fi.prototype,"renderComponent"),Fi.prototype),qi(Fi.prototype,"handleMouseEnter",[Ti],Object.getOwnPropertyDescriptor(Fi.prototype,"handleMouseEnter"),Fi.prototype),qi(Fi.prototype,"handleMouseLeave",[Si],Object.getOwnPropertyDescriptor(Fi.prototype,"handleMouseLeave"),Fi.prototype),qi(Fi.prototype,"handleMouseMove",[Mi],Object.getOwnPropertyDescriptor(Fi.prototype,"handleMouseMove"),Fi.prototype),qi(Fi.prototype,"handleAfterRender",[Ai],Object.getOwnPropertyDescriptor(Fi.prototype,"handleAfterRender"),Fi.prototype),qi(Fi.prototype,"handleBeforeUnmount",[Ii],Object.getOwnPropertyDescriptor(Fi.prototype,"handleBeforeUnmount"),Fi.prototype),Fi);var Ki,Yi,Hi,Li,Ui,Bi,Gi;function Wi(){return(Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xi(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let $i=(Ki=w.props({group:"own",include:["disabled","error","multiline","onChange"]},{group:"input",component:xr}),Yi=w.innerRefs("input"),Hi=w.types({disabled:kt.bool,error:kt.string,multiline:kt.bool,onChange:kt.func}),Li=w.bind(),Ui=w.bind(),Bi=w.bind(),Xi((Gi=class extends w.Component{renderComponent(){let{inputRef:e}=this.innerRefs,{disabled:t,error:r,multiline:n}=this.own,i=n?"textarea":xr;return w.createElement("div",Wi({},this.rest,{prefix:"text-field",modifiers:{disabled:t}}),w.createElement(i,Wi({},this.input,{prefix:"text-field__input",modifiers:{error:!!r,multiline:n},innerRef:e,onChange:this.handleChange})),r&&w.createElement(Vi,{trigger:this.renderError,data:r},this.renderTooltip))}renderError(e){return w.createElement(Pt,Wi({},e,{prefix:"text-field__error",name:"alert-circle"}))}renderTooltip(e){let{data:t}=e;return w.createElement("div",{prefix:"text-field__tooltip"},t)}handleChange(e){let{value:t}=e.target;this.fire("onChange",{event:e,value:t})}}).prototype,"renderComponent",[Ki,Yi,Hi],Object.getOwnPropertyDescriptor(Gi.prototype,"renderComponent"),Gi.prototype),Xi(Gi.prototype,"renderError",[Li],Object.getOwnPropertyDescriptor(Gi.prototype,"renderError"),Gi.prototype),Xi(Gi.prototype,"renderTooltip",[Ui],Object.getOwnPropertyDescriptor(Gi.prototype,"renderTooltip"),Gi.prototype),Xi(Gi.prototype,"handleChange",[Bi],Object.getOwnPropertyDescriptor(Gi.prototype,"handleChange"),Gi.prototype),Gi);var Ji,Zi,Qi,eo,to,ro,no;function io(){return(io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oo(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ao=(Ji=w.props({group:"own",include:["format","value","onChange"]},{group:"popover",prefix:"popover",component:Jn}),Zi=w.defaults({format:"d.m.Y"}),Qi=w.types({format:kt.string,value:kt.instanceOf(Date),onChange:kt.func}),eo=w.bind(),to=w.bind(),ro=w.bind(),oo((no=class extends w.Component{renderComponent(){let{value:e}=this.own;return w.createElement(Jn,io({},this.popover,{trigger:this.renderTrigger,onRequestClose:this.handleRequestClose}),w.createElement(Pi,io({},this.picker,{prefix:"date-field__picker",value:e,onChange:this.handlePickerChange})))}renderTrigger(e){let{format:t,value:r}=this.own;return w.createElement($i,io({},this.rest,e,{prefix:"date-field",readOnly:!0,value:w.formatDate(r,t)}))}handleRequestClose(){if(this.requestClose)return this.requestClose=!1,!0}handlePickerChange(e){this.requestClose=!0,this.fire("onChange",e)}}).prototype,"renderComponent",[Ji,Zi,Qi],Object.getOwnPropertyDescriptor(no.prototype,"renderComponent"),no.prototype),oo(no.prototype,"renderTrigger",[eo],Object.getOwnPropertyDescriptor(no.prototype,"renderTrigger"),no.prototype),oo(no.prototype,"handleRequestClose",[to],Object.getOwnPropertyDescriptor(no.prototype,"handleRequestClose"),no.prototype),oo(no.prototype,"handlePickerChange",[ro],Object.getOwnPropertyDescriptor(no.prototype,"handlePickerChange"),no.prototype),no);function lo(){return(lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class so extends w.Component{renderComponent(){return w.createElement(Rr,lo({},this.rest,{prefix:"radio",type:"radio"}))}}var po,co,uo,ho;function fo(){return(fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mo(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let go=(po=w.props({group:"own",include:"value"}),co=w.types({value:kt.oneOfType([kt.string,kt.number])}),uo=w.bind(),mo((ho=class extends w.Component{renderComponent(){let{value:e}=this.own;return w.createElement(Pn,fo({},this.rest,{prefix:"radio-group",itemComponent:so,value:[e],onChange:this.handleChange}))}handleChange(e){let{event:t,name:r,value:n}=e;n&&this.fire("onChange",{event:t,value:r})}}).prototype,"renderComponent",[po,co],Object.getOwnPropertyDescriptor(ho.prototype,"renderComponent"),ho.prototype),mo(ho.prototype,"handleChange",[uo],Object.getOwnPropertyDescriptor(ho.prototype,"handleChange"),ho.prototype),ho);var yo,bo,vo,Oo,Co,ko,wo,xo,jo,Eo;function Po(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function _o(){return(_o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let{Provider:zo,Consumer:Do}=w.createContext(),Ro={Button:e=>w.createElement(dr,_o({},e,{prefix:"form__item"}))};Object.entries({Checkbox:Sr,CheckboxGroup:Mn,DateField:ao,Menu:gi,Radio:so,RadioGroup:go,TextField:$i}).forEach((([e,t])=>{var r,n,i,o,a;Ro[e]=(r=w.props({group:"own",include:"onChange"}),n=w.types({onChange:kt.func}),i=w.bind(),o=w.bind(),Po((a=class extends w.Component{renderComponent(){return w.createElement(Do,null,this.renderChildren)}renderChildren(e){let r=this.form=e.form,{values:n,errors:i}=r.own,{name:o}=this.rest,a=n[o],l=i[o],s={};return null!=a&&(s.value=a),null!=l&&(s.error=l),w.createElement(t,_o({},this.rest,s,{prefix:"form__item",onChange:this.handleChange}))}handleChange(e){let{name:t}=this.rest,{value:r}=e;this.fire("onChange",e),this.form.handleChange({event:e,name:t,value:r})}}).prototype,"renderComponent",[r,n],Object.getOwnPropertyDescriptor(a.prototype,"renderComponent"),a.prototype),Po(a.prototype,"renderChildren",[i],Object.getOwnPropertyDescriptor(a.prototype,"renderChildren"),a.prototype),Po(a.prototype,"handleChange",[o],Object.getOwnPropertyDescriptor(a.prototype,"handleChange"),a.prototype),a)}));let To=(yo=w.props({group:"own",include:["disabled","errors","stateless","values","onChange","onComplete","onItemChange","onReject","onSubmit","onValidate"]}),bo=w.defaults({errors:{},values:{},disabled:!1}),vo=w.statics(Ro),Oo=w.state((e=>({values:e.values,errors:e.errors}))),Co=w.types({disabled:kt.bool,errors:kt.object,stateless:kt.bool,values:kt.object,onChange:kt.func,onComplete:kt.func,onItemChange:kt.func,onReject:kt.func,onSubmit:kt.func,onValidate:kt.func}),ko=w.bind(),wo=w.bind(),xo=w.bind(),jo=w.bind(),Po((Eo=class extends w.Component{renderComponent(){let{stateless:e}=this.own;e||Object.assign(this.own,this.state);let{children:t}=this.rest,{disabled:r}=this.own;return w.createElement("form",_o({},this.rest,{prefix:"form",modifiers:{disabled:r},onSubmit:this.handleSubmit}),w.createElement(zo,{value:{form:this}},t))}handleSubmit(e){e.preventDefault();let{values:t}=this.own,r={};if(r=this.fire("onValidate",{errors:r,values:t})||r,w.isEmpty(r)){!1!==this.fire("onSubmit",{event:e,values:t,complete:this.handleComplete,reject:this.handleReject})&&this.setState({disabled:!0})}else this.setState({errors:r})}handleChange(e){let{name:t,value:r}=e,{values:n}=this.own;n=Object.assign({},n,{[t]:r}),this.setState({values:n}),this.fire("onItemChange",e),this.fire("onChange",{event:e,values:n})}handleComplete(e={}){let{values:t}=e,r={disabled:!1};t&&(r.values=t),this.setState(r),this.fire("onComplete",e)}handleReject(e={}){let t={disabled:!1},{values:r,errors:n}=e;r&&(t.values=r),n&&!w.isEmpty(n)&&(t.errors=n),this.setState(t),this.fire("onReject",e)}}).prototype,"renderComponent",[yo,bo,vo,Oo,Co],Object.getOwnPropertyDescriptor(Eo.prototype,"renderComponent"),Eo.prototype),Po(Eo.prototype,"handleSubmit",[ko],Object.getOwnPropertyDescriptor(Eo.prototype,"handleSubmit"),Eo.prototype),Po(Eo.prototype,"handleChange",[wo],Object.getOwnPropertyDescriptor(Eo.prototype,"handleChange"),Eo.prototype),Po(Eo.prototype,"handleComplete",[xo],Object.getOwnPropertyDescriptor(Eo.prototype,"handleComplete"),Eo.prototype),Po(Eo.prototype,"handleReject",[jo],Object.getOwnPropertyDescriptor(Eo.prototype,"handleReject"),Eo.prototype),Eo);var So,Mo,Ao;function Io(){return(Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Fo=(So=w.props({group:"own",include:["align","position","text"]}),Mo=w.types({align:kt.oneOf(["start","center","end"]),position:kt.oneOf(["left","right","top","bottom"]),text:kt.any}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Ao=class extends w.Component{renderComponent(){let{align:e,position:t,text:r}=this.own,{children:n}=this.rest;return w.createElement("div",Io({},this.rest,{prefix:"label",modifiers:{align:e,position:t}}),w.createElement("div",{prefix:"label__text"},r),w.createElement("div",{prefix:"label__content"},n))}}).prototype,"renderComponent",[So,Mo],Object.getOwnPropertyDescriptor(Ao.prototype,"renderComponent"),Ao.prototype),Ao);var No,qo,Vo,Ko,Yo,Ho;function Lo(){return(Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Uo(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Bo=(No=w.props({group:"form",component:To}),qo=w.innerRefs("login"),Vo=w.bind(),Ko=w.bind(),Yo=w.bind(),Uo((Ho=class extends w.Component{renderComponent(){return w.createElement(bn,Lo({},this.rest,{prefix:"sign-in-popup",title:"Вход",closable:!1,transparent:!0}),this.renderForm)}renderForm({handleClose:e}){let{loginRef:t}=this.innerRefs;return w.createElement(To,Lo({},this.form,{prefix:"sign-in-popup__form",values:{login:"",password:"",remember:!0},onValidate:this.handleValidate,onComplete:e}),w.createElement(Fo,{prefix:"sign-in-popup__login-label",text:"Логин:"},w.createElement(To.TextField,{prefix:"sign-in-popup__login-field",name:"login",spellCheck:!1,innerRef:t})),w.createElement(Fo,{prefix:"sign-in-popup__password-label",text:"Пароль:"},w.createElement(To.TextField,{prefix:"sign-in-popup__password-field",name:"password",type:"password"})),w.createElement(To.Checkbox,{prefix:"sign-in-popup__remember-checkbox",name:"remember",label:"Запомнить меня"}),w.createElement(To.Button,{prefix:"sign-in-popup__submit-button",type:"submit",text:"Войти"}))}handleValidate(e){let{errors:t,values:r}=e;r.login||(t.login="Это поле должно быть заполнено!"),r.password||(t.password="Это поле должно быть заполнено!")}handleAfterMount(){this.innerRefs.loginEl.querySelector("input").focus()}}).prototype,"renderComponent",[No,qo],Object.getOwnPropertyDescriptor(Ho.prototype,"renderComponent"),Ho.prototype),Uo(Ho.prototype,"renderForm",[Vo],Object.getOwnPropertyDescriptor(Ho.prototype,"renderForm"),Ho.prototype),Uo(Ho.prototype,"handleValidate",[Ko],Object.getOwnPropertyDescriptor(Ho.prototype,"handleValidate"),Ho.prototype),Uo(Ho.prototype,"handleAfterMount",[Yo],Object.getOwnPropertyDescriptor(Ho.prototype,"handleAfterMount"),Ho.prototype),Ho);const Go=w.connect((()=>({onSubmit:L.readAccount})),Bo);var Wo,Xo,$o,Jo;function Zo(){return(Zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qo(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ea=[{key:"login",text:"Логин: user"},{key:"passowrd",text:"Пароль: user"}],ta=(Wo=w.state((()=>({messages:[]}))),Xo=w.bind(),$o=w.bind(),Qo((Jo=class extends w.Component{renderComponent(){let{messages:e}=this.state;return w.createElement("div",Zo({},this.rest,{prefix:"sign-in-page"}),w.createElement(Xt,{prefix:"sign-in-page__snackbar",items:e,onClose:this.handleRemoveMessage}))}handleRemoveMessage({itemKey:e}){this.removeMessage(e)}handleAfterMount(){bn.open({key:"sign-in",component:Go}),setTimeout((()=>{this.addMessage(ea[0]),setTimeout((()=>{this.addMessage(ea[1])}),1e3)}),1e3)}addMessage(e){let{messages:t}=this.state;this.setState({messages:t.concat(e)})}removeMessage(e){let{messages:t}=this.state;this.setState({messages:t.filter((t=>t.key!==e))})}}).prototype,"renderComponent",[Wo],Object.getOwnPropertyDescriptor(Jo.prototype,"renderComponent"),Jo.prototype),Qo(Jo.prototype,"handleRemoveMessage",[Xo],Object.getOwnPropertyDescriptor(Jo.prototype,"handleRemoveMessage"),Jo.prototype),Qo(Jo.prototype,"handleAfterMount",[$o],Object.getOwnPropertyDescriptor(Jo.prototype,"handleAfterMount"),Jo.prototype),Jo);var ra,na,ia,oa;function aa(){return(aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function la(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let sa=(ra=w.props({group:"own",include:"onPathChange"}),na=w.types({onPathChange:kt.func}),ia=w.bind(),la((oa=class extends w.Component{renderComponent(){return w.createElement("div",aa({},this.rest,{prefix:"not-found-page"}),w.createElement("div",{prefix:"not-found-page__code"},"404"),w.createElement("div",{prefix:"not-found-page__text"},"Нет такой страницы!"),w.createElement(dr,{prefix:"not-found-page__button",text:"На главную",onClick:this.handleClick}))}handleClick(){this.fire("onPathChange",{path:""})}}).prototype,"renderComponent",[ra,na],Object.getOwnPropertyDescriptor(oa.prototype,"renderComponent"),oa.prototype),la(oa.prototype,"handleClick",[ia],Object.getOwnPropertyDescriptor(oa.prototype,"handleClick"),oa.prototype),oa);const pa=w.connect((()=>({onPathChange:Je.setPath})),sa);var ca,da,ua,ha,fa,ma,ga,ya,ba,va,Oa,Ca;function ka(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let{Provider:wa,Consumer:xa}=w.createContext(),ja={components:[]};function Ea(){ja.components.forEach((e=>e.notify()))}addEventListener("resize",Ea);let Pa=(ca=w.pure(!1),da=w.props({group:"own",include:["onResize","onInitialize"]}),ua=w.state((()=>({mode:null}))),ha=w.innerRefs("root"),fa=w.types({onResize:kt.func,onInitialize:kt.func}),ma=w.bind(),ga=w.bind(),ya=w.bind(),ba=w.bind(),va=w.bind(),Oa=w.bind(),ka((Ca=class extends w.Component{static notify(){Ea()}renderComponent(){return w.createElement(xa,null,this.renderChildren)}renderChildren(e){let{mode:t}=this.state,{children:r}=this.rest,{rootRef:n}=this.innerRefs,i={mode:t,innerRef:n,notify:this.notify};return this.parentComponent=e?e.parentComponent:ja,Object.defineProperty(i,"mode",{enumerable:!1}),Object.defineProperty(i,"notify",{enumerable:!1}),w.createElement(wa,{value:{parentComponent:this}},r(i))}notify(){let{mode:e}=this.state,t=this.handleResize();e!==t&&this.setState({mode:t}),(this.components||[]).forEach((e=>e.notify()))}handleAfterMount(){let{parentComponent:e}=this;(e.components||(e.components=[])).push(this)}handleBeforeUnmount(){let{parentComponent:e}=this;e.components=e.components.filter((e=>e!==this))}handleAfterRender(){let{mode:e}=this.state;null===e&&this.fire("onInitialize",this.getEventProps());let t=this.handleResize();void 0===t&&(t=null),e!==t&&this.setState({mode:t})}handleResize(){let e=this.fire("onResize",this.getEventProps());return void 0===e&&(e=null),e}getEventProps(){let{rootEl:e}=this.innerRefs,{clientWidth:t,clientHeight:r}=e;return{rootEl:e,clientWidth:t,clientHeight:r}}}).prototype,"renderComponent",[ca,da,ua,ha,fa],Object.getOwnPropertyDescriptor(Ca.prototype,"renderComponent"),Ca.prototype),ka(Ca.prototype,"renderChildren",[ma],Object.getOwnPropertyDescriptor(Ca.prototype,"renderChildren"),Ca.prototype),ka(Ca.prototype,"notify",[ga],Object.getOwnPropertyDescriptor(Ca.prototype,"notify"),Ca.prototype),ka(Ca.prototype,"handleAfterMount",[ya],Object.getOwnPropertyDescriptor(Ca.prototype,"handleAfterMount"),Ca.prototype),ka(Ca.prototype,"handleBeforeUnmount",[ba],Object.getOwnPropertyDescriptor(Ca.prototype,"handleBeforeUnmount"),Ca.prototype),ka(Ca.prototype,"handleAfterRender",[va],Object.getOwnPropertyDescriptor(Ca.prototype,"handleAfterRender"),Ca.prototype),ka(Ca.prototype,"handleResize",[Oa],Object.getOwnPropertyDescriptor(Ca.prototype,"handleResize"),Ca.prototype),Ca);var _a,za,Da,Ra,Ta,Sa,Ma;function Aa(){return(Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ia(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Fa=(_a=w.props({group:"own",include:["center","collapsed","left","right"]}),za=w.defaults({collapsed:{}}),Da=w.types({collapsed:kt.exact({left:kt.bool,right:kt.bool}),center:kt.oneOfType([kt.element,kt.func]),left:kt.oneOfType([kt.element,kt.func]),right:kt.oneOfType([kt.element,kt.func])}),Ra=w.bind(),Ta=w.bind(),Sa=w.bind(),Ia((Ma=class extends w.Component{renderComponent(){return w.createElement(Pa,null,this.renderChildren)}renderChildren(e){let{collapsed:t}=this.own,{notify:r}=e,n={timeout:120,mountOnEnter:!0,unmountOnExit:!0,onEntering:r,onExiting:r};return w.createElement("div",Aa({},this.rest,e,{prefix:"border-layout"}),w.createElement(w.Transition,Aa({},n,{in:!t.left}),this.renderLeft),this.renderCenter(),w.createElement(w.Transition,Aa({},n,{in:!t.right}),this.renderRight))}renderItem(e,t){let r=this.own[e];return w.createElement("div",{prefix:"border-layout__"+e,modifiers:t?{transition:t}:null},"function"==typeof r?r():r)}renderCenter(){return this.renderItem("center")}renderLeft(e){return this.renderItem("left",e)}renderRight(e){return this.renderItem("right",e)}}).prototype,"renderComponent",[_a,za,Da],Object.getOwnPropertyDescriptor(Ma.prototype,"renderComponent"),Ma.prototype),Ia(Ma.prototype,"renderChildren",[Ra],Object.getOwnPropertyDescriptor(Ma.prototype,"renderChildren"),Ma.prototype),Ia(Ma.prototype,"renderLeft",[Ta],Object.getOwnPropertyDescriptor(Ma.prototype,"renderLeft"),Ma.prototype),Ia(Ma.prototype,"renderRight",[Sa],Object.getOwnPropertyDescriptor(Ma.prototype,"renderRight"),Ma.prototype),Ma);var Na,qa,Va;function Ka(){return(Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Ya=(Na=w.props({group:"own",include:"profile"}),qa=w.types({profile:kt.contact}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Va=class extends w.Component{renderComponent(){let{profile:e}=this.own,{name:t,age:r,department:n,position:i,mask:o}=e,a=[["Имя",t.first],["Фамилия",t.last],["Отчество",t.middle],["Возраст",r],["Маска",o?"Есть":"Нет"],["Подразделение",n.name+" ("+n.key.toString().padStart(2,"0")+")"],["Должность",i]].map((([e,t],r)=>w.createElement("tr",{key:r},w.createElement("td",{prefix:"profile-popup__name"},e+":"),w.createElement("td",{prefix:"profile-popup__value"},t)))),l=t.last+" "+t.first+" "+t.middle;return w.createElement(bn,Ka({},this.rest,{prefix:"profile-popup",title:l}),w.createElement(Xa,{prefix:"profile-popup__avatar",size:"large",contact:e}),w.createElement("table",{prefix:"profile-popup__table"},w.createElement("tbody",null,a)))}}).prototype,"renderComponent",[Na,qa],Object.getOwnPropertyDescriptor(Va.prototype,"renderComponent"),Va.prototype),Va);var Ha,La,Ua,Ba;function Ga(){return(Ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wa(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Xa=(Ha=w.props({group:"own",include:["active","contact","size"]}),La=w.types({active:kt.bool,contact:kt.contact,size:kt.oneOf(["small","medium","large"])}),Ua=w.bind(),Wa((Ba=class extends w.Component{renderComponent(){let{style:e}=this.rest,{active:t,contact:r,size:n}=this.own,{avatar:i,name:o}=r,a={};return i?a.style=Object.assign({},e,{backgroundImage:"url("+i+")"}):a.children=o.last.charAt(0).toUpperCase(),t&&(a.onClick=this.handleClick),w.createElement("div",Ga({},this.rest,a,{prefix:"avatar",modifiers:{active:t,size:n}}))}handleClick(){let{contact:e}=this.own;bn.open({profile:e,key:"profilePopup",component:Ya})}}).prototype,"renderComponent",[Ha,La],Object.getOwnPropertyDescriptor(Ba.prototype,"renderComponent"),Ba.prototype),Wa(Ba.prototype,"handleClick",[Ua],Object.getOwnPropertyDescriptor(Ba.prototype,"handleClick"),Ba.prototype),Ba);var $a,Ja,Za,Qa,el,tl,rl,nl,il,ol,al,ll,sl;function pl(){return(pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function cl(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let dl=[{key:"create",text:"Создать"},{key:"update",text:"Изменить"},{key:"destroy",text:"Удалить"}],ul=($a=w.props({group:"own",include:["confirm","onConfirmChange"]},{group:"form",component:To}),Ja=w.defaults({resize:["left","right"]}),Za=w.innerRefs("partIdField"),Qa=w.types({confirm:kt.bool,onConfirmChange:kt.func}),el=w.bind(),tl=w.bind(),rl=w.bind(),nl=w.bind(),il=w.bind(),ol=w.bind(),al=w.bind(),ll=w.bind(),cl((sl=class extends w.Component{renderComponent(){return w.createElement(bn,pl({},this.rest,{prefix:"task-add-popup",title:"Добавить задачу"}),this.renderForm)}renderForm({handleClose:e}){let{partIdFieldRef:t}=this.innerRefs,r={partId:"",type:"create",comment:"",created:new Date};return this.handleClose=e,w.createElement(To,pl({},this.form,{prefix:"task-add-popup__form",values:r,onValidate:this.handleValidate,onComplete:this.handleComplete,onSubmit:this.handleSubmit}),w.createElement(Fo,{prefix:"task-add-popup__part-id-label",text:"Номер детали:"},w.createElement(To.TextField,{prefix:"task-add-popup__part-id-field",name:"partId",spellCheck:!1,inputRef:t})),w.createElement(Fo,{prefix:"task-add-popup__created-label",text:"Дата создания:"},w.createElement(To.DateField,{prefix:"task-add-popup__created-field",name:"created"})),w.createElement(Fo,{prefix:"task-add-popup__type-label",text:"Тип задачи:"},w.createElement(To.Menu,{prefix:"task-add-popup__type-menu",name:"type",orientation:"horizontal",items:dl})),w.createElement(Fo,{prefix:"task-add-popup__comment-label",text:"Комментарий:"},w.createElement(To.TextField,{prefix:"task-add-popup__comment-field",name:"comment",multiline:!0,rows:4})),w.createElement(To.Button,{prefix:"task-add-popup__submit-button",type:"submit",text:"Создать"}))}handleValidate(e){let{errors:t,values:r}=e;r.partId||(t.partId="Это поле должно быть заполнено!")}handleComplete(){this.handleClose()}handleSubmit(e){let{confirm:t}=this.own;this.submitEvent=e,t?bn.open({key:"a",title:"Добавить задачу?",text:"Вы действительно хотите добавить эту задачу?",type:"confirm",onCheckboxChange:this.handleChange,onConfirm:this.handleConfirm,onReject:this.handleReject}):this.fire("onSubmit",e)}handleChange(e){this.fire("onConfirmChange",{confirm:!e.value})}handleConfirm(){this.fire("onSubmit",this.submitEvent)}handleReject(){this.submitEvent.reject()}handleAfterMount(){this.innerRefs.partIdFieldEl.focus()}}).prototype,"renderComponent",[$a,Ja,Za,Qa],Object.getOwnPropertyDescriptor(sl.prototype,"renderComponent"),sl.prototype),cl(sl.prototype,"renderForm",[el],Object.getOwnPropertyDescriptor(sl.prototype,"renderForm"),sl.prototype),cl(sl.prototype,"handleValidate",[tl],Object.getOwnPropertyDescriptor(sl.prototype,"handleValidate"),sl.prototype),cl(sl.prototype,"handleComplete",[rl],Object.getOwnPropertyDescriptor(sl.prototype,"handleComplete"),sl.prototype),cl(sl.prototype,"handleSubmit",[nl],Object.getOwnPropertyDescriptor(sl.prototype,"handleSubmit"),sl.prototype),cl(sl.prototype,"handleChange",[il],Object.getOwnPropertyDescriptor(sl.prototype,"handleChange"),sl.prototype),cl(sl.prototype,"handleConfirm",[ol],Object.getOwnPropertyDescriptor(sl.prototype,"handleConfirm"),sl.prototype),cl(sl.prototype,"handleReject",[al],Object.getOwnPropertyDescriptor(sl.prototype,"handleReject"),sl.prototype),cl(sl.prototype,"handleAfterMount",[ll],Object.getOwnPropertyDescriptor(sl.prototype,"handleAfterMount"),sl.prototype),sl);const hl=w.connect((e=>{let{addConfirm:t}=e.app;return{confirm:t,onSubmit:ut.createTasks,onConfirmChange:ne.setAddConfirm}}),ul);var fl,ml,gl,yl,bl,vl,Ol,Cl,kl;function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xl(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let jl=[{key:"create",text:"Создать"},{key:"update",text:"Изменить"},{key:"destroy",text:"Удалить"}],El=[{key:"todo",text:"Выполнить"},{key:"doing",text:"Выполняется"},{key:"done",text:"Выполнено"}],Pl=(fl=w.props({group:"own",include:["confirm","tasks","onSubmit","onConfirmChange"]},{group:"form",component:To}),ml=w.defaults({resize:["left","right"],tasks:[]}),gl=w.types({confirm:kt.bool,tasks:kt.arrayOf(kt.task),onSubmit:kt.func,onConfirmChange:kt.func}),yl=w.bind(),bl=w.bind(),vl=w.bind(),Ol=w.bind(),Cl=w.bind(),xl((kl=class extends w.Component{renderComponent(){let{tasks:e}=this.own,t="Редактировать задач"+(e.length>1?"и":"у")+" для "+e.map((e=>e.partId)).join(", ");return w.createElement(bn,wl({},this.rest,{prefix:"task-edit-popup",title:t}),this.renderForm)}renderForm({handleClose:e}){let{tasks:t}=this.own,{type:r,state:n,comment:i}=t[0]||{};for(let e=1;e<t.length;e++){let o=t[e];r!==o.type&&(r=null),n!==o.state&&(n=null),i!==o.comment&&(i=null)}return this.handleClose=e,w.createElement(To,wl({},this.form,{prefix:"task-edit-popup__form",values:{type:r,state:n,comment:i},onComplete:e,onSubmit:this.handleSubmit}),w.createElement(Fo,{prefix:"task-edit-popup__type-label",text:"Тип задачи:"},w.createElement(To.Menu,{prefix:"task-edit-popup__type-menu",name:"type",orientation:"horizontal",items:jl})),w.createElement(Fo,{prefix:"task-edit-popup__state-label",text:"Состояние задачи:"},w.createElement(To.Menu,{prefix:"task-edit-popup__state-menu",name:"state",orientation:"horizontal",items:El})),w.createElement(Fo,{prefix:"task-edit-popup__comment-label",text:"Комментарий:"},w.createElement(To.TextField,{prefix:"task-edit-popup__comment-field",name:"comment",multiline:!0,placeholder:null===i?"Различные":null})),w.createElement(To.Button,{prefix:"task-edit-popup__submit-button",type:"submit",text:"Изменить"}))}handleSubmit(e){let{confirm:t}=this.own;this.submitEvent=e;let r=this.getUpdatedTasks();if(r.length)if(t){let e=r.length>1?"и":"у";bn.open({key:"edit-confirm",type:"confirm",title:"Изменить задач"+e+"?",text:"Вы действительно хотите изменить эт"+e+" задач"+e+"?",onCheckboxChange:this.handleCheckboxChange,onConfirm:this.handleConfirm,onReject:this.handleReject})}else this.fire("onSubmit",Object.assign(this.submitEvent,{values:r}));else this.handleClose()}handleCheckboxChange(e){this.fire("onConfirmChange",{confirm:!e.value})}handleConfirm(){this.fire("onSubmit",Object.assign(this.submitEvent,{values:this.getUpdatedTasks()}))}handleReject(){this.submitEvent.reject()}getUpdatedTasks(){let{values:e}=this.submitEvent,{tasks:t}=this.own,r={};Object.entries(e).forEach((([e,t])=>{null!==t&&(r[e]=t)}));let n=Object.entries(r);return t=n.length?t.filter((e=>{for(let t=0;t<n.length;t++)if(n[t][1]!==e[n[t][0]])return!0;return!1})).map((e=>Object.assign({},e,r))):[],t}}).prototype,"renderComponent",[fl,ml,gl],Object.getOwnPropertyDescriptor(kl.prototype,"renderComponent"),kl.prototype),xl(kl.prototype,"renderForm",[yl],Object.getOwnPropertyDescriptor(kl.prototype,"renderForm"),kl.prototype),xl(kl.prototype,"handleSubmit",[bl],Object.getOwnPropertyDescriptor(kl.prototype,"handleSubmit"),kl.prototype),xl(kl.prototype,"handleCheckboxChange",[vl],Object.getOwnPropertyDescriptor(kl.prototype,"handleCheckboxChange"),kl.prototype),xl(kl.prototype,"handleConfirm",[Ol],Object.getOwnPropertyDescriptor(kl.prototype,"handleConfirm"),kl.prototype),xl(kl.prototype,"handleReject",[Cl],Object.getOwnPropertyDescriptor(kl.prototype,"handleReject"),kl.prototype),kl);const _l=w.connect((e=>{let{all:t,selected:r}=e.tasks,{editConfirm:n}=e.app;return{confirm:n,tasks:t.filter((e=>r.includes(e.key))),onSubmit:ut.updateTasks,onConfirmChange:ne.setEditConfirm}}),Pl),zl=w.connect((e=>({profile:e.account})),Ya);var Dl,Rl,Tl,Sl;function Ml(){return(Ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Al(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Il=(Dl=w.props({group:"own",include:["data","dataKey","onLoad"]}),Rl=w.types({data:kt.oneOfType([kt.array,kt.loading]),dataKey:kt.number,onLoad:kt.func}),Tl=w.bind(),Al((Sl=class extends w.Component{renderComponent(){let{data:e}=this.own;if(!e)return null;if(e===w.loading)return w.createElement("div",{prefix:"popup__overlay"},w.createElement(Pt,{prefix:"data-popup__loading",name:"loading"}));if(0===e.length){let{popupKey:e,title:t}=this.rest;return w.createElement(vr,{prefix:"data-popup__alert",text:"Ничего не найдено!",title:t,popupKey:e})}return w.createElement(bn,Ml({},this.rest,{prefix:"data-popup"}))}handleAfterRender(){let{data:e,dataKey:t}=this.own;e||this.fire("onLoad",{dataKey:t})}}).prototype,"renderComponent",[Dl,Rl],Object.getOwnPropertyDescriptor(Sl.prototype,"renderComponent"),Sl.prototype),Al(Sl.prototype,"handleAfterRender",[Tl],Object.getOwnPropertyDescriptor(Sl.prototype,"handleAfterRender"),Sl.prototype),Sl);var Fl,Nl,ql,Vl,Kl;function Yl(){return(Yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Hl(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Ll=(Fl=w.props({group:"own",include:["items","expandedItems","activeItem","onExpand","onChange"]}),Nl=w.defaults({expandedItems:[]}),ql=w.types({items:kt.array,expandedItems:kt.array,activeItem:kt.oneOfType([kt.string,kt.number]),onExpand:kt.func,onChange:kt.func}),Vl=w.bind(),Hl((Kl=class extends w.Component{renderComponent(){let{items:e}=this.own;return w.createElement("div",Yl({},this.rest,{prefix:"tree",onClick:this.handleClick}),this.renderItems(e,0))}renderItems(e,t){let r,{expandedItems:n,activeItem:i}=this.own;if(t){r=[];for(let e=0;e<t;e++)r[e]=w.createElement("div",{prefix:"tree__indent",key:"i"+e})}return e.map((e=>{let{key:o,text:a,items:l,...s}=e,p=l?n.includes(o)?"expanded":"collapsed":"none";return w.createElement(w.Fragment,{key:o},w.createElement("div",Yl({},s,{prefix:"tree__item",modifiers:{active:i===o},"data-key":(l?"b":"l")+":"+o}),r,w.createElement("div",{prefix:"tree__icon",modifiers:{[p]:!0}}),a),l&&"expanded"===p&&w.createElement("div",{prefix:"tree__group"},this.renderItems(l,t+1)))}))}handleClick(e){let[t,r]=(e.target.dataset.key||"").split(":"),{expandedItems:n}=this.own;if(r)switch(t){case"b":n=n.includes(r)?n.filter((e=>e!==r)):n.concat([r]),this.fire("onExpand",{expandedItems:n});break;case"l":this.fire("onChange",{activeItem:r})}}}).prototype,"renderComponent",[Fl,Nl,ql],Object.getOwnPropertyDescriptor(Kl.prototype,"renderComponent"),Kl.prototype),Hl(Kl.prototype,"handleClick",[Vl],Object.getOwnPropertyDescriptor(Kl.prototype,"handleClick"),Kl.prototype),Kl);var Ul,Bl,Gl,Wl;function Xl(){return(Xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let $l=(Ul=w.props({group:"own",include:"text"}),Bl=w.defaults({text:"Ничего не найдено!"}),Gl=w.types({text:kt.string}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Wl=class extends w.Component{renderComponent(){let{text:e}=this.own;return w.createElement("div",Xl({},this.rest,{prefix:"not-found-overlay"}),w.createElement(Pt,{prefix:"not-found-overlay__icon",name:"database-search",size:"large"}),w.createElement("div",{prefix:"not-found-overlay__text"},e))}}).prototype,"renderComponent",[Ul,Bl,Gl],Object.getOwnPropertyDescriptor(Wl.prototype,"renderComponent"),Wl.prototype),Wl);var Jl,Zl,Ql,es;function ts(){return(ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rs(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ns=(Jl=w.props({group:"rest",include:"onTableOfContentRead:onLoad"},{group:"own",include:["activeItem","content","tableOfContent","onContentRead"]},{group:"tree",component:Ll}),Zl=w.types({activeItem:kt.string,content:kt.object,tableOfContent:kt.oneOfType([kt.array,kt.loading]),onContentRead:kt.func}),Ql=w.bind(),rs((es=class extends w.Component{renderComponent(){let{tableOfContent:e}=this.own;return w.createElement(Il,ts({},this.rest,{prefix:"help-popup",title:"Справка",resize:"all",data:e}),(()=>w.createElement(w.Fragment,null,this.renderSidebar(),this.renderBody())))}renderSidebar(){let{tableOfContent:e}=this.own;return w.createElement("div",{prefix:"help-popup__sidebar"},w.createElement("div",{prefix:"help-popup__header"},"Содержание"),w.createElement(Ll,ts({},this.tree,{prefix:"help-popup__tree",items:e})))}renderBody(){let e,{activeItem:t,content:r}=this.own;return r=r[t],e=r?r===w.loading?w.createElement(w.Fragment,null,w.createElement("div",{prefix:"help-popup__header"},"Загрузка..."),w.createElement(Ut,{prefix:"help-popup__loading-overlay"})):w.createElement(w.Fragment,null,w.createElement("div",{prefix:"help-popup__header"},r.title||"Без названия"),r.text?w.createElement("div",{prefix:"help-popup__text"},r.text.map(((e,t)=>w.createElement("div",{prefix:"help-popup__paragraph",key:t},e)))):w.createElement($l,{prefix:"help-popup__not-found-overlay"})):null,w.createElement("div",{prefix:"help-popup__body"},e)}handleAfterRender(){let{activeItem:e,content:t}=this.own;t[e]||this.fire("onContentRead",{activeItem:e})}}).prototype,"renderComponent",[Jl,Zl],Object.getOwnPropertyDescriptor(es.prototype,"renderComponent"),es.prototype),rs(es.prototype,"handleAfterRender",[Ql],Object.getOwnPropertyDescriptor(es.prototype,"handleAfterRender"),es.prototype),es);const is=w.connect((e=>Object.assign({onContentRead:ue.readContent,onTableOfContentRead:ue.readTableOfContent,onExpand:ue.setExpandedItems,onChange:ue.setActiveItem},e.help)),ns);function os(){return(os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class as extends w.Component{renderComponent(){return w.createElement(bn,os({},this.rest,{prefix:"about-popup",title:"О программе"}),w.createElement(Pt,{prefix:"about-popup__icon",name:"rabbit",size:"5x"}),w.createElement("div",{prefix:"about-popup__name"},"Обычная программа (0.0.0)"),w.createElement("div",{prefix:"about-popup__comment"},"Надеюсь, вам понравится."),w.createElement("a",{prefix:"about-popup__mail",href:"mailto:kolesov@outlook.com"},"kolesov@outlook.com"))}}var ls,ss,ps,cs,ds,us,hs,fs,ms,gs,ys,bs,vs,Os;function Cs(){return(Cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ks(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ws=[{key:"task:add",text:"Добавить"},{key:"task:edit",text:"Изменить"},{key:"task:remove",text:"Удалить"}],xs=[{key:"state:todo",text:"Выполнить"},{key:"state:doing",text:"Выполняется"},{key:"state:done",text:"Выполнено"}],js=[{key:"range:all",text:"Все"},{key:"range:date",text:"День"},{key:"range:month",text:"Месяц"},{key:"range:year",text:"Год"}],Es=(()=>{let e={list:{key:"view:list",icon:"view-sequential",text:"Список"},grid:{key:"view:grid",icon:"view-grid",text:"Таблица"},columns:{key:"view:columns",icon:"view-parallel",text:"Колонки"},calendar:{key:"view:calendar",icon:"calendar",text:"Календарь"}};return{all:[e.list,e.grid,e.columns],date:[e.list,e.grid,e.columns],month:[e.list,e.grid,e.columns,e.calendar],year:[e.list,e.grid,e.columns,e.calendar]}})(),Ps=[{key:"account:profile",text:"Профиль"},{key:"account:help",text:"Справка"},{key:"account:about",text:"О программе"},{key:"account:exit",text:"Выход"}],_s=(ls=w.props({group:"own",include:["collapsed","removeConfirm","notifications","range","selected","tasks","theme","view","onNotificationOpen","onSidebarToggle","onSignOut","onTasksRemove","onTasksUpdate","onRangeChange","onViewChange","onMessengerToggle","onThemeChange","onConfirmChange","onContactsRead"]}),ss=w.innerRefs("trigger","menu"),ps=w.types({collapsed:kt.exact({left:kt.bool,right:kt.bool}),removeConfirm:kt.bool,notifications:kt.oneOfType([kt.arrayOf(kt.contact),kt.loading]),range:kt.oneOf(["all","date","month","year"]),selected:kt.arrayOf(kt.number),tasks:kt.oneOfType([kt.arrayOf(kt.task),kt.loading]),theme:kt.theme,view:kt.oneOf(["list","grid","columns","calendar"]),onNotificationOpen:kt.func,onSidebarToggle:kt.func,onSignOut:kt.func,onTasksRemove:kt.func,onRangeChange:kt.func,onViewChange:kt.func,onMessengerToggle:kt.func,onThemeChange:kt.func,onConfirmChange:kt.func,onContactsRead:kt.func}),cs=w.bind(),ds=w.bind(),us=w.bind(),hs=w.bind(),fs=w.bind(),ms=w.bind(),gs=w.bind(),ys=w.bind(),bs=w.bind(),vs=w.bind(),ks((Os=class extends w.Component{renderComponent(){return w.createElement(Pa,{onInitialize:this.handleInitialize,onResize:this.handleResize},this.renderChildren)}renderChildren(e){let{mode:t}=e,{triggerRef:r,menuRef:n}=this.innerRefs,{collapsed:i,notifications:o,range:a,selected:l,tasks:s,view:p,onSidebarToggle:c}=this.own,d={key:"task",text:"Задача",items:ws},u={key:"state",text:"Состояние",items:xs},h={key:"range",text:"Интервал",items:js},f={key:"view",text:"Вид",submenuMode:"text",items:Es[a]},m={as:"|"},g=[d,u,h,f,{inline:!0,items:ws},m,{inline:!0,items:xs},m,{inline:!0,items:js},m,{inline:!0,mode:"icon",items:Es[a]},{as:"-"},m,{key:"messenger",text:"Уведомления",icon:"bell","data-animated":Array.isArray(o)&&o.length,items:[{as:"div",key:"messenger:notifications",children:this.renderNotifications()}].concat({key:"messenger:toggle",text:(i.right?"Открыть":"Закрыть")+" мессенджер"})},{key:"account",icon:"account-circle",items:[{key:"account:theme",as:"div",prefix:"task-header__theme-item",children:this.renderThemeItem()}].concat(Ps)}],y=[];if(null!==t)switch(g[0]=g[1]=g[2]=g[3]=null,t){case 5:g[13].text=null;case 4:g[3]=f,g[9]=g[10]=null;case 3:g[2]=h,g[7]=g[8]=null;case 2:g[1]=u,g[5]=g[6]=null;case 1:g[0]=d,g[4]=null}if(l&&0!==l.length){let e;for(let t=0;t<l.length;t++){let r=l[t],n=s.find((e=>e.key===r));if(e){if(e!==n.state){e=null;break}}else e=n.state}e&&y.push("state:"+e)}else y.push("task:edit","task:remove","state","state:todo","state:doing","state:done");return a&&y.push("range:"+a),p&&y.push("view:"+p),w.createElement("div",Cs({},this.rest,e,{prefix:"task-header"}),w.createElement(dr,{prefix:"task-header__trigger",modifiers:{collapsed:i.left},title:(i.left?"Открыть":"Закрыть")+" фильтр",icon:"menu",innerRef:r,onClick:c}),w.createElement(gi,{prefix:"task-header__menu",orientation:"horizontal",items:g,value:y,innerRef:n,onChange:this.handleMenuChange,onRequestClose:this.handleRequestClose}))}renderNotifications(){let e,{notifications:t}=this.own;return e=t&&t!==w.loading?0===t.length?w.createElement("div",{prefix:"task-header__notification-not-found"},"Нет новых уведомлений!"):t.map((e=>{let{key:t,name:r,message:n,active:i}=e,{text:o,sended:a}=n,l=r.last+" "+r.first+" "+r.middle;return w.createElement("div",{prefix:"task-header__notification",key:t,"data-key":t,onClick:this.handleNotificationClick},w.createElement(Xa,{prefix:"task-header__notification-left",size:"small",active:!0,contact:e}),w.createElement("div",{prefix:"task-header__notification-center"},w.createElement("div",{prefix:"task-header__notification-name"},l),w.createElement("div",{prefix:"task-header__notification-message"},o)),w.createElement("div",{prefix:"task-header__notification-right"},w.createElement("div",{prefix:"task-header__notification-status",modifiers:{active:i}}),w.createElement("div",{prefix:"task-header__notification-time"},w.formatDate(new Date(a),"d M"))))})):null,w.createElement(w.Fragment,null,e)}renderThemeItem(){let e,t,{theme:r}=this.own,n=[];return["red","green","blue","purple"].forEach(((i,o)=>{t=o%4,t||n.push(w.createElement("div",{prefix:"task-header__theme-row",key:n.length+""},e=[])),e[t]=w.createElement("div",{prefix:"task-header__theme-cell",modifiers:{theme:i,disabled:i===r},key:i,"data-theme":i,onClick:this.handleThemeItemClick})})),w.createElement(w.Fragment,null,n)}handleInitialize(){let{triggerEl:e,menuEl:t}=this.innerRefs,{children:r}=t,n=e.offsetWidth,i=r[10].firstChild.offsetWidth,o=4*i,[a,l,s,p,c,d,u,,h,,,,,f,m]=Array.prototype.slice.call(r).map((e=>e.offsetWidth)),g=n+c+u+h+o+f+m+4*d,y=g+a-c,b=y+l-u-d,v=b+s-h-d,O=[g,y,b,v,v+p-o-d,Number.NEGATIVE_INFINITY],C=O.concat([]);for(let e=0;e<C.length-2;e++)C[e]-=i;this.mediaProps={ws1:O,ws2:C}}handleResize(e){let{ws1:t,ws2:r}=this.mediaProps,{clientWidth:n}=e,{range:i}=this.own;return("all"===i||"date"===i?r:t).findIndex((e=>e<n))}handleMenuChange(e){let[t,r]=e.value.split(":"),{removeConfirm:n,selected:i,tasks:o}=this.own;switch(t){case"task":switch(r){case"add":bn.open({key:"task-add",component:hl});break;case"edit":bn.open({key:"task-edit",component:_l});break;case"remove":let e=i.length>1?"и":"у";n?bn.open({key:"remove-confirm",type:"confirm",title:"Удалить задач"+e+"?",text:"Вы действительно хотите удалить эт"+e+" задач"+e+"?",onCheckboxChange:this.handleCheckboxChange,onConfirm:this.handleConfirm}):this.fire("onTasksRemove",{tasks:i})}break;case"state":this.fire("onTasksUpdate",{values:i.map((e=>Object.assign({},o.find((t=>t.key===e)),{state:r})))});break;case"range":this.fire("onRangeChange",{range:r});break;case"view":this.fire("onViewChange",{view:r});break;case"messenger":switch(r){case"toggle":this.fire("onMessengerToggle")}break;case"account":switch(r){case"profile":bn.open({key:"profile",component:zl});break;case"help":bn.open({key:"help",component:is});break;case"about":bn.open({key:"about",component:as});break;case"exit":this.fire("onSignOut",{})}}}handleRequestClose(){if(this.requestClose)return this.requestClose=!1,!0}handleThemeItemClick(e){let{theme:t}=e.currentTarget.dataset;this.requestClose=!0,this.fire("onThemeChange",{theme:t})}handleNotificationClick(e){let{currentTarget:t,target:r}=e,{key:n}=t.dataset,{notifications:i}=this.own;this.requestClose=!0,t===r&&n&&(n=+n,this.fire("onNotificationOpen",{contact:i.find((e=>e.key===n)),activeTab:"dialogue"}))}handleCheckboxChange({value:e}){this.fire("onConfirmChange",{confirm:!e})}handleConfirm(){let{selected:e}=this.own;this.fire("onTasksRemove",{tasks:e})}handleAfterRender(){let{notifications:e}=this.own;e||this.fire("onContactsRead")}}).prototype,"renderComponent",[ls,ss,ps],Object.getOwnPropertyDescriptor(Os.prototype,"renderComponent"),Os.prototype),ks(Os.prototype,"renderChildren",[cs],Object.getOwnPropertyDescriptor(Os.prototype,"renderChildren"),Os.prototype),ks(Os.prototype,"handleInitialize",[ds],Object.getOwnPropertyDescriptor(Os.prototype,"handleInitialize"),Os.prototype),ks(Os.prototype,"handleResize",[us],Object.getOwnPropertyDescriptor(Os.prototype,"handleResize"),Os.prototype),ks(Os.prototype,"handleMenuChange",[hs],Object.getOwnPropertyDescriptor(Os.prototype,"handleMenuChange"),Os.prototype),ks(Os.prototype,"handleRequestClose",[fs],Object.getOwnPropertyDescriptor(Os.prototype,"handleRequestClose"),Os.prototype),ks(Os.prototype,"handleThemeItemClick",[ms],Object.getOwnPropertyDescriptor(Os.prototype,"handleThemeItemClick"),Os.prototype),ks(Os.prototype,"handleNotificationClick",[gs],Object.getOwnPropertyDescriptor(Os.prototype,"handleNotificationClick"),Os.prototype),ks(Os.prototype,"handleCheckboxChange",[ys],Object.getOwnPropertyDescriptor(Os.prototype,"handleCheckboxChange"),Os.prototype),ks(Os.prototype,"handleConfirm",[bs],Object.getOwnPropertyDescriptor(Os.prototype,"handleConfirm"),Os.prototype),ks(Os.prototype,"handleAfterRender",[vs],Object.getOwnPropertyDescriptor(Os.prototype,"handleAfterRender"),Os.prototype),Os);const zs=w.connect((e=>{let{range:t}=e.router,{selected:r}=e.tasks,{collapsed:n,views:i,removeConfirm:o,theme:a}=e.app,l=i[t];return{collapsed:n,notifications:Ie.getNotifications(e),removeConfirm:o,range:t,selected:r,tasks:ut.getFilteredTasks(e),theme:a,view:l,onNotificationOpen:Ie.setActiveTab,onMessengerToggle:ne.toggleMessenger,onRangeChange:Je.setRange,onSidebarToggle:ne.toggleSidebar,onSignOut:L.updateAccount,onTasksUpdate:ut.updateTasks,onTasksRemove:ut.deleteTasks,onThemeChange:ne.setTheme,onViewChange:ne.setView,onConfirmChange:ne.setRemoveConfirm,onContactsRead:Ie.readContacts}}),_s);var Ds,Rs;function Ts(){return(Ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Ss=[{key:"partId",label:"Номер"},{key:"partName",label:"Название"},{key:"comment",label:"Комментарий"}],Ms=[{key:"create",label:"Создать"},{key:"update",label:"Изменить"},{key:"destroy",label:"Удалить"}],As=[{key:"todo",label:"Выполнить"},{key:"doing",label:"Выполняется"},{key:"done",label:"Выполнено"}],Is=(Ds=w.innerRefs("field"),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Rs=class extends w.Component{renderComponent(){let{fieldRef:e}=this.innerRefs;return w.createElement(To,Ts({},this.rest,{prefix:"task-filter-form",stateless:!0}),w.createElement(Fo,{prefix:"task-filter-form__text-label",text:"Текст:"},w.createElement("div",{prefix:"task-filter-form__text-container"},w.createElement(oi,{prefix:"task-filter-form__text-dropdown",arrow:null,icon:"tune",popoverFit:e},w.createElement("div",{prefix:"task-filter-form__text-menu"},w.createElement(To.CheckboxGroup,{name:"fields",items:Ss,least:1}),w.createElement("div",{prefix:"task-filter-form__divider"}),w.createElement(To.Checkbox,{name:"caseSensetive",label:"Учитывать регистр"}))),w.createElement(To.TextField,{prefix:"task-filter-form__text-field",name:"text",spellCheck:!1,innerRef:e}))),w.createElement(Fo,{prefix:"task-filter-form__type-label",text:"Тип задачи:"},w.createElement(To.CheckboxGroup,{name:"types",items:Ms,least:1})),w.createElement(Fo,{prefix:"task-filter-form__state-label",text:"Состояние задачи:"},w.createElement(To.CheckboxGroup,{name:"states",items:As,least:1})))}}).prototype,"renderComponent",[Ds],Object.getOwnPropertyDescriptor(Rs.prototype,"renderComponent"),Rs.prototype),Rs);function Fs(){return(Fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Ns=[{key:"partId",label:"Номеру детали"},{key:"partName",label:"Названию детали"},{key:"type",label:"Типу задачи"},{key:"state",label:"Состоянию задачи"},{key:"created",label:"Дате создания"},{key:"comment",label:"Комментарию"}],qs=[{key:"asc",label:"По возрастанию"},{key:"desc",label:"По убыванию"}];class Vs extends w.Component{renderComponent(){return w.createElement(To,Fs({},this.rest,{prefix:"task-sort-form",stateless:!0}),w.createElement(Fo,{prefix:"task-sort-form__sort-label",text:"Сортировать по:"},w.createElement(To.RadioGroup,{name:"sort",items:Ns})),w.createElement(Fo,{prefix:"task-sort-form__order-label",text:"Порядок сортировки:"},w.createElement(To.RadioGroup,{name:"order",items:qs})))}}var Ks,Ys,Hs;function Ls(){return(Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Us=(Ks=w.props({group:"own",include:["range","view"]},{group:"filter",include:["filter:values","onFilterChange:onChange"]},{group:"sort",include:["sort:values","onSortChange:onChange"]}),Ys=w.types({range:kt.oneOf(["all","date","month","year"]),view:kt.oneOf(["list","grid","columns","calendar"])}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Hs=class extends w.Component{renderComponent(){let{range:e,view:t}=this.own,r="year"===e&&"calendar"===t;return w.createElement("div",Ls({},this.rest,{prefix:"sidebar"}),w.createElement(Is,Ls({},this.filter,{prefix:"sidebar__task-filter-form"})),w.createElement(Vs,Ls({},this.sort,{prefix:"sidebar__task-sort-form",disabled:r})))}}).prototype,"renderComponent",[Ks,Ys],Object.getOwnPropertyDescriptor(Hs.prototype,"renderComponent"),Hs.prototype),Hs);const Bs=w.connect((e=>{let{filter:t,sort:r}=e.tasks,{range:n}=e.router,{views:i}=e.app;return{filter:t,range:n,sort:r,view:i[n],onFilterChange:ut.setFilter,onSortChange:ut.setSort}}),Us);var Gs,Ws,Xs,$s,Js,Zs,Qs,ep;function tp(){return(tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rp(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let np=(Gs=w.props({group:"own",include:["as","page","hasMore","getParent","onPageChange"]}),Ws=w.innerRefs("root"),Xs=w.defaults({as:"div",getParent:e=>e}),$s=w.types({as:kt.elementType,page:kt.number,hasMore:kt.bool,getParent:kt.func,onPageChange:kt.func}),Js=w.bind(),Zs=w.bind(),Qs=w.bind(),rp((ep=class extends w.Component{renderComponent(){let{innerRef:e}=this.rest;e&&(this.innerRefs.rootRef=e);let{as:t,page:r}=this.own,{rootRef:n,rootEl:i}=this.innerRefs;return i&&!r&&0!==r&&(this.getParent().scrollTop=0),w.createElement(t,tp({},this.rest,{prefix:"scroller",innerRef:n}))}load(){let{page:e=0}=this.own;this.fire("onPageChange",{page:e+1})}getParent(){let{getParent:e}=this.own,{rootEl:t}=this.innerRefs;return e(t)}handleScroll(e){if(!this.own.hasMore)return;let{scrollTop:t,clientHeight:r,scrollHeight:n}=e.target;t+r>n-20&&this.load()}handleAfterMount(){this.getParent().addEventListener("scroll",this.handleScroll)}handleAfterRender(){if(!this.own.hasMore)return;let{clientHeight:e,scrollHeight:t}=this.getParent();e<t||this.load()}}).prototype,"renderComponent",[Gs,Ws,Xs,$s],Object.getOwnPropertyDescriptor(ep.prototype,"renderComponent"),ep.prototype),rp(ep.prototype,"handleScroll",[Js],Object.getOwnPropertyDescriptor(ep.prototype,"handleScroll"),ep.prototype),rp(ep.prototype,"handleAfterMount",[Zs],Object.getOwnPropertyDescriptor(ep.prototype,"handleAfterMount"),ep.prototype),rp(ep.prototype,"handleAfterRender",[Qs],Object.getOwnPropertyDescriptor(ep.prototype,"handleAfterRender"),ep.prototype),ep);var ip,op,ap,lp,sp,pp,cp,dp,up;function hp(){return(hp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fp(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let mp=(ip=w.pure(!1),op=w.props({group:"own",include:["columns","infinite","data","page","sort","innerSort","renderColumn","renderCell","onSortChange","onRowClick"]}),ap=w.defaults({columns:[],data:[],sort:{},renderColumn:e=>e,renderCell:e=>e}),lp=w.innerRefs("body","root"),sp=w.types({columns:kt.array,infinite:kt.bool,data:kt.array,sort:kt.exact({sort:kt.string,order:kt.string}),innerSort:kt.bool,renderColumn:kt.func,renderCell:kt.func,onSortChange:kt.func,onRowClick:kt.func}),pp=w.bind(),cp=w.bind(),dp=w.bind(),fp((up=class extends w.Component{renderComponent(){let{data:e,infinite:t,page:r}=this.own;if(t){let t=e.length;return this.data=e.slice(0,60+30*(r||0)),w.createElement(np,hp({},this.rest,{prefix:"table",page:r,hasMore:this.data.length<t,onClick:this.handleClick}),this.renderTable())}return this.data=e,w.createElement("div",hp({},this.rest,{prefix:"table"}),this.renderTable())}renderTable(){return w.createElement("table",{prefix:"table__table"},this.renderHeader(),this.renderBody())}renderHeader(){let{columns:e,renderColumn:t}=this.own;return e=e.map((e=>{let{key:r,text:n,sortable:i}=e;return w.createElement("td",{prefix:"table__column",key:r},w.createElement("div",{prefix:"table__column-content"},w.createElement("div",{prefix:"table__column-text"},t(n,e)),i&&this.renderColumnDropdown(e)))})),w.createElement("thead",{prefix:"table__header"},w.createElement("tr",{prefix:"table__header-row"},e))}renderColumnDropdown(e){let t,{sort:r,order:n}=this.own.sort,{key:i}=e,o=[{key:i+":asc",icon:"sort-ascending",text:"По возрастанию"},{key:i+":desc",icon:"sort-descending",text:"По убыванию"}];return i===r&&(t=i+":"+n),w.createElement(oi,{prefix:"table__column-dropdown",onPopoverRequestClose:this.handleRequestClose},w.createElement(gi,{prefix:"table__column-menu",orientation:"vertical",items:o,value:t,onChange:this.handleColumnChange}))}renderBody(){let e,{columns:t,innerSort:r,renderCell:n}=this.own,{bodyRef:i}=this.innerRefs,o=r?this.getSortedData():this.data,a=[];for(let r=0;r<o.length;r++){let i=o[r],l=("object"==typeof i?i.key:r)+"";a[r]=w.createElement("tr",{prefix:"table__row","record-key":l,key:l},e=[]);for(let r=0;r<t.length;r++){let{key:o,render:a}=t[r];e[r]=w.createElement("td",{prefix:"table__cell",key:r},n(a?a(i):i[o],i,t[r]))}}return w.createElement("tbody",{prefix:"table__body",innerRef:i},a)}handleColumnChange(e){let{event:t,value:r}=e,[n,i]=r.split(":");this.requestClose=!0,this.fire("onSortChange",{event:t,values:{sort:n,order:i}})}handleClick({target:e}){let{bodyEl:t}=this.innerRefs,{documentElement:r}=document;for(;e!==t&&e!==r;){if("TR"===e.tagName){let t=e.getAttribute("record-key");t&&this.fire("onRowClick",{recordKey:+t})}e=e.parentNode}}handleRequestClose(){if(this.requestClose)return this.requestClose=!1,!0}getSortedData(){let{data:e}=this,{sort:t,order:r}=this.own.sort,n="asc"===r?1:-1;return[].concat(e).sort(((e,r)=>(e[t]>r[t]?1:-1)*n))}}).prototype,"renderComponent",[ip,op,ap,lp,sp],Object.getOwnPropertyDescriptor(up.prototype,"renderComponent"),up.prototype),fp(up.prototype,"handleColumnChange",[pp],Object.getOwnPropertyDescriptor(up.prototype,"handleColumnChange"),up.prototype),fp(up.prototype,"handleClick",[cp],Object.getOwnPropertyDescriptor(up.prototype,"handleClick"),up.prototype),fp(up.prototype,"handleRequestClose",[dp],Object.getOwnPropertyDescriptor(up.prototype,"handleRequestClose"),up.prototype),up);var gp,yp,bp,vp;function Op(){return(Op=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cp(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let kp=(gp=w.props({group:"own",include:["data","dataKey"]}),yp=w.types({data:kt.arrayOf(kt.operation),dataKey:kt.number}),bp=w.bind(),Cp((vp=class extends w.Component{renderComponent(){let{data:e}=this.own;return w.createElement("div",Op({},this.rest,{prefix:"operation-list"}),e.map(this.renderOperation))}renderOperation(e,t){let{key:r,name:n,id:i,machine:o,items:a,tools:l,materials:s}=e;return w.createElement("div",{prefix:"operation-list__operation",key:r},this.renderLine("operation","А"+(t+1),n+" "+i),this.renderLine("machine","Б",o.name+" "+o.id),a.map(((e,t)=>this.renderLine("item","О"+(t+1),e.text))),this.renderLine("tool","Т",l.map((e=>e.name+" "+e.grade)).join(", ")+"."),this.renderLine("material","М",s.map((e=>e.name+" "+e.grade)).join(", ")+"."))}renderLine(e,t,r){return r?w.createElement("div",{prefix:"operation-list__line",modifiers:{[e]:!0},key:t},w.createElement("div",{prefix:"operation-list__mark"},t),w.createElement("div",{prefix:"operation-list__text"},r)):null}}).prototype,"renderComponent",[gp,yp],Object.getOwnPropertyDescriptor(vp.prototype,"renderComponent"),vp.prototype),Cp(vp.prototype,"renderOperation",[bp],Object.getOwnPropertyDescriptor(vp.prototype,"renderOperation"),vp.prototype),vp);function wp(){return(wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let xp=[{key:"id",text:"Номер",sortable:!0},{key:"name",text:"Название",sortable:!0},{key:"shape",text:"Тип",sortable:!0},{key:"grade",text:"Марка",sortable:!0},{key:"size",text:"Размер",sortable:!0},{key:"amount",text:"Кол-во",sortable:!0,render:e=>e.amount+" "+e.unit}];class jp extends w.Component{renderComponent(){return w.createElement(mp,wp({},this.rest,{prefix:"material-table",columns:xp,innerSort:!0}))}}function Ep(){return(Ep=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Pp=[{key:"id",text:"Номер",sortable:!0},{key:"name",text:"Название",sortable:!0},{key:"grade",text:"Обозначение",sortable:!0},{key:"count",text:"Кол-во",sortable:!0,render:e=>e.count+" "+e.unit}];class _p extends w.Component{renderComponent(){return w.createElement(mp,Ep({},this.rest,{prefix:"tool-table",columns:Pp,innerSort:!0}))}}var zp,Dp,Rp,Tp,Sp,Mp,Ap,Ip,Fp,Np;function qp(){return(qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vp(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Kp=[{key:"scalePlus",icon:"plus-circle-outline",title:"Увеличить масштаб"},{key:"scaleMinus",icon:"minus-circle-outline",title:"Уменьшить масштаб"},{key:"scaleFit",icon:"fit-to-page-outline",title:"Подогнать по размеру окна"},{key:"rotateLeft",icon:"rotate-left",title:"Повернуть против часовой стрелки"},{key:"rotateRight",icon:"rotate-right",title:"Повернуть по часовой стрелке"},{key:"flipHorizontal",icon:"flip-horizontal",title:"Отразить горизонтально"},{key:"flipVertical",icon:"flip-vertical",title:"Отразить вертикально"}],Yp=(zp=w.props({group:"own",include:"src"}),Dp=w.innerRefs("content","image"),Rp=w.state((()=>({loading:!0}))),Tp=w.types({src:kt.string.isRequired}),Sp=w.bind(),Mp=w.bind(),Ap=w.bind(),Ip=w.bind(),Fp=w.bind(),Vp((Np=class extends w.Component{renderComponent(){return w.createElement(bn,qp({},this.rest,{prefix:"image-popup",resize:"all",onResize:this.handleResize}),this.renderImageViewer)}renderImageViewer(){let e,t,r,{src:n}=this.own,{loading:i}=this.state,{imageRef:o,contentRef:a}=this.innerRefs;return i?(t=w.createElement(Ut,{prefix:"image-popup__loading-overlay"}),r=!0):e=this.getStyle(),w.createElement(Pa,{onResize:this.handleResize},(l=>w.createElement("div",qp({},l,{prefix:"image-popup__viewer"}),w.createElement("div",{prefix:"image-popup__content",innerRef:a,onWheel:this.handleWheel},w.createElement("img",{prefix:"image-popup__image",modifiers:{loading:i},src:n,style:e,innerRef:o,onLoad:this.handleLoad}),t),w.createElement("div",{prefix:"image-popup__footer"},w.createElement(gi,{prefix:"image-popup__menu",orientation:"horizontal",items:Kp,disabled:r,onChange:this.handleMenuChange})))))}handleLoad(){let{naturalWidth:e,naturalHeight:t}=this.innerRefs.imageEl;this.setState({loading:!1,nw:e,nh:t,rotate:0,scale:.9,flipH:1,flipV:1})}handleMenuChange(e){this.setState(Object.assign({},this.state,this[e.value](this.state)))}handleResize(){Object.assign(this.innerRefs.imageEl.style,this.getStyle())}handleWheel(e){let{deltaY:t}=e,{state:r}=this;return this.setState(Object.assign({},r,this["scale"+(t>0?"Plus":"Minus")](r)))}getStyle(){let e,t,r,{clientWidth:n,clientHeight:i}=this.innerRefs.contentEl,{nw:o,nh:a,rotate:l,scale:s,flipH:p,flipV:c}=this.state;return l%180?(e=n/a,t=i/o):(e=n/o,t=i/a),r=e>t?o*t*s-8:o*e*s-8,{width:r+"px",transform:["scale("+p+","+c+")","rotate("+l+"deg)"].join(" ")}}scalePlus(e){let t=Math.round(10*(e.scale+.1))/10;return t>5&&(t=5),{scale:t}}scaleMinus(e){let t=Math.round(10*(e.scale-.1))/10;return t<.2&&(t=.2),{scale:t}}scaleFit(){return{scale:1}}rotateLeft(e){return{rotate:Math.round(e.rotate-90*e.flipH*e.flipV)}}rotateRight(e){return{rotate:Math.round(e.rotate+90*e.flipH*e.flipV)}}flipHorizontal(e){return{flipH:-1*e.flipH}}flipVertical(e){return{flipV:-1*e.flipV}}}).prototype,"renderComponent",[zp,Dp,Rp,Tp],Object.getOwnPropertyDescriptor(Np.prototype,"renderComponent"),Np.prototype),Vp(Np.prototype,"renderImageViewer",[Sp],Object.getOwnPropertyDescriptor(Np.prototype,"renderImageViewer"),Np.prototype),Vp(Np.prototype,"handleLoad",[Mp],Object.getOwnPropertyDescriptor(Np.prototype,"handleLoad"),Np.prototype),Vp(Np.prototype,"handleMenuChange",[Ap],Object.getOwnPropertyDescriptor(Np.prototype,"handleMenuChange"),Np.prototype),Vp(Np.prototype,"handleResize",[Ip],Object.getOwnPropertyDescriptor(Np.prototype,"handleResize"),Np.prototype),Vp(Np.prototype,"handleWheel",[Fp],Object.getOwnPropertyDescriptor(Np.prototype,"handleWheel"),Np.prototype),Np);var Hp,Lp,Up,Bp,Gp,Wp,Xp,$p;function Jp(){return(Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Zp(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Qp=[{key:"todo",text:"Выполнить"},{key:"doing",text:"Выполняется"},{key:"done",text:"Выполнено"}],ec=[{key:"drawing",text:"Чертеж"},{key:"assembly",text:"Сборка"}],tc=[{key:"operations",text:"Операции"},{key:"materials",text:"Материалы"},{key:"tools",text:"Инструменты"}],rc={operations:"Операции не найдены!",materials:"Материалы не найдены!",tools:"Инструменты не найдены!"},nc=(Hp=w.props({group:"own",include:["activeAttachment","taskKey","task","data","dataKey","onLoad","onTasksUpdate","onActiveAttachmentChange"]},{group:"attachment",include:["data","sort","onSortChange"]},{group:"tabBar",include:"onAttachmentChange:onItemClick"}),Lp=w.defaults({resize:["left","right","top","bottom"]}),Up=w.types({activeAttachment:kt.oneOf(["operations","materials","tools"]),taskKey:kt.number,task:kt.task,data:kt.oneOfType([kt.arrayOf(kt.operation),kt.arrayOf(kt.material),kt.arrayOf(kt.tool),kt.loading]),dataKey:kt.number,onLoad:kt.func,onTasksUpdate:kt.func,onActiveAttachmentChange:kt.func}),Bp=w.bind(),Gp=w.bind(),Wp=w.bind(),Xp=w.bind(),Zp(($p=class extends w.Component{renderComponent(){let{task:e,activeAttachment:t}=this.own,{partId:r,partName:n,state:i,comment:o,attachments:a,loading:l}=e,s=[],p={};return["drawing","assembly"].forEach((e=>{a[e]||0===a[e]||s.push(e)})),l?p.disabled=!0:p.value=i,w.createElement(bn,Jp({},this.rest,{prefix:"task-detail-popup",title:"Задача для "+r+" ("+n+")"}),(()=>w.createElement(w.Fragment,null,w.createElement("div",{prefix:"task-detail-popup__toolbar"},w.createElement(gi,Jp({},p,{prefix:"task-detail-popup__state-menu",orientation:"horizontal",items:Qp,onChange:this.handleStateChange})),w.createElement("div",{prefix:"task-detail-popup__separator"}),w.createElement(gi,{prefix:"task-detail-popup__file-menu",orientation:"horizontal",items:ec,value:s,onChange:this.handleFileOpen})),w.createElement("div",{prefix:"task-detail-popup__comment"},o),w.createElement(gi,Jp({},this.tabBar,{prefix:"task-detail-popup__tab-bar",orientation:"horizontal",items:tc,value:t,onChange:this.handleActiveAttachmentChange})),w.createElement("div",{prefix:"task-detail-popup__attachment"},this.renderAttachment()))))}renderAttachment(){let{data:e,dataKey:t,activeAttachment:r}=this.own;if("number"!=typeof t)return this.renderNotFoundOverlay();if(!e)return null;if(e===w.loading)return w.createElement(Ut,{prefix:"task-detail-popup__loading-overlay"});if(0===e.length)return this.renderNotFoundOverlay();switch(r){case"operations":return w.createElement(kp,Jp({},this.attachment,{prefix:"task-detail-popup__operation-list"}));case"materials":return w.createElement(jp,Jp({},this.attachment,{prefix:"task-detail-popup__material-table"}));case"tools":return w.createElement(_p,Jp({},this.attachment,{prefix:"task-detail-popup__tool-table"}))}}renderNotFoundOverlay(){let{activeAttachment:e}=this.own;return w.createElement($l,{prefix:"task-detail-popup__not-found-overlay",text:rc[e]})}handleAfterRender(){let{data:e,dataKey:t,activeAttachment:r}=this.own;"number"!=typeof t||e||this.fire("onLoad",{dataKey:t,activeAttachment:r})}handleStateChange(e){let{task:t}=this.own,{value:r}=e;this.fire("onTasksUpdate",{values:[Object.assign({},t,{state:r})]})}handleActiveAttachmentChange({value:e}){this.fire("onActiveAttachmentChange",{activeAttachment:e})}handleFileOpen(e){let t,{partId:r,partName:n,attachments:i}=this.own.task,{value:o}=e;switch(o){case"drawing":t="Чертеж детали ";break;case"assembly":t="Чертеж сборки "}bn.open({key:"imageViewer",title:t+r+" ("+n+")",src:"static/"+o+"/"+i[o]+".png",component:Yp})}}).prototype,"renderComponent",[Hp,Lp,Up],Object.getOwnPropertyDescriptor($p.prototype,"renderComponent"),$p.prototype),Zp($p.prototype,"handleAfterRender",[Bp],Object.getOwnPropertyDescriptor($p.prototype,"handleAfterRender"),$p.prototype),Zp($p.prototype,"handleStateChange",[Gp],Object.getOwnPropertyDescriptor($p.prototype,"handleStateChange"),$p.prototype),Zp($p.prototype,"handleActiveAttachmentChange",[Wp],Object.getOwnPropertyDescriptor($p.prototype,"handleActiveAttachmentChange"),$p.prototype),Zp($p.prototype,"handleFileOpen",[Xp],Object.getOwnPropertyDescriptor($p.prototype,"handleFileOpen"),$p.prototype),$p);const ic=w.connect(((e,t)=>{let{activeAttachment:r}=e.app,n=e.tasks.all.find((e=>e.key===t.taskKey)),i=n.attachments[r],o=e[r].all[i],a={};switch(r){case"operations":a.onLoad=Ke.readOperations;break;case"materials":a.sort=e.materials.sort,a.onLoad=be.readMaterials,a.onSortChange=be.setSort;break;case"tools":a.sort=e.tools.sort,a.onLoad=bt.readTools,a.onSortChange=bt.setSort}return Object.assign({activeAttachment:r,data:o,dataKey:i,task:n,onTasksUpdate:ut.updateTasks,onActiveAttachmentChange:ne.setActiveAttachment},a)}),nc);var oc,ac,lc,sc,pc,cc,dc,uc;function hc(){return(hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fc(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let mc=[{key:"checkbox"},{key:"partId",text:"Номер",sortable:!0},{key:"partName",text:"Название",sortable:!0},{key:"comment",text:"Комментарий",sortable:!0},{key:"state",text:"Состояние",sortable:!0},{key:"created",text:"Создано",sortable:!0}],gc={todo:"Выполнить",doing:"Выполняется",done:"Выполнено"},yc=(oc=w.props({group:"own",include:["selected","onSelectionChange","onPageChange"]}),ac=w.types({selected:kt.arrayOf(kt.number),onSelectionChange:kt.func,onPageChange:kt.func}),lc=w.bind(),sc=w.bind(),pc=w.bind(),cc=w.bind(),dc=w.bind(),fc((uc=class extends w.Component{renderComponent(){return w.createElement(mp,hc({},this.rest,{prefix:"task-list-view",columns:mc,infinite:!0,renderColumn:this.renderColumn,renderCell:this.renderCell,onRowClick:this.handleRowClick,onPageChange:this.handlePageChange}))}renderColumn(e,t){let{key:r}=t,{selected:n}=this.own;return"checkbox"===r?w.createElement("div",{prefix:"task-list-view__checkbox-column"},w.createElement(Sr,{prefix:"task-list-view__checkbox",value:!!n.length,"data-key":"all",onClick:this.stopPropagation,onChange:this.handleSelectionChange})):e}renderCell(e,t,r){switch(r.key){case"checkbox":let{selected:r}=this.own;return w.createElement("div",{prefix:"task-list-view__checkbox-cell",modifiers:{type:t.type}},w.createElement(Sr,{prefix:"task-list-view__checkbox",value:r.includes(t.key),"data-key":t.key+"",onClick:this.stopPropagation,onChange:this.handleSelectionChange}));case"state":return t.loading?"Изменение...":gc[e];case"created":return w.formatDate(new Date(e),"d.m.Y");default:return e}}handleRowClick({recordKey:e}){let{key:t}=this.rest.data.find((t=>t.key===e));bn.open({key:"task",component:ic,taskKey:t})}stopPropagation(e){e.stopPropagation()}handleSelectionChange({event:e,value:t}){let{key:r}=e.currentTarget.parentNode.dataset,{selected:n}=this.own,{data:i}=this.rest;"all"===r?n=t?i.map((e=>e.key)):[]:(r=+r,n=t?n.concat([r]):n.filter((e=>e!==r))),this.fire("onSelectionChange",{selected:n})}handlePageChange({page:e}){this.fire("onPageChange",{type:"list",page:e})}}).prototype,"renderComponent",[oc,ac],Object.getOwnPropertyDescriptor(uc.prototype,"renderComponent"),uc.prototype),fc(uc.prototype,"renderColumn",[lc],Object.getOwnPropertyDescriptor(uc.prototype,"renderColumn"),uc.prototype),fc(uc.prototype,"renderCell",[sc],Object.getOwnPropertyDescriptor(uc.prototype,"renderCell"),uc.prototype),fc(uc.prototype,"handleRowClick",[pc],Object.getOwnPropertyDescriptor(uc.prototype,"handleRowClick"),uc.prototype),fc(uc.prototype,"handleSelectionChange",[cc],Object.getOwnPropertyDescriptor(uc.prototype,"handleSelectionChange"),uc.prototype),fc(uc.prototype,"handlePageChange",[dc],Object.getOwnPropertyDescriptor(uc.prototype,"handlePageChange"),uc.prototype),uc);var bc,vc,Oc,Cc,kc;function wc(){return(wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let xc=(bc=w.pure(!1),vc=w.props({group:"own",include:["columnCount","data","infinite","page","renderCell"]}),Oc=w.defaults({columnCount:3,data:[],renderCell:e=>e.text}),Cc=w.types({columnCount:kt.number,data:kt.array,infinite:kt.bool,page:kt.number,renderCell:kt.func}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((kc=class extends w.Component{renderComponent(){let e,t,r,n,{columnCount:i,data:o,infinite:a,page:l,renderCell:s}=this.own,p=[];if(a){let e=o.length;o=o.slice(0,30+30*(l||0)),t=w.createElement(np,wc({},this.rest,{prefix:"grid",page:l,hasMore:o.length<e}),p)}else t=w.createElement("div",wc({},this.rest,{prefix:"grid"}),p);for(let e=0;e<o.length;e++)n=e%i,n||p.push(w.createElement("div",{prefix:"grid__row",key:p.length},r=[])),r.push(w.createElement("div",{prefix:"grid__cell",key:r.length},s(o[e],e)));e=p.length*i-o.length;for(let t=0;t<e;t++)r.push(w.createElement("div",{prefix:"grid__rest",key:r.length}));return t}}).prototype,"renderComponent",[bc,vc,Oc,Cc],Object.getOwnPropertyDescriptor(kc.prototype,"renderComponent"),kc.prototype),kc);var jc,Ec,Pc;function _c(){return(_c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let zc=(jc=w.props({group:"own",include:["task","taskKey","title"]}),Ec=w.types({task:kt.task.isRequired,taskKey:kt.number.isRequired,title:kt.string}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Pc=class extends w.Component{renderComponent(){let{task:e,title:t}=this.own,{partId:r,partName:n}=e;return t=t+" для "+r+" ("+n+")",w.createElement(Il,_c({},this.rest,{prefix:"attachment-popup",resize:"all",title:t}))}}).prototype,"renderComponent",[jc,Ec],Object.getOwnPropertyDescriptor(Pc.prototype,"renderComponent"),Pc.prototype),Pc);var Dc,Rc,Tc;function Sc(){return(Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Mc=(Dc=w.props({group:"rest",include:"data"},{group:"table",include:["data","sort","onSortChange"]}),Rc=w.types({data:kt.oneOfType([kt.arrayOf(kt.tool),kt.loading]),sort:kt.exact({sort:kt.string,order:kt.string}),onSortChange:kt.func}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Tc=class extends w.Component{renderComponent(){return w.createElement(zc,Sc({},this.rest,{prefix:"tool-popup",title:"Инструменты"}),(()=>w.createElement(_p,Sc({},this.table,{prefix:"tool-popup__table"}))))}}).prototype,"renderComponent",[Dc,Rc],Object.getOwnPropertyDescriptor(Tc.prototype,"renderComponent"),Tc.prototype),Tc);const Ac=w.connect(((e,t)=>{let{all:r,sort:n}=e.tools,i=e.tasks.all.find((e=>e.key===t.taskKey)),o=i.attachments.tools;return{sort:n,task:i,dataKey:o,data:r[o],onLoad:bt.readTools,onSortChange:bt.setSort}}),Mc);var Ic,Fc;function Nc(){return(Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let qc=(Ic=w.props({group:"rest",include:"data"},{group:"table",include:["data","sort","onSortChange"]}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Fc=class extends w.Component{renderComponent(){return w.createElement(zc,Nc({},this.rest,{prefix:"material-popup",title:"Материалы"}),w.createElement(jp,Nc({},this.table,{prefix:"material-popup__table"})))}}).prototype,"renderComponent",[Ic],Object.getOwnPropertyDescriptor(Fc.prototype,"renderComponent"),Fc.prototype),Fc);const Vc=w.connect(((e,t)=>{let{all:r,sort:n}=e.materials,i=e.tasks.all.find((e=>e.key===t.taskKey)),o=i.attachments.materials;return{task:i,dataKey:o,data:r[o],sort:n,onLoad:be.readMaterials,onSortChange:be.setSort}}),qc);function Kc(){return(Kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class Yc extends w.Component{renderComponent(){let{data:e}=this.rest;return w.createElement(zc,Kc({},this.rest,{prefix:"operation-popup",title:"Операции"}),(()=>w.createElement(kp,{prefix:"operation-popup__list",data:e})))}}const Hc=w.connect(((e,t)=>{let r=e.tasks.all.find((e=>e.key===t.taskKey)),n=r.attachments.operations;return{task:r,dataKey:n,data:e.operations.all[n],onLoad:Ke.readOperations}}),Yc);var Lc,Uc,Bc,Gc,Wc;function Xc(){return(Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $c(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Jc={todo:"Выполнить",doing:"Выполняется",done:"Выполнено"},Zc=["drawing","assembly"],Qc=["operations","materials","tools"],ed=[{key:"attachment:drawing",text:"Чертеж"},{key:"attachment:assembly",text:"Сборка"}],td=[{key:"attachment:operations",text:"Операции"},{key:"attachment:materials",text:"Материалы"},{key:"attachment:tools",text:"Инструменты"}],rd=[{key:"state:todo",text:Jc.todo},{key:"state:doing",text:Jc.doing},{key:"state:done",text:Jc.done}],nd=(Lc=w.props({group:"own",include:["task","showState","handleProps","selected","onSelectionChange","onTasksUpdate"]},{group:"checkbox",include:"selected:value"}),Uc=w.types({task:kt.task,showState:kt.bool,handleProps:kt.object,selected:kt.bool,onSelectionChange:kt.func,onTasksUpdate:kt.func}),Bc=w.bind(),Gc=w.bind(),$c((Wc=class extends w.Component{renderComponent(){let{handleProps:e,task:t}=this.own,{partId:r,partName:n,comment:i,loading:o,state:a,type:l,created:s}=t,{showState:p}=this.own,c=[{key:"constr",text:"КД",items:ed},{key:"tech",text:"ТД",items:td},{key:"attachment:task",icon:"dots-horizontal"}];return p&&c.unshift({modifiers:{state:!0},key:"state",text:o?"Изменение...":Jc[a],items:rd}),w.createElement("div",Xc({},this.rest,{prefix:"task-card",modifiers:{type:l}}),w.createElement("div",Xc({},e,{prefix:"task-card__header",modifiers:{handle:!!e}}),w.createElement(Sr,Xc({},this.checkbox,{prefix:"task-card__checkbox","data-key":t.key+"",onChange:this.handleSelectionChange})),w.createElement("div",{prefix:"task-card__title"},r+" ("+n+")")),w.createElement("div",{prefix:"task-card__comment"},i),w.createElement("div",{prefix:"task-card__footer"},w.createElement(gi,{prefix:"task-card__menu",orientation:"horizontal",items:c,onChange:this.handleMenuChange,value:this.getValue()}),w.createElement("div",{prefix:"task-card__date"},new Date(s).toLocaleDateString())),o&&w.createElement(Ut,{prefix:"task-card__loading-overlay"}))}getValue(){let{attachments:e,state:t}=this.own.task,r=[],n=[];return Zc.forEach((t=>{e[t]||0===e[t]||r.push("attachment:"+t)})),r.length===Zc.length&&r.push("constr"),Qc.forEach((t=>{e[t]||0===e[t]||n.push("attachment:"+t)})),n.length===Qc.length&&n.push("tech"),["state:"+t].concat(r,n)}getTitle(){let{partId:e,partName:t}=this.own.task;return e+" ("+t+")"}handleMenuChange(e){let[t,r]=e.value.split(":"),{task:n}=this.own,{key:i}=n;switch(t){case"state":this.fire("onTasksUpdate",{values:[Object.assign({},n,{state:r})]});break;case"attachment":switch(r){case"tools":bn.open({component:Ac,key:r,taskKey:i});break;case"materials":bn.open({component:Vc,key:r,taskKey:i});break;case"operations":bn.open({component:Hc,key:r,taskKey:i});break;case"task":bn.open({component:ic,key:r,taskKey:i});break;case"drawing":bn.open({component:Yp,key:"imageViewer",title:"Чертеж детали "+this.getTitle(),src:"static/drawing/"+n.attachments.drawing+".png"});break;case"assembly":bn.open({component:Yp,key:"imageViewer",title:"Чертеж сборки "+this.getTitle(),src:"static/assembly/"+n.attachments.assembly+".png"})}}}handleSelectionChange({event:e,value:t}){let{key:r}=e.currentTarget.parentNode.dataset;r&&this.fire("onSelectionChange",{key:+r,value:t})}}).prototype,"renderComponent",[Lc,Uc],Object.getOwnPropertyDescriptor(Wc.prototype,"renderComponent"),Wc.prototype),$c(Wc.prototype,"handleMenuChange",[Bc],Object.getOwnPropertyDescriptor(Wc.prototype,"handleMenuChange"),Wc.prototype),$c(Wc.prototype,"handleSelectionChange",[Gc],Object.getOwnPropertyDescriptor(Wc.prototype,"handleSelectionChange"),Wc.prototype),Wc);var id,od,ad,ld,sd,pd,cd,dd;function ud(){return(ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hd(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let fd=(id=w.props({group:"own",include:["selected","onSelectionChange","onPageChange","onTasksUpdate"]},{group:"card",include:"onTasksUpdate"}),od=w.types({selected:kt.arrayOf(kt.number),onSelectionChange:kt.func,onPageChange:kt.func,onTasksUpdate:kt.func}),ad=w.bind(),ld=w.bind(),sd=w.bind(),pd=w.bind(),cd=w.bind(),hd((dd=class extends w.Component{renderComponent(){return w.createElement(Pa,{onResize:this.handleResize},this.renderChildren)}renderChildren(e){let{mode:t}=e;return null===t?w.createElement("div",ud({},e,{prefix:"task-grid-view"})):w.createElement(xc,ud({},this.rest,e,{prefix:"task-grid-view",infinite:!0,columnCount:t,renderCell:this.renderCell,onPageChange:this.handlePageChange}))}renderCell(e){let t=!!this.own.selected.includes(e.key);return w.createElement(nd,ud({},this.card,{showState:!0,prefix:"task-grid-view__card",task:e,selected:t,onSelectionChange:this.handleSelectionChange}))}handleResize(e){let{clientWidth:t}=e,r=Math.floor(t/380);return r||(r+=1),r}handleSelectionChange(e){let{selected:t}=this.own,{key:r,value:n}=e;t=n?t.concat([r]):t.filter((e=>e!==r)),this.fire("onSelectionChange",{selected:t})}handlePageChange({page:e}){this.fire("onPageChange",{type:"grid",page:e})}}).prototype,"renderComponent",[id,od],Object.getOwnPropertyDescriptor(dd.prototype,"renderComponent"),dd.prototype),hd(dd.prototype,"renderChildren",[ad],Object.getOwnPropertyDescriptor(dd.prototype,"renderChildren"),dd.prototype),hd(dd.prototype,"renderCell",[ld],Object.getOwnPropertyDescriptor(dd.prototype,"renderCell"),dd.prototype),hd(dd.prototype,"handleResize",[sd],Object.getOwnPropertyDescriptor(dd.prototype,"handleResize"),dd.prototype),hd(dd.prototype,"handleSelectionChange",[pd],Object.getOwnPropertyDescriptor(dd.prototype,"handleSelectionChange"),dd.prototype),hd(dd.prototype,"handlePageChange",[cd],Object.getOwnPropertyDescriptor(dd.prototype,"handlePageChange"),dd.prototype),dd);var md,gd,yd,bd,vd,Od,Cd,kd,wd,xd=r(8265);function jd(){return(jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ed(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Pd=[{key:"todo",text:"Выполнить"},{key:"doing",text:"Выполняется"},{key:"done",text:"Выполнено"}],_d=(md=w.props({group:"own",include:["data","pages","selected","onTasksUpdate","onSelectionChange","onPageChange"]}),gd=w.defaults({pages:{}}),yd=w.types({data:kt.arrayOf(kt.task),pages:kt.shape({todo:kt.number,doing:kt.number,done:kt.number}),selected:kt.arrayOf(kt.number),onTasksUpdate:kt.func,onSelectionChange:kt.func,onPageChange:kt.func}),bd=w.bind(),vd=w.bind(),Od=w.bind(),Cd=w.bind(),kd=w.bind(),Ed((wd=class extends w.Component{renderComponent(){return this.data=this.groupData(),w.createElement("div",jd({},this.rest,{prefix:"task-column-view"}),w.createElement(xd.Z5,{onDragEnd:this.handleDragEnd},Pd.map(this.renderColumn)))}renderColumn(e){let t,{key:r,text:n}=e,{pages:i}=this.own,{data:o}=this,{length:a}=o[r],l=i[r];return o[r].length&&(o=o[r].slice(0,20+10*(l||0)),t=o.map(this.renderCell)),w.createElement("div",{prefix:"task-column-view__column",key:r},w.createElement("div",{prefix:"task-column-view__column-header"},n),w.createElement(np,{prefix:"task-column-view__scroller",page:l,hasMore:o.length<a,onPageChange:e=>this.handlePageChange({page:e.page,column:r})},w.createElement(xd.bK,{droppableId:r},(e=>w.createElement("div",jd({},e.droppableProps,{prefix:"task-column-view__column-body",innerRef:e.innerRef}),t,e.placeholder)))))}renderCell(e,t){let{selected:r}=this.own,n=e.key+"";return w.createElement(xd._l,{draggableId:n,index:t,key:n},(t=>w.createElement(nd,jd({},t.draggableProps,{prefix:"task-column-view__card",handleProps:t.dragHandleProps,innerRef:t.innerRef,task:e,selected:r.includes(e.key),onSelectionChange:this.handleSelectionChange}))))}groupData(){let{data:e}=this.own,t={todo:[],doing:[],done:[]};return e.forEach((e=>{t[e.state].push(e)})),t}handleDragEnd(e){let{source:t,destination:r}=e;if(r){let{data:e}=this,{droppableId:n,index:i}=t,{droppableId:o,index:a}=r,l=e[n][i];n===o&&i<=a&&a++;let s=e[o][a]||-1;this.fire("onTasksUpdate",{nextTask:s,values:[Object.assign({},l,{state:o})]})}}handleSelectionChange(e){let{key:t,value:r}=e,{selected:n}=this.own;n=r?n.concat([t]):n.filter((e=>e!==t)),this.fire("onSelectionChange",{selected:n})}handlePageChange({page:e,column:t}){let{pages:r}=this.own,n=Object.assign({},r,{[t]:e});this.fire("onPageChange",{type:"columns",page:n})}}).prototype,"renderComponent",[md,gd,yd],Object.getOwnPropertyDescriptor(wd.prototype,"renderComponent"),wd.prototype),Ed(wd.prototype,"renderColumn",[bd],Object.getOwnPropertyDescriptor(wd.prototype,"renderColumn"),wd.prototype),Ed(wd.prototype,"renderCell",[vd],Object.getOwnPropertyDescriptor(wd.prototype,"renderCell"),wd.prototype),Ed(wd.prototype,"handleDragEnd",[Od],Object.getOwnPropertyDescriptor(wd.prototype,"handleDragEnd"),wd.prototype),Ed(wd.prototype,"handleSelectionChange",[Cd],Object.getOwnPropertyDescriptor(wd.prototype,"handleSelectionChange"),wd.prototype),Ed(wd.prototype,"handlePageChange",[kd],Object.getOwnPropertyDescriptor(wd.prototype,"handlePageChange"),wd.prototype),wd);var zd,Dd,Rd,Td,Sd;function Md(){return(Md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Ad=(zd=w.pure(!1),Dd=w.props({group:"own",include:["data","date","dayNames","firstDay","renderCell","renderEmptyCell"]}),Rd=w.defaults({dayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],firstDay:1,data:[],renderCell:e=>e.getDate(),renderEmptyCell:()=>null}),Td=w.types({data:kt.array,date:kt.instanceOf(Date).isRequired,dayNames:kt.array,firstDay:kt.number,renderCell:kt.func,renderEmptyCell:kt.func}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Sd=class extends w.Component{renderComponent(){return w.createElement("div",Md({},this.rest,{prefix:"month-grid"}),this.renderHeader(),this.renderBody())}renderHeader(){let{dayNames:e}=this.own,t=[];for(let r=0;r<7;r++)t[r]=w.createElement("div",{prefix:"month-grid__day-name",key:r},e[(r+1)%7]);return w.createElement("div",{prefix:"month-grid__header"},t)}renderBody(){let e,{date:t,data:r,firstDay:n,renderCell:i,renderEmptyCell:o}=this.own,a=t.getMonth(),l=new Date(t.getFullYear(),a,1),s=[],p=-l.getDay()+n+1;l.setDate(p>1?p-7:p);for(let t=0;t<6;t++){s.push(w.createElement("div",{prefix:"month-grid__row",key:t},e=[]));for(let t=0;t<7;t++){let n=l.getDate(),s=l.getMonth();e.push(s===a?w.createElement("div",{prefix:"month-grid__cell",key:t},i(l,r[n])):w.createElement("div",{prefix:"month-grid__empty-cell",key:t},o())),l.setDate(n+1)}}return w.createElement("div",{prefix:"month-grid__body"},s)}}).prototype,"renderComponent",[zd,Dd,Rd,Td],Object.getOwnPropertyDescriptor(Sd.prototype,"renderComponent"),Sd.prototype),Sd);var Id,Fd,Nd,qd,Vd,Kd,Yd,Hd;function Ld(){return(Ld=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ud(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Bd=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],Gd=(Id=w.props({group:"own",include:["data","date","selected","onPathChange","onSelectionChange"]}),Fd=w.defaults({selected:[]}),Nd=w.types({data:kt.arrayOf(kt.task),date:kt.instanceOf(Date),selected:kt.arrayOf(kt.number),onPathChange:kt.func,onSelectionChange:kt.func}),qd=w.bind(),Vd=w.bind(),Kd=w.bind(),Yd=w.bind(),Ud((Hd=class extends w.Component{renderComponent(){return w.createElement(Pa,{onResize:this.handleResize},this.renderChildren)}renderChildren(e){let{mode:t}=e,{date:r}=this.own;return null===t?w.createElement("div",Ld({},e,{prefix:"task-month-view"})):(this.groupedData=this.groupData(),w.createElement(Ad,Ld({},this.rest,e,{prefix:"task-month-view",date:r,renderCell:this.renderCell,onClick:this.handleClick,dayNames:"-"===t?void 0:t})))}renderCell(e){let t=e.getDate(),r=this.groupedData[t],{selected:n}=this.own;return w.createElement(w.Fragment,null,w.createElement("div",{prefix:"task-month-view__date-header","data-key":t},t),w.createElement("div",{prefix:"task-month-view__date-body"},r&&r.map((e=>w.createElement("div",{prefix:"task-month-view__task",modifiers:{type:e.type,state:e.state,selected:n.includes(e.key)},key:e.key,"data-task":e.key},w.createElement("div",{prefix:"task-month-view__part-name"},e.partId+" ("+e.partName+")"))))))}groupData(){let{data:e}=this.own,t={};return e.forEach((e=>{let r=new Date(e.created).getDate();(t[r]||(t[r]=[])).push(e)})),t}handleClick(e){let{key:t}=e.target.dataset;if(t){let{date:e}=this.own,r=w.formatDate(new Date(e.getFullYear(),e.getMonth(),+t),"Y-m-d");this.fire("onPathChange",{path:r})}else{let{task:t}=e.target.dataset;if(t){t=+t;let{key:r}=this.own.data.find((e=>e.key===t)),{ctrlKey:n}=e;if(n){let{selected:e}=this.own,r=!e.includes(t);e=r?e.concat([t]):e.filter((e=>e!==t)),this.fire("onSelectionChange",{selected:e})}else bn.open({key:"task",component:ic,taskKey:r})}}}handleResize(e){let{clientWidth:t}=e;return t<765?"-":Bd}}).prototype,"renderComponent",[Id,Fd,Nd],Object.getOwnPropertyDescriptor(Hd.prototype,"renderComponent"),Hd.prototype),Ud(Hd.prototype,"renderChildren",[qd],Object.getOwnPropertyDescriptor(Hd.prototype,"renderChildren"),Hd.prototype),Ud(Hd.prototype,"renderCell",[Vd],Object.getOwnPropertyDescriptor(Hd.prototype,"renderCell"),Hd.prototype),Ud(Hd.prototype,"handleClick",[Kd],Object.getOwnPropertyDescriptor(Hd.prototype,"handleClick"),Hd.prototype),Ud(Hd.prototype,"handleResize",[Yd],Object.getOwnPropertyDescriptor(Hd.prototype,"handleResize"),Hd.prototype),Hd);var Wd,Xd,$d,Jd,Zd,Qd,eu,tu,ru;function nu(){return(nu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function iu(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ou=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],au=[{key:"create",text:"Создать"},{key:"update",text:"Изменить"},{key:"destroy",text:"Удалить"}],lu=[{key:"todo",text:"Выполнить"},{key:"doing",text:"Выполняется"},{key:"done",text:"Выполнено"}],su=(Wd=w.props({group:"own",include:["data","date","onPathChange"]}),Xd=w.types({data:kt.arrayOf(kt.task),date:kt.instanceOf(Date),onPathChange:kt.func}),$d=w.bind(),Jd=w.bind(),Zd=w.bind(),Qd=w.bind(),eu=w.bind(),tu=w.bind(),iu((ru=class extends w.Component{renderComponent(){return w.createElement(Pa,{onResize:this.handleResize},this.renderChildren)}renderChildren(e){let{own:t}=this,{mode:r}=e;return null===r?w.createElement("div",nu({},e,{prefix:"task-year-view"})):(t.currentYear=t.date.getFullYear(),w.createElement(xc,nu({},this.rest,e,{prefix:"task-year-view",data:this.groupData(),renderCell:this.renderMonth,columnCount:r,onClick:this.handleClick})))}renderMonth(e,t){let{currentYear:r}=this.own;return w.createElement(w.Fragment,null,w.createElement("div",{prefix:"task-year-view__month-header","data-key":t+""},ou[t]),w.createElement("div",{prefix:"task-year-view__month-body"},w.createElement(Ad,{prefix:"task-year-view__month-grid",date:new Date(r,t,1),data:e,renderCell:this.renderCell})))}renderCell(e,t){let r=e.getMonth(),n=e.getDate(),i={prefix:"task-year-view__date","data-key":r+"-"+n,children:w.createElement(w.Fragment,null,n,this.renderDots(t))};return t?w.createElement(Vi,{trigger:e=>w.createElement("div",nu({},i,e)),data:t},this.renderTooltip):w.createElement("div",i)}renderTooltip({data:e}){return w.createElement("div",{prefix:"task-year-view__tooltip"},au.map((t=>this.renderTooltipItem(t,e[t.key]))),w.createElement("div",{prefix:"task-year-view__tooltip-divider"}),lu.map((t=>this.renderTooltipItem(t,e[t.key]))))}renderTooltipItem(e,t){return w.createElement("div",{prefix:"task-year-view__tooltip-item",key:e.key},w.createElement("div",{prefix:"task-year-view__tooltip-item-text"},e.text),w.createElement("div",{prefix:"task-year-view__tooltip-item-value"},t||0))}renderDots(e={}){return w.createElement("div",{prefix:"task-year-view__dots"},["create","update","destroy"].map((t=>e[t]?w.createElement("div",{prefix:"task-year-view__dot",key:t,modifiers:{[t]:!0}}):null)))}groupData(){let{currentYear:e,data:t}=this.own,r=[];for(let e=0;e<12;e++)r[e]=[];return t.forEach((t=>{let n=new Date(t.created),i=n.getFullYear();if(e===i){let e=n.getMonth(),i=n.getDate();e=r[e],i=e[i]||(e[i]={}),i[t.state]=(i[t.state]||0)+1,i[t.type]=(i[t.type]||0)+1}})),r}handleClick(e){let{key:t}=e.target.dataset;if(t){let e,{date:r}=this.own;t=t.split("-"),r=new Date(r.getFullYear(),+t[0],t[1]?+t[1]:1),e=1===t.length?w.formatDate(r,"Y-m"):w.formatDate(r,"Y-m-d"),this.fire("onPathChange",{path:e})}}handleResize(e){let{clientWidth:t}=e,r=Math.floor(t/280)||1;return 5===r?r=4:r>6&&(r=6),r}}).prototype,"renderComponent",[Wd,Xd],Object.getOwnPropertyDescriptor(ru.prototype,"renderComponent"),ru.prototype),iu(ru.prototype,"renderChildren",[$d],Object.getOwnPropertyDescriptor(ru.prototype,"renderChildren"),ru.prototype),iu(ru.prototype,"renderMonth",[Jd],Object.getOwnPropertyDescriptor(ru.prototype,"renderMonth"),ru.prototype),iu(ru.prototype,"renderCell",[Zd],Object.getOwnPropertyDescriptor(ru.prototype,"renderCell"),ru.prototype),iu(ru.prototype,"renderTooltip",[Qd],Object.getOwnPropertyDescriptor(ru.prototype,"renderTooltip"),ru.prototype),iu(ru.prototype,"handleClick",[eu],Object.getOwnPropertyDescriptor(ru.prototype,"handleClick"),ru.prototype),iu(ru.prototype,"handleResize",[tu],Object.getOwnPropertyDescriptor(ru.prototype,"handleResize"),ru.prototype),ru);var pu,cu,du,uu,hu,fu,mu,gu,yu,bu,vu,Ou;function Cu(){return(Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ku(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let wu={date:(e,t)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+t),month:(e,t)=>new Date(e.getFullYear(),e.getMonth()+t,1),year:(e,t)=>new Date(e.getFullYear()+t,0,1)},xu={date:"d M",month:"M Y",year:"Y"},ju=(pu=w.props({group:"own",include:["date","range","siblingPages","onChange"]},{group:"datePicker",include:["date:value","range:mode"]}),cu=w.defaults({siblingPages:2,range:"date"}),du=w.state((()=>({changing:null}))),uu=w.types({date:kt.instanceOf(Date).isRequired,range:kt.oneOf(["date","month","year"]),siblingPages:kt.number,onChange:kt.func}),hu=w.bind(),fu=w.bind(),mu=w.bind(),gu=w.bind(),yu=w.bind(),bu=w.bind(),vu=w.bind(),ku((Ou=class extends w.Component{renderComponent(){return w.createElement(Pa,{onInitialize:this.handleInitialize,onResize:this.handleResize},this.renderChildren)}renderChildren(e){let{mode:t}=e;if(null===t)return w.createElement("div",Cu({},e,{prefix:"date-pagination"}),w.createElement(dr,{prefix:"date-pagination__first",icon:"chevron-double-left"}),w.createElement(dr,{prefix:"date-pagination__item",modifiers:{date:!0},text:"date"}),w.createElement(dr,{prefix:"date-pagination__item",modifiers:{month:!0},text:"month"}),w.createElement(dr,{prefix:"date-pagination__item",modifiers:{year:!0},text:"year"}));let r,{date:n,range:i}=this.own,{changing:o}=this.state,a=xu[i],l=this.mediaProps[i],s={width:l*(2*t+1)+"px"},p=[],c=[],d={};return null!==o?(o>0?c=this.renderItems(this.currentDate,t+1,o):(p=this.renderItems(this.currentDate,-t+o,-o),d.marginLeft=o*l+"px"),d.transform="translateX("+-o*l+"px)",r=this.currentItems):(this.currentDate=n,r=this.currentItems=w.createElement(w.Fragment,null,this.renderItems(n,-t,t),w.createElement(oi,{prefix:"date-pagination__current",modifiers:{[i]:!0},key:"current",text:w.formatDate(n,a),arrow:null,popoverPosition:"top-center",onPopoverRequestClose:this.handleRequestClose},w.createElement(Pi,Cu({},this.datePicker,{prefix:"date-pagination__date-picker",onChange:this.handleDatePickerChange}))),this.renderItems(n,1,t))),w.createElement("div",Cu({},this.rest,e,{prefix:"date-pagination",modifiers:{changing:!!o},onClick:this.handleClick}),w.createElement(dr,{prefix:"date-pagination__first",key:"first",icon:"chevron-double-left","new-date":-(2*t+1)}),w.createElement(dr,{prefix:"date-pagination__prev",key:"prev",icon:"chevron-left","new-date":-1}),w.createElement("div",{prefix:"date-pagination__scroller",style:s},w.createElement("div",{prefix:"date-pagination__wrapper",style:d,onTransitionEnd:this.handleTransitionEnd},p,r,c)),w.createElement(dr,{prefix:"date-pagination__next",key:"next",icon:"chevron-right","new-date":1}),w.createElement(dr,{prefix:"date-pagination__last",key:"last",icon:"chevron-double-right","new-date":2*t+1}),w.createElement("div",{prefix:"date-pagination__frame",modifiers:{[i]:!0}}))}renderItems(e,t,r){let{range:n}=this.own,i=wu[n],o=xu[n],a=[];for(let l=0;l<r;l++){let r=l+t;a.push(w.createElement(dr,{prefix:"date-pagination__item",modifiers:{[n]:!0},key:r,"new-date":r,text:w.formatDate(i(e,r),o)}))}return a}handleClick(e){let t=e.target.getAttribute("new-date"),{date:r,range:n}=this.own;t&&(t=+t,this.setState({changing:t}),this.fire("onChange",{value:wu[n](r,t)}))}handleDatePickerChange({value:e}){this.requestClose=!0,this.fire("onChange",{value:e})}handleInitialize(e){let[t,r,n,i]=Array.prototype.slice.call(e.rootEl.children).map((e=>e.offsetWidth));this.mediaProps={icon:t,date:r,month:n,year:i}}handleResize(e){let{mediaProps:t}=this,{clientWidth:r}=e,{range:n}=this.own,i=t.icon,o=t[n],a=Math.floor((r-4*i-50)/o);return a%2||a--,a=Math.floor(a/2),a}handleRequestClose(){if(this.requestClose)return this.requestClose=!1,!0}handleTransitionEnd(){this.setState({changing:null})}}).prototype,"renderComponent",[pu,cu,du,uu],Object.getOwnPropertyDescriptor(Ou.prototype,"renderComponent"),Ou.prototype),ku(Ou.prototype,"renderChildren",[hu],Object.getOwnPropertyDescriptor(Ou.prototype,"renderChildren"),Ou.prototype),ku(Ou.prototype,"handleClick",[fu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleClick"),Ou.prototype),ku(Ou.prototype,"handleDatePickerChange",[mu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleDatePickerChange"),Ou.prototype),ku(Ou.prototype,"handleInitialize",[gu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleInitialize"),Ou.prototype),ku(Ou.prototype,"handleResize",[yu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleResize"),Ou.prototype),ku(Ou.prototype,"handleRequestClose",[bu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleRequestClose"),Ou.prototype),ku(Ou.prototype,"handleTransitionEnd",[vu],Object.getOwnPropertyDescriptor(Ou.prototype,"handleTransitionEnd"),Ou.prototype),Ou);var Eu,Pu,_u,zu;function Du(){return(Du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ru(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Tu=(Eu=w.props({group:"own",include:["date","filter","pages","range","sort","tasks","view","onTasksRead"]},{group:"listView",include:["tasks:data","selected","sort","onSelectionChange","onSortChange","onPageChange"]},{group:"gridView",include:["tasks:data","selected","onSelectionChange","onPageChange","onTasksUpdate"]},{group:"columnView",include:["tasks:data","selected","onSelectionChange","onPageChange","onTasksUpdate"]},{group:"monthView",include:["tasks:data","selected","date","onSelectionChange","onPathChange"]},{group:"yearView",include:["tasks:data","date","onPathChange"]},{group:"pagination",include:["date","range"]}),Pu=w.bind(),_u=w.bind(),Ru((zu=class extends w.Component{renderComponent(){let e,{pages:t,range:r,tasks:n,view:i}=this.own;if(n)if(n===w.loading)e=w.createElement(Ut,{prefix:"task-view-switcher__loading-overlay"});else{let o=this.isDirty();switch(i){case"list":e=n.length?w.createElement(yc,Du({},this.listView,{prefix:"task-view-switcher__task-list-view",page:o?void 0:t.list})):w.createElement($l,{prefix:"task-view-switcher__not-found-overlay"});break;case"grid":e=n.length?w.createElement(fd,Du({},this.gridView,{prefix:"task-view-switcher__task-grid-view",page:o?void 0:t.grid})):w.createElement($l,{prefix:"task-view-switcher__not-found-overlay"});break;case"columns":e=w.createElement(_d,Du({},this.columnView,{prefix:"task-view-switcher__task-column-view",pages:o?void 0:t.columns}));break;case"calendar":switch(r){case"month":e=w.createElement(Gd,Du({},this.monthView,{prefix:"task-view-switcher__task-month-view"}));break;case"year":e=w.createElement(su,Du({},this.yearView,{prefix:"task-view-switcher__task-year-view"}))}}"all"!==r&&(e=w.createElement(w.Fragment,null,e,w.createElement(ju,Du({},this.pagination,{prefix:"task-view-switcher__date-pagination",onChange:this.handleDateChange}))))}else e=w.createElement("div",{prefix:"task-view-switcher__empty"});return w.createElement("div",Du({},this.rest,{prefix:"task-view-switcher"}),e)}isDirty(){let{date:e,filter:t,range:r,sort:n,view:i}=this.own,{cachedProps:o={}}=this;return this.cachedProps={date:e,range:r,view:i,filter:t,sort:n},!(o.date&&o.date.getTime()===e.getTime()&&o.range===r&&o.view===i&&o.filter===t&&o.sort===n)}handleAfterRender(){let{date:e,tasks:t}=this.own;t||this.fire("onTasksRead",{date:e})}handleDateChange({value:e}){let t,{range:r}=this.own;switch(r){case"date":t=w.formatDate(e,"Y-m-d");break;case"month":t=w.formatDate(e,"Y-m");break;case"year":t=w.formatDate(e,"Y")}this.fire("onPathChange",{path:t})}}).prototype,"renderComponent",[Eu],Object.getOwnPropertyDescriptor(zu.prototype,"renderComponent"),zu.prototype),Ru(zu.prototype,"handleAfterRender",[Pu],Object.getOwnPropertyDescriptor(zu.prototype,"handleAfterRender"),zu.prototype),Ru(zu.prototype,"handleDateChange",[_u],Object.getOwnPropertyDescriptor(zu.prototype,"handleDateChange"),zu.prototype),zu);const Su=w.connect((e=>{let{date:t,range:r}=e.router,{views:n,pages:i}=e.app,{filter:o,selected:a,sort:l}=e.tasks,s=n[r];return{date:t,filter:o,pages:i,range:r,selected:a,sort:l,tasks:ut.getFilteredTasks(e),view:s,onPageChange:ne.setPage,onPathChange:Je.setPath,onSelectionChange:ut.setSelectedTasks,onSortChange:ut.setSort,onTasksRead:ut.readTasks,onTasksUpdate:ut.updateTasks}}),Tu);var Mu,Au,Iu,Fu;function Nu(){return(Nu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qu(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Vu=(Mu=w.props({group:"own",include:["group","sort","onActiveTabChange","onSortChange","onGroupChange"]}),Au=w.types({group:kt.contactGroup,sort:kt.contactSort,onActiveTabChange:kt.func,onSortChange:kt.func,onGroupChange:kt.func}),Iu=w.bind(),qu((Fu=class extends w.Component{renderComponent(){let{group:e,sort:{sort:t,order:r}}=this.own,n="group:"+(null===e?"none":e),i=[{key:"options",icon:"sort",arrow:!0,items:[{as:"div",children:"Сортировать по:",prefix:"messenger-contact-header__menu-group"},...[{key:"sended",text:"Дате"},{key:"firstName",text:"Имени"},{key:"lastName",text:"Фамилии"},{key:"middleName",text:"Отчеству"},{key:"department",text:"Отделу"}].map((e=>Object.assign(e,{key:"sort:"+e.key,modifiers:{[e.key===t&&"asc"===r?"desc":"asc"]:!0}}))),{as:"div",children:"Группировать по:",prefix:"messenger-contact-header__menu-group"},{key:"group:alphabet",text:"Алфавиту"},{key:"group:department",text:"Отделу"},{key:"group:status",text:"Статусу"},{key:"group:none",text:"Нет"}]},{key:"dialogue",icon:"arrow-right"}];return w.createElement("div",Nu({},this.rest,{prefix:"messenger-contact-header"}),w.createElement("div",{prefix:"messenger-contact-header__title"},"Контакты"),w.createElement(gi,{prefix:"messenger-contact-header__menu",orientation:"horizontal",submenuPrefix:"messenger-contact-header__submenu",items:i,value:n,onChange:this.handleChange}))}handleChange(e){let[t,r]=e.value.split(":"),{sort:n}=this.own;switch(t){case"dialogue":this.fire("onActiveTabChange",{activeTab:"dialogue"});break;case"sort":let e;e=n.sort===r?"desc"===n.order?"asc":"desc":"asc",this.fire("onSortChange",{sort:{sort:r,order:e}});break;case"group":"none"===r&&(r=null),this.fire("onGroupChange",{group:r})}}}).prototype,"renderComponent",[Mu,Au],Object.getOwnPropertyDescriptor(Fu.prototype,"renderComponent"),Fu.prototype),qu(Fu.prototype,"handleChange",[Iu],Object.getOwnPropertyDescriptor(Fu.prototype,"handleChange"),Fu.prototype),Fu);var Ku,Yu,Hu;function Lu(){return(Lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Uu=(Ku=w.props({group:"filter",include:["filter:value","onFilterChange:onChange"]}),Yu=w.types({filter:kt.string,onFilterChange:kt.func}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Hu=class extends w.Component{renderComponent(){return w.createElement("div",Lu({},this.rest,{prefix:"messenger-contact-filter"}),w.createElement($i,Lu({},this.filter,{prefix:"messenger-contact-filter__field",placeholder:"Поиск контактов...",spellCheck:!1})))}}).prototype,"renderComponent",[Ku,Yu],Object.getOwnPropertyDescriptor(Hu.prototype,"renderComponent"),Hu.prototype),Hu);var Bu,Gu,Wu,Xu;function $u(){return($u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ju(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Zu=(Bu=w.props({group:"own",include:["contact","onActiveTabChange"]}),Gu=w.types({contact:kt.contact,onActiveTabChange:kt.func}),Wu=w.bind(),Ju((Xu=class extends w.Component{renderComponent(){let{contact:e}=this.own,{active:t,department:r,message:n,name:i}=e,{sended:o,text:a}=n;return w.createElement("div",$u({},this.rest,{prefix:"messenger-contact",onClick:this.handleContactClick}),w.createElement(Xa,{prefix:"messenger-contact__left",size:"medium",active:!0,contact:e,onClick:this.handleAvatarClick}),w.createElement("div",{prefix:"messenger-contact__center"},w.createElement("div",{prefix:"messenger-contact__name"},i.last+" "+i.first+" "+i.middle+" ("+r.key.toString().padStart(2,"0")+")"),w.createElement("div",{prefix:"messenger-contact__message"},a)),w.createElement("div",{prefix:"messenger-contact__right"},w.createElement("div",{prefix:"messenger-contact__status",modifiers:{active:t}}),w.createElement("div",{prefix:"messenger-contact__date"},w.formatDate(new Date(o),"d M"))))}handleContactClick(e){let{contact:t}=this.own,{currentTarget:r,target:n}=e;r===n&&this.fire("onActiveTabChange",{activeTab:"dialogue",contact:t})}}).prototype,"renderComponent",[Bu,Gu],Object.getOwnPropertyDescriptor(Xu.prototype,"renderComponent"),Xu.prototype),Ju(Xu.prototype,"handleContactClick",[Wu],Object.getOwnPropertyDescriptor(Xu.prototype,"handleContactClick"),Xu.prototype),Xu);var Qu,eh,th,rh;function nh(){return(nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ih(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let oh={alphabet:e=>e.name.last.charAt(0),department:e=>e.department.key.toString().padStart(2,"0"),status:e=>e.active?"Активные":"Не активные"},ah={firstName:e=>e.name.first,middleName:e=>e.name.middle,lastName:e=>e.name.last,department:e=>e.department.key,sended:e=>e.message.sended},lh=(Qu=w.props({group:"own",include:["contacts","group","filter","sort"]},{group:"contact",component:Zu}),eh=w.types({contacts:kt.arrayOf(kt.contact),group:kt.contactGroup,filter:kt.string,sort:kt.contactSort}),th=w.bind(),ih((rh=class extends w.Component{renderComponent(){let e,{contacts:t,filter:r,sort:n,group:i}=this.own;return r&&(t=this.filterContacts(t,r)),0===t.length?e=w.createElement($l,{prefix:"messenger-contact-list__not-found-overlay",text:"Контакты не найдены!"}):(n&&(t=this.sortContacts(t,n)),e=i?this.groupContacts(t,i).map((([e,t])=>w.createElement("div",{prefix:"messenger-contact-list__group",key:e},w.createElement("div",{prefix:"messenger-contact-list__group-header"},e),w.createElement("div",{prefix:"messenger-contact-list__group-body"},t.map(this.renderContact))))):t.map(this.renderContact)),w.createElement("div",nh({},this.rest,{prefix:"messenger-contact-list"}),e)}renderContact(e){let{key:t}=e;return w.createElement(Zu,nh({},this.contact,{prefix:"messenger-contact-list__contact",key:t,contact:e}))}filterContacts(e,t){let r=new RegExp(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");return e.filter((e=>{let{first:t,middle:n,last:i}=e.name;return r.test(t)||r.test(n)||r.test(i)}))}sortContacts(e,{sort:t,order:r}){let n="asc"===r?1:-1,i=ah[t];return[].concat(e).sort(((e,t)=>((e=i(e))>(t=i(t))?1:e<t?-1:0)*n))}groupContacts(e,t){let r=oh[t],n={};return e.forEach((e=>{let t=r(e);(n[t]||(n[t]=[])).push(e)})),Object.entries(n).sort(((e,t)=>e[0]>t[0]?1:-1))}}).prototype,"renderComponent",[Qu,eh],Object.getOwnPropertyDescriptor(rh.prototype,"renderComponent"),rh.prototype),ih(rh.prototype,"renderContact",[th],Object.getOwnPropertyDescriptor(rh.prototype,"renderContact"),rh.prototype),rh);var sh,ph;function ch(){return(ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let dh=(sh=w.props({group:"contactHeader",component:Vu},{group:"contactFilter",component:Uu},{group:"contactList",component:lh}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((ph=class extends w.Component{renderComponent(){return w.createElement("div",ch({},this.rest,{prefix:"messenger-contact-tab"}),w.createElement(Vu,ch({},this.contactHeader,{prefix:"messenger-contact-tab__header"})),w.createElement(Uu,ch({},this.contactFilter,{prefix:"messenger-contact-tab__filter"})),w.createElement(lh,ch({},this.contactList,{prefix:"messenger-contact-tab__list"})))}}).prototype,"renderComponent",[sh],Object.getOwnPropertyDescriptor(ph.prototype,"renderComponent"),ph.prototype),ph);var uh,hh,fh,mh;function gh(){return(gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yh(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let bh=[{key:"contacts",icon:"contacts"},{key:"close",icon:"close"}],vh=(uh=w.props({group:"own",include:["contact","onActiveTabChange","onClose"]}),hh=w.types({contact:kt.contact,onActiveTabChange:kt.func,onClose:kt.func}),fh=w.bind(),yh((mh=class extends w.Component{renderComponent(){let e,{contact:t}=this.own,r=!1;if(t){let{name:n,department:i}=t;e=n.last+" "+n.first+" "+n.middle+" ("+i.key.toString().padStart(2,"0")+")",r=t.active}return w.createElement("div",gh({},this.rest,{prefix:"messenger-dialogue-header"}),w.createElement("div",{prefix:"messenger-dialogue-header__status",modifiers:{active:r}}),w.createElement("div",{prefix:"messenger-dialogue-header__title"},e),w.createElement(gi,{prefix:"messenger-dialogue-header__menu",orientation:"horizontal",items:bh,onChange:this.handleChange}))}handleChange(e){let t=e.value;switch(t){case"contacts":this.fire("onActiveTabChange",{activeTab:t});break;case"close":this.fire("onClose")}}}).prototype,"renderComponent",[uh,hh],Object.getOwnPropertyDescriptor(mh.prototype,"renderComponent"),mh.prototype),yh(mh.prototype,"handleChange",[fh],Object.getOwnPropertyDescriptor(mh.prototype,"handleChange"),mh.prototype),mh);var Oh,Ch,kh;function wh(){return(wh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let xh=(Oh=w.props({group:"own",include:["contact","message","mode"]}),Ch=w.types({contact:kt.contact,message:kt.message,mode:kt.oneOf(["i","he"])}),function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((kh=class extends w.Component{renderComponent(){let{contact:e,message:t,mode:r}=this.own,{sended:n,text:i}=t;return w.createElement("div",wh({},this.rest,{prefix:"messenger-message",modifiers:{mode:r}}),w.createElement(Xa,{prefix:"messenger-message__avatar",size:"small",active:!0,contact:e}),w.createElement("div",{prefix:"messenger-message__text"},i,w.createElement("div",{prefix:"messenger-message__time"},n===w.loading?"Отправка...":w.formatDate(new Date(n),"d M H:i"))))}}).prototype,"renderComponent",[Oh,Ch],Object.getOwnPropertyDescriptor(kh.prototype,"renderComponent"),kh.prototype),kh);var jh,Eh,Ph,_h,zh,Dh,Rh,Th,Sh;function Mh(){return(Mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ah(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Ih=(jh=w.props({group:"own",include:["account","contact","dialogue"]}),Eh=w.innerRefs("root"),Ph=w.types({account:kt.user,content:kt.contact,dialogue:kt.arrayOf(kt.message)}),_h=w.bind(),zh=w.bind(),Dh=w.bind(),Rh=w.bind(),Th=w.bind(),Ah((Sh=class extends w.Component{renderComponent(){let{dialogue:e}=this.own,{rootRef:t}=this.innerRefs;return w.createElement("div",Mh({},this.rest,{prefix:"messenger-dialogue",innerRef:t,onScroll:this.handleScroll}),e.map(this.renderMessage))}renderMessage(e){let t,{account:r,contact:n}=this.own,{from:i,key:o}=e;return t=i?{contact:n,mode:"he"}:{contact:r,mode:"i"},w.createElement(xh,Mh({},t,{prefix:"messenger-dialogue__message",key:o,message:e}))}handleBeforeMount(){this.cachedProps||(this.cachedProps={cachedContact:{},cachedMessage:{},scrollTimestamp:0})}handleBeforeRender(){let{rootEl:e}=this.innerRefs,t=!1;if(e){let{clientHeight:r,scrollHeight:n,scrollTop:i}=e;t=n-i===r||Date.now()-this.cachedProps.scrollTimestamp<50}this.cachedProps.isScrolledToEnd=t}handleAfterRender(){let{cachedContact:e,cachedMessage:t,isScrolledToEnd:r}=this.cachedProps,{contact:n,dialogue:i}=this.own,o=i[i.length-1];e.key!==n.key?this.scrollToEnd():(t.sended!==w.loading&&o.sended===w.loading||r)&&this.scrollToEnd(!0),Object.assign(this.cachedProps,{cachedContact:n,cachedMessage:o})}handleScroll(){this.cachedProps.scrollTimestamp=Date.now()}scrollToEnd(e){let{rootEl:t}=this.innerRefs;t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"auto"})}}).prototype,"renderComponent",[jh,Eh,Ph],Object.getOwnPropertyDescriptor(Sh.prototype,"renderComponent"),Sh.prototype),Ah(Sh.prototype,"renderMessage",[_h],Object.getOwnPropertyDescriptor(Sh.prototype,"renderMessage"),Sh.prototype),Ah(Sh.prototype,"handleBeforeMount",[zh],Object.getOwnPropertyDescriptor(Sh.prototype,"handleBeforeMount"),Sh.prototype),Ah(Sh.prototype,"handleBeforeRender",[Dh],Object.getOwnPropertyDescriptor(Sh.prototype,"handleBeforeRender"),Sh.prototype),Ah(Sh.prototype,"handleAfterRender",[Rh],Object.getOwnPropertyDescriptor(Sh.prototype,"handleAfterRender"),Sh.prototype),Ah(Sh.prototype,"handleScroll",[Th],Object.getOwnPropertyDescriptor(Sh.prototype,"handleScroll"),Sh.prototype),Sh);var Fh,Nh,qh,Vh,Kh,Yh,Hh;function Lh(){return(Lh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Uh(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Bh=(Fh=w.props({group:"own",include:["draft","onMessageChange","onMessageSend"]}),Nh=w.innerRefs("input"),qh=w.types({draft:kt.string,onMessageChange:kt.func,onMessageSend:kt.func}),Vh=w.bind(),Kh=w.bind(),Yh=w.bind(),Uh((Hh=class extends w.Component{renderComponent(){let{draft:e}=this.own,{inputRef:t}=this.innerRefs;return w.createElement("div",Lh({},this.rest,{prefix:"messenger-message-editor"}),w.createElement($i,{prefix:"messenger-message-editor__field",placeholder:"Введите сообщение...",multiline:!0,value:e,inputRef:t,onChange:this.handleChange}),w.createElement("div",{prefix:"messenger-message-editor__footer"},w.createElement(dr,{prefix:"messenger-message-editor__submit",disabled:!e,text:"Отправить",onClick:this.handleSubmit})))}handleAfterRender(){let{inputEl:e}=this.innerRefs;Object.assign(e.style,{overflowY:"hidden",height:"1px"}),Object.assign(e.style,{overflowY:"auto",height:e.scrollHeight+2+"px"})}handleChange(e){this.fire("onMessageChange",e)}handleSubmit(){let{draft:e}=this.own;this.fire("onMessageSend",{value:e})}}).prototype,"renderComponent",[Fh,Nh,qh],Object.getOwnPropertyDescriptor(Hh.prototype,"renderComponent"),Hh.prototype),Uh(Hh.prototype,"handleAfterRender",[Vh],Object.getOwnPropertyDescriptor(Hh.prototype,"handleAfterRender"),Hh.prototype),Uh(Hh.prototype,"handleChange",[Kh],Object.getOwnPropertyDescriptor(Hh.prototype,"handleChange"),Hh.prototype),Uh(Hh.prototype,"handleSubmit",[Yh],Object.getOwnPropertyDescriptor(Hh.prototype,"handleSubmit"),Hh.prototype),Hh);var Gh,Wh,Xh,$h,Jh;function Zh(){return(Zh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qh(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let ef=(Gh=w.props({group:"own",include:["account","contact","dialogue","onMessagesRead","onMessageSend"]},{group:"header",component:vh},{group:"dialogue",component:Ih},{group:"editor",component:Bh}),Wh=w.types({account:kt.user,contact:kt.contact,dialogue:kt.oneOfType([kt.array,kt.loading]),onMessagesRead:kt.func,onMessageSend:kt.func}),Xh=w.bind(),$h=w.bind(),Qh((Jh=class extends w.Component{renderComponent(){let e,{dialogue:t}=this.own;return t?t===w.loading?e=w.createElement(Ut,{prefix:"messenger-dialogue-tab__loading-overlay"}):(e=t.length?w.createElement(Ih,Zh({},this.dialogue,{prefix:"messenger-dialogue-tab__dialogue"})):w.createElement($l,{prefix:"messenger-dialogue-tab__not-found-overlay",text:"Нет сообщений!"}),e=w.createElement(w.Fragment,null,e,w.createElement(Bh,Zh({},this.editor,{prefix:"messenger-dialogue-tab__editor",onMessageSend:this.handleMessageSend})))):e=w.createElement($l,{prefix:"messenger-dialogue-tab__not-found-overlay",text:"Нет открытых диалогов!"}),w.createElement("div",Zh({},this.rest,{prefix:"messenger-dialogue-tab"}),w.createElement(vh,Zh({},this.header,{prefix:"messenger-dialogue-tab__header"})),e)}handleAfterRender(){let{contact:e,dialogue:t}=this.own;e&&!t&&this.fire("onMessagesRead",{key:e.key})}handleMessageSend(e){let{account:t,contact:r}=this.own,{value:n}=e;this.fire("onMessageSend",{message:{text:n,from:t.key,to:r.key}})}}).prototype,"renderComponent",[Gh,Wh],Object.getOwnPropertyDescriptor(Jh.prototype,"renderComponent"),Jh.prototype),Qh(Jh.prototype,"handleAfterRender",[Xh],Object.getOwnPropertyDescriptor(Jh.prototype,"handleAfterRender"),Jh.prototype),Qh(Jh.prototype,"handleMessageSend",[$h],Object.getOwnPropertyDescriptor(Jh.prototype,"handleMessageSend"),Jh.prototype),Jh);var tf,rf,nf,of,af,lf;function sf(){return(sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pf(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let cf=(tf=w.props({group:"own",include:["activeDialogue","activeTab","contacts","drafts","dialogues","onContactsRead","onMessageChange"]},{group:"contactTab",component:dh},{group:"dialogueTab",component:ef}),rf=w.defaults({drafts:[]}),nf=w.types({activeDialogue:kt.number,activeTab:kt.oneOf(["dialogue","contacts"]),contacts:kt.oneOfType([kt.arrayOf(kt.contact),kt.loading]),drafts:kt.objectOf(kt.string),dialogues:kt.objectOf(kt.oneOfType([kt.arrayOf(kt.message),kt.loading])),onContactsRead:kt.func,onMessageChange:kt.func}),of=w.bind(),af=w.bind(),pf((lf=class extends w.Component{renderComponent(){return w.createElement("div",sf({},this.rest,{prefix:"messenger"}),this.renderChildren())}renderChildren(){let{contacts:e}=this.own;if(!e)return null;if(e===w.loading)return w.createElement(Ut,{prefix:"messenger__loading-overlay"});if(0===e.length)return w.createElement($l,{prefix:"messenger__not-found-overlay",text:"Контакты не найдены!"});{let{activeTab:e}=this.own;switch(e){case"contacts":return w.createElement(dh,sf({},this.contactTab,{prefix:"messenger__contact-tab"}));case"dialogue":let e,{activeDialogue:t,contacts:r,drafts:n,dialogues:i}=this.own;return e="number"==typeof t?{contact:r.find((e=>e.key===t)),dialogue:i[t],draft:n[t]||""}:{dialogue:null},w.createElement(ef,sf({},this.dialogueTab,e,{prefix:"messenger__dialogue-tab",onMessageChange:this.handleMessageChange}))}}}handleAfterRender(){let{contacts:e}=this.own;e||this.fire("onContactsRead")}handleMessageChange({value:e}){let{activeDialogue:t}=this.own;this.fire("onMessageChange",{key:t,value:e})}}).prototype,"renderComponent",[tf,rf,nf],Object.getOwnPropertyDescriptor(lf.prototype,"renderComponent"),lf.prototype),pf(lf.prototype,"handleAfterRender",[of],Object.getOwnPropertyDescriptor(lf.prototype,"handleAfterRender"),lf.prototype),pf(lf.prototype,"handleMessageChange",[af],Object.getOwnPropertyDescriptor(lf.prototype,"handleMessageChange"),lf.prototype),lf);const df=w.connect((e=>{let{account:t}=e;return Object.assign({},e.messages,{account:t,onActiveTabChange:Ie.setActiveTab,onClose:ne.toggleMessenger,onMessagesRead:Ie.readDialogue,onContactsRead:Ie.readContacts,onGroupChange:Ie.setGroup,onFilterChange:Ie.setFilter,onMessageChange:Ie.setDraft,onMessageSend:Ie.createMessage,onSortChange:Ie.setSort})}),cf);var uf,hf,ff,mf,gf;function yf(){return(yf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bf(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let vf=(uf=w.props({group:"layout",include:"collapsed"}),hf=w.bind(),ff=w.bind(),mf=w.bind(),bf((gf=class extends w.Component{renderComponent(){return w.createElement("div",yf({},this.rest,{prefix:"task-page"}),w.createElement(zs,{prefix:"task-page__header"}),w.createElement(Fa,yf({},this.layout,{prefix:"task-page__body",left:this.renderSidebar,center:this.renderContent,right:this.renderMessenger})))}renderSidebar(){return w.createElement(Bs,{prefix:"task-page__sidebar"})}renderContent(){return w.createElement(Su,{prefix:"task-page__view-switcher"})}renderMessenger(){return w.createElement(df,{prefix:"task-page__messenger"})}}).prototype,"renderComponent",[uf],Object.getOwnPropertyDescriptor(gf.prototype,"renderComponent"),gf.prototype),bf(gf.prototype,"renderSidebar",[hf],Object.getOwnPropertyDescriptor(gf.prototype,"renderSidebar"),gf.prototype),bf(gf.prototype,"renderContent",[ff],Object.getOwnPropertyDescriptor(gf.prototype,"renderContent"),gf.prototype),bf(gf.prototype,"renderMessenger",[mf],Object.getOwnPropertyDescriptor(gf.prototype,"renderMessenger"),gf.prototype),gf);const Of=w.connect((e=>{let{collapsed:t}=e.app;return{collapsed:t}}),vf);var Cf,kf,wf,xf;function jf(){return(jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ef(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let Pf=(Cf=w.props({group:"own",include:["account","page","theme","onAccountRead"]},{group:"popupManager",component:bn.Manager,include:["onPopupOpen:onOpen","onPopupClose:onClose"]}),kf=w.types({account:kt.oneOfType([kt.object,kt.loading]),page:kt.string,theme:kt.theme,onAccountRead:kt.func}),wf=w.bind(),Ef((xf=class extends w.Component{renderComponent(){let{account:e}=this.own;if(!e)return null;let{theme:t}=this.own,r="viewport"+(t?" theme--"+t:"");return w.createElement("div",jf({},this.rest,{prefix:r}),e===w.loading?this.renderLoadingOverlay():this.renderViewport(),w.createElement(bn.Manager,this.popupManager))}renderLoadingOverlay(){return w.createElement(Ut,{prefix:"viewport__loading-overlay"})}renderViewport(){let{account:e,page:t}=this.own,{key:r}=e;if(!r&&"number"!=typeof r)return w.createElement(ta,{prefix:"viewport__sign-in-page"});switch(t){case"tasks":return w.createElement(Of,{prefix:"viewport__task-page"});default:return w.createElement(pa,{prefix:"viewport__not-found-page"})}}handleAfterRender(){let{account:e}=this.own;e||this.fire("onAccountRead",{})}}).prototype,"renderComponent",[Cf,kf],Object.getOwnPropertyDescriptor(xf.prototype,"renderComponent"),xf.prototype),Ef(xf.prototype,"handleAfterRender",[wf],Object.getOwnPropertyDescriptor(xf.prototype,"handleAfterRender"),xf.prototype),xf);const _f=w.connect((e=>{let{account:t,popups:r}=e,{page:n}=e.router,{theme:i}=e.app;return{account:t,page:n,popups:r,theme:i,onAccountRead:L.readAccount,onPopupOpen:Be.openPopup,onPopupClose:Be.closePopup}}),Pf);let zf=w.createStore({Account:L,App:ne,Help:ue,Materials:be,Messages:Ie,Operations:Ke,Popups:Be,Router:Je,Tasks:ut,Tools:bt});w.render(w.createElement(w.Provider,{store:zf},w.createElement(_f,null)),document.querySelector(".root"))}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n](i,i.exports,r),i.loaded=!0,i.exports}r.m=e,r.x=e=>{},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0},t=[[2020,736]],n=e=>{},i=(i,o)=>{for(var a,l,[s,p,c,d]=o,u=0,h=[];u<s.length;u++)l=s[u],r.o(e,l)&&e[l]&&h.push(e[l][0]),e[l]=0;for(a in p)r.o(p,a)&&(r.m[a]=p[a]);for(c&&c(r),i&&i(o);h.length;)h.shift()();return d&&t.push.apply(t,d),n()},o=self.webpackChunktech_tasks=self.webpackChunktech_tasks||[];function a(){for(var n,i=0;i<t.length;i++){for(var o=t[i],a=!0,l=1;l<o.length;l++){var s=o[l];0!==e[s]&&(a=!1)}a&&(t.splice(i--,1),n=r(r.s=o[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),n}o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o));var l=r.x;r.x=()=>(r.x=l||(e=>{}),(n=a)())})(),r.x()})();